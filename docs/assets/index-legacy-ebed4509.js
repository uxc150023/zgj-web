System.register(["./chunk-vform-legacy-f1b551df.js","./chunk-ant-design-vue-legacy-78f2abeb.js","./gengduo-caozuo-legacy-e441bcd3.js","./ketanchude-legacy-4abaf206.js","./JyTable-legacy-7e059877.js","./department-legacy-e75c7ca5.js","./actionMoreDialog-legacy-24aadb09.js","./index-legacy-342f79d7.js","./chunk-element-plus-legacy-3362d1f8.js","./sangedian-legacy-75d81ddc.js","./Layout-legacy-262a6687.js","./searchForm-legacy-04a651fb.js","./KDocumentTypeDialog-legacy-0ecc1f11.js","./pagination-legacy-4c7c1f23.js","./batch-legacy-ff825cb6.js","./index-legacy-ed44ba95.js","./index-legacy-1f87fb02.js","./cha-kong-legacy-1ebc7b7b.js","./index-legacy-96212af9.js","./yuan-hui-legacy-0c1e3d03.js","./index-legacy-dc05f884.js","./home-back-legacy-d9a8ace4.js","./logo-legacy-7450937f.js","./request-util-legacy-680a8f33.js"],(function(e,a){"use strict";var t,n,l,o,r,d,i,c,u,s,g,m,p,h,v,b,f,y,x,w,N,I,j,_,k,D,z,P,C,L,T,A=document.createElement("style");return A.textContent='.title[data-v-36305306]{display:flex;align-items:center;justify-content:space-between}.title .title-more[data-v-36305306]{display:flex}.title .title-more .title-more-down[data-v-36305306]{margin-left:5px}.title .title-more .title-more-down img[data-v-36305306]{margin-right:5px}.components-Layout .ap-box-tree[data-v-36305306]{position:relative}.box-card[data-v-36305306]{width:110px;position:absolute;z-index:1000}.box-card div[data-v-36305306]{height:35px;line-height:35px;border-bottom:1px solid var(--el-color-primary);text-align:center;cursor:pointer}.box-card div[data-v-36305306]:nth-last-of-type(1){border-bottom:none}.components-tree[data-v-36305306]{width:max-content;min-width:100%;margin:0%}.components-tree .custom-tree-node[data-v-36305306]{display:flex;align-items:center}.components-tree .custom-tree-node .custom-tree-node-icon[data-v-36305306]{margin-right:.4rem}.components-tree[data-v-36305306]{margin-bottom:0%}.components-tree[data-v-36305306] .el-tree-node__children .el-tree-node__content{height:2.2857142857rem;padding-right:10px}.components-tree[data-v-36305306] .el-tree .el-icon svg{display:none!important;height:0;width:0}.components-tree[data-v-36305306] .el-tree-node__expand-icon{font-size:16px}.components-tree[data-v-36305306] .el-tree .el-tree-node__expand-icon.expanded{-webkit-transform:rotate(0deg);transform:rotate(0)}.components-tree[data-v-36305306] .el-tree .el-tree-node__expand-icon:before{background:url(/zgj-web/assets/tree-fangxiang-zuo-449ab744.svg) no-repeat 0;content:"";display:block;width:18px;height:18px}.components-tree[data-v-36305306] .el-tree .el-tree-node__expand-icon.expanded:before{background:url(/zgj-web/assets/tree-fangxiang-xia-767e704d.svg) no-repeat 0 0;content:"";display:block;width:18px;height:18px;margin-top:4px}.components-tree[data-v-36305306] .el-tree .is-leaf.el-tree-node__expand-icon:before{display:block;background:none!important;content:"";width:18px;height:18px}.components-tree[data-v-36305306] .el-tree-node__expand-icon.is-leaf{width:16px;display:block}\n',document.head.appendChild(A),{setters:[e=>{t=e.g,n=e.P,l=e.i,o=e.n,r=e.a1},e=>{d=e.a,i=e.at,c=e.a9,u=e.aQ,s=e.W,g=e.X,m=e.ap,p=e.ai,h=e.Y,v=e.an,b=e.ao,f=e.ah,y=e.af,x=e.u,w=e.am,N=e.aj,I=e.ak,j=e.n,_=e.ba,k=e.bb},e=>{D=e._},e=>{z=e._},e=>{P=e.J},e=>{C=e.a},e=>{L=e.a},e=>{T=e._},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const a=[{prop:"organName",label:"部门名称","min-width":150,fixed:"left",show:!0},{prop:"organNo",label:"部门编码","min-width":150,show:!0},{prop:"organTypeName",label:"组织类型","min-width":150,show:!0},{prop:"organUserNum",label:"部门人数",sortable:"custom",align:"center",width:150,show:!0},{prop:"organLeaderName",label:"部门主管","min-width":150,show:!0},{prop:"organPName",label:"上级组织","min-width":150,show:!0},{prop:"flag",label:"状态",show:!0},{prop:"caozuo",label:"操作","min-width":250,fixed:"right",align:"center",show:!0,rankDisplayData:[{name:"t-zgj-Edit"},{name:"status"},{name:"t-zgj-Delete"}]}],A=e=>(_("data-v-36305306"),e=e(),k(),e),B={class:"title"},V=A((()=>h("div",null,"单位与部门管理",-1))),O={class:"title-more"},E={class:"title-more-add"},U={class:"title-more-down"},S=A((()=>h("img",{class:"button-icon",src:D,alt:"",srcset:""},null,-1))),F=v("导入"),$={class:"components-tree"},q=v("部门"),J=v("单位"),R={class:"select-box-contBox"},W=A((()=>h("div",{class:"ap-box-contBox-icon"},[h("img",{class:"ap-box-contBox-icon-img",src:z,alt:""})],-1))),Y={class:"select-box-contBox"},H=A((()=>h("div",{class:"ap-box-contBox-icon"},[h("img",{class:"ap-box-contBox-icon-img",src:z})],-1))),M={class:"header-div"},X=A((()=>h("img",{src:r},null,-1))),G={class:"content-div"};e("default",t({setup(e){const t=d(!1),r=d([]),_=d(!1),k=d(!1),D=d(!1),z=d(null),A=d([]),K=d(["organ"]),Q=d(null),Z=d("-1"),ee=d(null),ae=d(!1),te=d(!1),ne=d(null),le=d(null),oe=d(!1),re=d(null),de=d(null),ie=d(null),ce=d(null),ue=d(null),se=d([]),ge=d(null),me=i({organId:"",organNo:"",organName:"",organTypeId:"department",organPid:"",organPName:"",organLeaderId:"",organLeaderName:"",readme:""}),pe=i({organName:[{required:!0,message:"请输入部门名称",trigger:"change"}],organPName:[{required:!0,message:"请选择上级部门",trigger:"change"}]}),he=i({showOneAction:{show:!1,header:{data:""},content:{data:""}},componentsSearchForm:{data:[{id:"keyWord",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"部门名称/部门编码"}},{id:"flag",label:"状态",type:"select",inCommonUse:!0,options:[{label:"启用",value:1},{label:"停用",value:0}],defaultAttribute:{placeholder:"请选择"}}],butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:a},componentsTree:{data:[],defaultAttribute:{"check-on-click-node":!0,"show-checkbox":!1,"expand-on-click-node":!1,"check-strictly":!0,"highlight-current":!0,"node-key":"organId","current-node-key":"-1",accordion:!0},defaultProps:{label:"organName",children:"children",isLeaf:"haveChildren"},value:""},componentsBatch:{selectionData:[],data:[{name:"t-zgj-dept.BatchDeactivation"},{name:"t-zgj-dept.BatchEnable"},{name:"t-zgj-seal.BatchDelete"}]}});function ve(e,a,n,l){Z.value=e.organId,t.value=!0,r.value=[{value:"detail",params:e.organId},{value:"organizer",params:e.organId}]}function be(e,a,t,n){"t-zgj-Edit"===t.name?(_.value=!0,me.organId=a.organId,j((()=>{z.value.resetFields(),C.detail(a.organId).then((e=>{const a=e.data;me.organId=a.organId,me.organNo=a.organNo,me.organName=a.organName,me.organTypeId=a.organTypeId,me.organPid=a.organPid,me.organPName=a.organPName||l("accountInfo")&&l("accountInfo").userDepartName,me.organLeaderId=a.organLeaderId,me.organLeaderName=a.organLeaderName,me.readme=a.readme}))}))):"t-zgj-F_SEAL_INFO_UP"===t.name||"t-zgj-F_SEAL_INFO_DOWN"===t.name||("status"===t.name?(ce.value="启用"===a.flag?"t-zgj-Disable":"t-zgj-Enable",ie.value=a.organId,he.showOneAction.show=!0,he.showOneAction.header.data="提示","启用"===a.flag?he.showOneAction.content.data="是否停用该部门？":he.showOneAction.content.data="是否启用该部门？"):"t-zgj-Delete"===t.name&&(ce.value="t-zgj-Delete",ie.value=a.organId,he.showOneAction.show=!0,he.showOneAction.header.data="提示",he.showOneAction.content.data="是否删除该部门？"))}function fe(){"t-zgj-Enable"===ce.value?C.batchEnable([ie.value]).then((e=>{ee.value.reloadData()})).finally((()=>{he.showOneAction.show=!1})):"t-zgj-Disable"===ce.value?C.batchDisable([ie.value]).then((e=>{ee.value.reloadData()})).finally((()=>{he.showOneAction.show=!1})):"t-zgj-Delete"===ce.value&&C.batchDelete([ie.value]).then((e=>{ee.value.reloadData(),ue.value.loaded=!1,ue.value.expand()})).finally((()=>{oe.value=!1,he.showOneAction.show=!1}))}function ye(e,a){re.value=e.name,"t-zgj-dept.BatchDeactivation"===e.name?de.value={header:{data:"批量停用"},content:{data:"是否批量停用这些部门？"}}:"t-zgj-dept.BatchEnable"===e.name?de.value={header:{data:"批量启用"},content:{data:"是否批量启用这些部门？"}}:"t-zgj-seal.BatchDelete"===e.name&&(de.value={header:{data:"批量删除"},content:{data:"是否批量删除这些部门？"}}),he.componentsBatch.selectionData=a,oe.value=!0}const xe=e=>{D.value=!0,Q.value=e,"organP"===e?(K.value=["organ"],A.value=me.organPid?[{id:me.organPid,name:me.organPName,type:"organ"}]:[]):(K.value=["user"],A.value=me.organLeaderId?[{id:me.organLeaderId,name:me.organLeaderName,type:"user"}]:[]),setTimeout((()=>{k.value=!0}),200)},we=()=>{k.value=!1,setTimeout((()=>{D.value=!1}),200)},Ne=()=>{_.value=!0,j((()=>{me.organPid="",me.organId="",me.organPName="",me.organLeaderName="",z.value.resetFields()}))},Ie=d(!0),je=()=>{z.value.validate((e=>{e&&(me.organId?(Ie.value=!1,C.edit(me).then((()=>{_.value=!1,ue.value.loaded=!1,ue.value.expand(),ee.value.reloadData(),Ie.value=!0})).catch((()=>{Ie.value=!0}))):(ue.value=ge.value.getNode(me.organPid),Ie.value=!1,C.add(me).then((()=>{ue.value&&(he.componentsTree.defaultAttribute["current-node-key"]=me.organPid,Z.value=me.organPid,_.value=!1,ue.value.loaded=!1,ue.value.expand()),ee.value.reloadData(),Ie.value=!0})).catch((()=>{Ie.value=!0}))))}))},_e=e=>{"organP"===Q.value?(me.organPid=e.length?e[0].id:"",me.organPName=e.length?e[0].name:""):(me.organLeaderId=e.length?e[0].id:"",me.organLeaderName=e.length?e[0].name:"")};function ke(e,a){if(0===e.level)ue.value=e,C.subOrganList(-1).then((e=>(e.data.forEach((e=>e.haveChildren=!e.haveChildren)),se.value=e.data,a([{organName:l("accountInfo")&&l("accountInfo").userDepartName,organId:"-1",haveChildren:!1,children:[]}])))).then((()=>{j((()=>{const e=ue.value.childNodes[0];e&&(e.expanded=!0),e&&e.loadData()}))}));else{if(1===e.level)return a(se.value);C.subOrganList(e.data.organId).then((e=>(e.data.forEach((e=>e.haveChildren=!e.haveChildren)),a(e.data))))}}function De(e,a){ue.value=a,Z.value=e.organId,ee.value.reloadData()}function ze(e,a,t){1===t.level?te.value=!1:te.value=!0,ae.value=!0,le.value=a,ne.value.$el.style.right=0,ne.value.$el.style.top=e.layerY+10+"px",document.addEventListener("click",Pe)}function Pe(){ae.value=!1,document.removeEventListener("click",Pe)}function Ce(){_.value=!0,j((()=>{z.value.resetFields(),me.organPid=le.value.organId,me.organPName=le.value.organName}))}function Le(){_.value=!0,me.organId=le.value.organId,j((()=>{z.value.resetFields(),C.detail(le.value.organId).then((e=>{const a=e.data;me.organId=a.organId,me.organNo=a.organNo,me.organName=a.organName,me.organTypeId=a.organTypeId,me.organPid=a.organPid,me.organPName=a.organPName||JSON.parse(localStorage.getItem("departLists")).find((e=>e.tenantId===localStorage.getItem("tenantId"))).tenantName,me.organLeaderId=a.organLeaderId,me.organLeaderName=a.organLeaderName,me.readme=a.readme}))}))}function Te(){ie.value=le.value.organId,ce.value="t-zgj-Delete",he.showOneAction.show=!0,he.showOneAction.header.data="提示",he.showOneAction.content.data="是否删除该部门"}const Ae=()=>{"t-zgj-dept.BatchDeactivation"===re.value?C.batchDisable(he.componentsBatch.selectionData.map((e=>e.organId))).then((e=>{ee.value.reloadData()})).finally((()=>{oe.value=!1})):"t-zgj-dept.BatchEnable"===re.value?C.batchEnable(he.componentsBatch.selectionData.map((e=>e.organId))).then((e=>{ee.value.reloadData()})).finally((()=>{oe.value=!1})):"t-zgj-seal.BatchDelete"===re.value&&C.batchDelete(he.componentsBatch.selectionData.map((e=>e.organId))).then((e=>{ee.value.reloadData(),ue.value.loaded=!1,ue.value.expand()})).finally((()=>{oe.value=!1}))};return c((()=>{})),(e,a)=>{const l=u("el-button"),d=u("el-dropdown-item"),i=u("el-dropdown-menu"),c=u("el-dropdown"),j=u("el-tree"),C=u("el-card"),Q=u("el-input"),le=u("el-form-item"),re=u("el-radio"),ie=u("el-radio-group"),ce=u("el-form"),ue=o,se=u("JyElMessageBox");return s(),g("div",null,[m(P,{url:"/organ/page",ref_key:"table",ref:ee,componentsSearchForm:x(he).componentsSearchForm,componentsTableHeader:x(he).componentsTable.header,componentsBatch:x(he).componentsBatch,queryParams:{organId:Z.value},statusColoum:"flag",openValue:"启用",hasTree:"",tableClick:"organName",onCellClick:ve,onCustomClick:be,onClickBatchButton:ye},{title:p((()=>[h("div",B,[V,h("div",O,[h("div",E,[m(l,{type:"primary",onClick:Ne},{default:p((()=>[v("+ "+b(e.$t("t-zgj-add")),1)])),_:1})]),h("div",U,[m(c,{"popper-class":"more-operation-dropdown"},{dropdown:p((()=>[m(i,null,{default:p((()=>[m(d,null,{default:p((()=>[F])),_:1})])),_:1})])),default:p((()=>[m(l,null,{default:p((()=>[S,h("span",null,b(e.$t("t-zgj-table.more.Operation")),1)])),_:1})])),_:1})])])])])),tree:p((()=>[h("div",$,[Ie.value?(s(),f(j,y({key:0,ref_key:"deptTreeRef",ref:ge,data:x(he).componentsTree.data,props:x(he).componentsTree.defaultProps},x(he).componentsTree.defaultAttribute,{lazy:"",load:ke,onCurrentChange:De,onNodeContextmenu:ze}),null,16,["data","props"])):w("",!0),N(m(C,{class:"box-card",ref_key:"card",ref:ne,"body-style":{padding:"0 10px"}},{default:p((()=>[h("div",{class:"add",onClick:Ce},"添加子部门"),N(h("div",{class:"delete",onClick:Le}," 编辑部门 ",512),[[I,te.value]]),N(h("div",{class:"edit",onClick:Te}," 删除部门 ",512),[[I,te.value]])])),_:1},512),[[I,ae.value]])])])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch","queryParams"]),m(T,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),modulesName:"unit_and_department",detailParams:r.value},null,8,["modelValue","detailParams"]),m(ue,{"onUpdate:show":a[9]||(a[9]=e=>_.value=e),show:_.value,title:x(me).organId?e.$t("t-zgj-Edit"):e.$t("t-zgj-add"),centerBtn:!0,confirmText:e.$t("t-zgj-operation.submit"),concelText:e.$t("t-zgj-operation.cancel"),width:900,height:400,onConfirm:je},{default:p((()=>[m(ce,{model:x(me),rules:x(pe),ref_key:"vFormLibraryRef",ref:z,"label-width":"80px"},{default:p((()=>[m(le,{label:"部门名称",prop:"organName"},{default:p((()=>[m(Q,{modelValue:x(me).organName,"onUpdate:modelValue":a[1]||(a[1]=e=>x(me).organName=e),placeholder:"请输入",clearable:"",maxlength:"128"},null,8,["modelValue"])])),_:1}),m(le,{label:"组织类型",prop:"organTypeId"},{default:p((()=>[m(ie,{modelValue:x(me).organTypeId,"onUpdate:modelValue":a[2]||(a[2]=e=>x(me).organTypeId=e)},{default:p((()=>[m(re,{label:"department",size:"large"},{default:p((()=>[q])),_:1}),m(re,{label:"unit",size:"large"},{default:p((()=>[J])),_:1})])),_:1},8,["modelValue"])])),_:1}),m(le,{label:"部门编码",prop:"organNo"},{default:p((()=>[m(Q,{modelValue:x(me).organNo,"onUpdate:modelValue":a[3]||(a[3]=e=>x(me).organNo=e),placeholder:"请输入",maxlength:"64"},null,8,["modelValue"])])),_:1}),m(le,{label:"上级部门",prop:"organPName"},{default:p((()=>[h("div",R,[m(Q,{class:"ap-box-contBox-input width-100",readonly:"",modelValue:x(me).organPName,"onUpdate:modelValue":a[4]||(a[4]=e=>x(me).organPName=e),placeholder:"请选择",onClick:a[5]||(a[5]=e=>xe("organP"))},null,8,["modelValue"]),W])])),_:1}),m(le,{label:"部门领导",prop:"organLeaderId"},{default:p((()=>[h("div",Y,[m(Q,{class:"ap-box-contBox-input width-100",readonly:"",modelValue:x(me).organLeaderName,"onUpdate:modelValue":a[6]||(a[6]=e=>x(me).organLeaderName=e),placeholder:"请选择",onClick:a[7]||(a[7]=e=>xe("leaderUser"))},null,8,["modelValue"]),H])])),_:1}),m(le,{label:"备注",prop:"readme"},{default:p((()=>[m(Q,{modelValue:x(me).readme,"onUpdate:modelValue":a[8]||(a[8]=e=>x(me).readme=e),type:"textarea",maxlength:"512"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["show","title","confirmText","concelText"]),D.value?(s(),f(x(n),{key:0,show:k.value,"onUpdate:show":we,searchSelected:A.value,"onUpdate:searchSelected":_e,tabsShow:K.value,multiple:!1,hasTopRoot:!0},null,8,["show","searchSelected","tabsShow"])):w("",!0),m(x(L),{"onUpdate:modelValue":a[10]||(a[10]=e=>oe.value=!1),show:oe.value,selectionData:x(he).componentsBatch.selectionData,showToastDialogContent:de.value,label:"organName",onSureAction:Ae},null,8,["show","selectionData","showToastDialogContent"]),m(se,{modelValue:x(he).showOneAction.show,"onUpdate:modelValue":a[11]||(a[11]=e=>x(he).showOneAction.show=e),mode:1,showClose:!1,defaultAttribute:{},onConfirmClick:fe},{header:p((()=>[h("div",M,[X,h("span",null,b(x(he).showOneAction.header.data),1)])])),content:p((()=>[h("div",G,b(x(he).showOneAction.content.data),1)])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-36305306"]]))}}}));
