System.register(["./tree-legacy-b312961e.js","./main-legacy-32c40b54.js","./ketanchude-legacy-4abaf206.js","./KDocumentTypeDialog-legacy-531ebfaa.js","./index-legacy-31a1c1a3.js","./index-legacy-9e9917b9.js","./index-legacy-d03eb945.js","./index-legacy-e5394dcb.js","./ModelApi-legacy-c0618bc9.js","./index-legacy-301598c8.js","./JyTable-legacy-caaa7541.js","./index-legacy-4a966d5e.js","./tree.vue_vue_type_style_index_0_scoped_c843ec9b_lang-legacy-893f98eb.js","./home-back-legacy-d9a8ace4.js","./logo-legacy-7450937f.js","./request-util-legacy-76780fff.js","./sangedian-legacy-75d81ddc.js","./Layout-legacy-8a369202.js","./searchForm-legacy-6cef90ab.js","./pagination-legacy-fb6b924b.js","./batch-legacy-3a06fca6.js","./index-legacy-1f81a8d9.js","./cha-kong-legacy-1ebc7b7b.js","./index-legacy-88ea9e78.js","./yuan-hui-legacy-0c1e3d03.js"],(function(e,a){"use strict";var o,l,t,d,s,i,n,r,c,p,u,f,m,g,y,v,h,b,w,x,I,M,T,k,j,D,A,V,_,B,S,C,U,N,z,E,L,F,O,q,R,J,P,$,H,W,Y,K,G,Q,X,Z=document.createElement("style");return Z.textContent='@charset "UTF-8";.flowManage-basics-info[data-v-b5f496d1]{margin:16px auto auto;width:calc(100vw - 160px);height:calc(100vh - 100px);min-height:500px;min-width:800px;background-color:var(--jy-color-fill--5)}.flowManage-basics-info .info-box[data-v-b5f496d1]{width:680px;margin:0% auto;text-align:center}.flowManage-basics-info .info-box .info-title[data-v-b5f496d1]{margin-top:3rem;font-size:var(--jy-font-size-title-2);color:var(--jy-color-text-1)}.flowManage-basics-info .info-box .info-from[data-v-b5f496d1]{margin-top:1.5rem}.flowManage-basics-info[data-v-b5f496d1] .el-form .el-form-item__label{margin-bottom:0%}.flowManage-basics-info[data-v-b5f496d1] .el-form .el-select{width:100%}.box-icon[data-v-b5f496d1]{position:absolute;right:.8rem;cursor:pointer;height:50%;display:flex;align-items:center}.box-icon .box-icon-img[data-v-b5f496d1]{height:100%}.el-form-item[data-v-b5f496d1]{margin-bottom:24px!important}.contbox{width:100%;position:relative;display:flex;align-items:center}.contbox .el-input__suffix{display:none}.flowManage-Association-form[data-v-7dc9f8f7]{margin:16px auto auto;width:calc(100vw - 160px);height:calc(100vh - 100px);min-height:500px;min-width:800px;background-color:var(--jy-color-fill--5);position:relative;color:var(--jy-color-text-1);padding-bottom:24px}.flowManage-Association-form .choice[data-v-7dc9f8f7],.flowManage-Association-form .exhibition[data-v-7dc9f8f7]{width:100%;height:100%}.flowManage-Association-form .exhibition .info-box[data-v-7dc9f8f7]{padding:20px;height:calc(100% - 20px)}.flowManage-Association-form .exhibition .info-box[data-v-7dc9f8f7] .el-scrollbar__view{width:calc(100% - 10px)}.flowManage-Association-form .info-box[data-v-7dc9f8f7]{margin:auto;text-align:center}.flowManage-Association-form .info-box .info-title[data-v-7dc9f8f7]{padding-top:3rem;font-size:var(--jy-font-size-title-2);color:var(--jy-color-text-1)}.flowManage-Association-form .info-box .info-from[data-v-7dc9f8f7]{margin-top:1.5rem}.flowManage-Association-form .info-footer[data-v-7dc9f8f7]{width:100%;position:absolute;bottom:0%;height:4rem;display:flex;align-items:center;justify-content:center;border-top:1px solid var(--jy-color-border-2)}.flowManage-Association-form .info-remind[data-v-7dc9f8f7]{width:654px;margin:auto;background:var(--jy-warning-1);border:1px solid var(--jy-warning-3);border-radius:var(--jy-border-radius-2);padding:1rem;margin-top:1rem;text-align:left}.flowManage-Association-form .info-remind .info-remind-title[data-v-7dc9f8f7]{display:flex;align-items:center;font-size:var(--jy-font-size-title-1)}.flowManage-Association-form .info-remind .info-remind-title .info-remind-title-icon[data-v-7dc9f8f7]{margin-right:.5rem;width:1.3rem;height:1.3rem}.flowManage-Association-form .info-remind .info-remind-title .info-remind-title-icon .icon[data-v-7dc9f8f7]{width:100%;height:100%}.flowManage-Association-form .info-remind .info-remind-p[data-v-7dc9f8f7]{padding:.2rem 1.8rem;box-sizing:border-box;color:var(--jy-color-text-3)}.flowManage-Association-form .info-form[data-v-7dc9f8f7]{margin-top:24px;box-sizing:border-box;display:flex;justify-content:center}.flowManage-Association-form .info-noContent[data-v-7dc9f8f7]{margin-top:1rem;display:flex;justify-content:center;flex-flow:wrap}.flowManage-Association-form .info-noContent-backcolor[data-v-7dc9f8f7]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:258px;height:110px;background:rgba(0,0,0,.02);border:1px solid rgba(0,0,0,.15);border-radius:4px;margin:15px 10px 0 0;cursor:pointer}.flowManage-Association-form .info-noContent-backcolor .text[data-v-7dc9f8f7]{margin-top:20px;color:rgba(0,0,0,.85);font-size:14px}.flowManage-Association-form .info-noContent-desc[data-v-7dc9f8f7]{width:100%;margin-top:16px}.flowManage-Association-form .info-noContent-desc img[data-v-7dc9f8f7]{width:16px}.flowManage-Association-form .info-list[data-v-7dc9f8f7]{margin-top:16px;height:calc(100vh - 600px);overflow:hidden}.flowManage-Association-form .info-list .container-list[data-v-7dc9f8f7]{display:flex;justify-content:space-between;flex-wrap:wrap}.flowManage-Association-form .info-list .list[data-v-7dc9f8f7]{display:flex;flex-direction:column;width:258px;height:110px;margin:15px 10px 0 0;padding:12px 24px;border:1px solid var(--jy-color-border-1);border-radius:var(--jy-border-radius-4);background-color:var(--jy-color-fill--1)}.flowManage-Association-form .info-list .list-desc[data-v-7dc9f8f7]{flex:1;font-size:14px;text-align:center;color:rgba(0,0,0,.85);width:218px;word-break:break-all;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.flowManage-Association-form .info-list .container-list>i[data-v-7dc9f8f7]{width:258px;margin:15px 10px 0 0}.flowManage-Association-form .info-list .btn[data-v-7dc9f8f7]{width:60px;height:32px;font-size:14px;margin:auto}.flowManage-Association-form .icon[data-v-7dc9f8f7]{width:1rem;height:1rem;display:flex;justify-content:center;align-items:center}.flowManage-Association-form .icon .iconpark-icon[data-v-7dc9f8f7]{width:100%;height:100%}.flowManage-Association-form .Have-been-enabled[data-v-7dc9f8f7]{background:var(--jy-success-1);border:1px solid var(--jy-success-6);border-radius:var(--jy-border-radius-2);font-size:var(--jy-font-size-caption);color:var(--jy-success-6);padding:.1rem .2rem;box-sizing:border-box}.flowManage-Association-form .disabled[data-v-7dc9f8f7]{background:var(--jy-color-fill--2);border:1px solid var(--jy-color-border-1);border-radius:var(--jy-border-radius-2);font-size:var(--jy-font-size-caption);color:var(--jy-color-text-2);padding:.1rem .2rem;box-sizing:border-box}.flowManage-Association-form[data-v-7dc9f8f7] .el-form .el-form-item__label{margin-bottom:0%}.flowManage-Association-form[data-v-7dc9f8f7] .el-form .el-select{width:100%}.el-form-item[data-v-7dc9f8f7]{margin-bottom:24px!important}.flowManage-advanced-setup[data-v-4d3f2f55]{margin:16px auto auto;width:calc(100vw - 160px);height:calc(100vh - 100px);min-height:500px;min-width:800px;background-color:var(--jy-color-fill--5);display:flex;justify-content:center;color:var(--jy-color-text-1)}.flowManage-advanced-setup .info-box[data-v-4d3f2f55]{width:auto;margin:0% auto;text-align:left;padding-top:3rem}.flowManage-advanced-setup .time[data-v-4d3f2f55]{display:flex;align-items:center}.flowManage-advanced-setup .time .time-eminder[data-v-4d3f2f55]{display:flex;align-items:center;margin-right:1rem}.flowManage-advanced-setup .time .time-eminder .time-eminder-label[data-v-4d3f2f55]{display:flex;align-items:center;margin-right:.5rem}.flowManage-advanced-setup .time .time-eminder .time-eminder-label .time-eminder-label-text[data-v-4d3f2f55]{margin-right:.2rem}.flowManage-advanced-setup .time .time-Number[data-v-4d3f2f55]{display:flex;align-items:center}.flowManage-advanced-setup .time .time-Number .time-Number-text[data-v-4d3f2f55],.flowManage-advanced-setup .time .time-Number .time-Number-input[data-v-4d3f2f55]{margin-right:.5rem}.flowManage-advanced-setup .deWeight[data-v-4d3f2f55]{margin-top:1rem;display:flex;align-items:center}.flowManage-advanced-setup .deWeight .deWeight-text[data-v-4d3f2f55]{margin-right:.5rem}.flowManage-advanced-setup .icon[data-v-4d3f2f55]{width:1rem;height:1rem;display:flex;justify-content:center;align-items:center}.flowManage-advanced-setup .icon .iconpark-icon[data-v-4d3f2f55]{width:100%;height:100%}.components-ElMessageBox .dialog[data-v-a7c7c40d]{display:flex;flex-direction:column}.components-ElMessageBox .dialog .dialog-header[data-v-a7c7c40d]{display:flex;position:relative;padding:1rem 2.5rem;box-sizing:border-box;align-items:center}.components-ElMessageBox .dialog .dialog-header .dialog-header-icon[data-v-a7c7c40d]{position:absolute;left:1rem;height:1.5rem;display:flex;align-items:center}.components-ElMessageBox .dialog .dialog-header .dialog-header-icon .iconpark-icon[data-v-a7c7c40d]{width:1.2rem;height:1.2rem}.components-ElMessageBox .dialog .dialog-header .dialog-header-cont[data-v-a7c7c40d]{color:var(--jy-color-text-1);font-size:var(--jy-font-size-title-1)}.components-ElMessageBox .dialog .dialog-header .dialog-header-remove[data-v-a7c7c40d]{position:absolute;right:1rem;cursor:pointer;height:1.5rem;display:flex;align-items:center}.components-ElMessageBox .dialog .dialog-header .dialog-header-remove .iconpark-icon[data-v-a7c7c40d]{width:1rem;height:1rem}.components-ElMessageBox .dialog .dialog-content[data-v-a7c7c40d]{padding:0rem 2.5rem;box-sizing:border-box;flex-grow:1;color:var(--jy-color-text-2)}.components-ElMessageBox .dialog .dialog-footer[data-v-a7c7c40d]{padding:1rem 2rem;box-sizing:border-box;display:flex;justify-content:flex-end}.components-ElMessageBox .dialog .cut-off-rule[data-v-a7c7c40d]{width:100%;border-bottom:1px solid var(--jy-color-border-2)}.components-ElMessageBox .dialog .center-content[data-v-a7c7c40d]{text-align:center}.components-ElMessageBox .dialog .center-footer[data-v-a7c7c40d]{justify-content:center}.components-ElMessageBox[data-v-a7c7c40d] .el-dialog .el-dialog__header{display:none}.components-ElMessageBox[data-v-a7c7c40d] .el-dialog .el-dialog__body{padding:0%;height:100%}.flowManage-layout[data-v-385067d7]{margin:0%;width:100%;height:100%}.flowManage-layout .process[data-v-385067d7]{width:100%;height:100%}.flowManage-layout .process .header[data-v-385067d7]{position:relative;z-index:1;display:flex;height:4rem;align-items:center;padding:0% 1rem;box-sizing:border-box;box-shadow:0 3px 6px -4px rgba(0,0,0,.12),0 6px 16px rgba(0,0,0,.08),0 9px 28px 8px rgba(0,0,0,.05);background-color:#fff;justify-content:space-between}.flowManage-layout .process .header .process-back[data-v-385067d7]{color:rgba(0,0,0,.85);display:flex;align-items:center;min-width:110px;font-size:22px}.flowManage-layout .process .header .process-back .iconpark[data-v-385067d7]{width:1.5rem;height:1.5rem;display:flex;align-items:center;margin-right:.5rem;cursor:pointer}.flowManage-layout .process .header .process-back .iconpark .iconpark-icon[data-v-385067d7]{width:1.2rem;height:1.2rem}.flowManage-layout .process .header .process-back .process-back-text[data-v-385067d7]{font-size:22px}.flowManage-layout .process .header .process-tabs[data-v-385067d7]{display:flex;height:100%;min-width:600px;flex:1;justify-content:center}.flowManage-layout .process .header .process-tabs .tabs[data-v-385067d7]{display:flex;align-items:center;color:rgba(0,0,0,.45);margin:0% 4%;box-sizing:border-box;height:100%;cursor:pointer;border-bottom:2px solid rgba(0,0,0,0)}.flowManage-layout .process .header .process-tabs .tabs .tabs-icon[data-v-385067d7]{width:1.2rem;height:1.2rem;border-radius:50%;border:1px solid rgba(0,0,0,.15);display:flex;align-items:center;justify-content:center;margin-right:.5rem}.flowManage-layout .process .header .process-tabs .tabs .tabs-text[data-v-385067d7]{font-size:16px}.flowManage-layout .process .header .process-tabs .checked-tabs[data-v-385067d7]{border-bottom:2px solid var(--jy-primary-6)}.flowManage-layout .process .header .process-tabs .checked-tabs .tabs-icon[data-v-385067d7]{background-color:var(--jy-primary-6);border:1px solid var(--jy-primary-6);color:#fff}.flowManage-layout .process .header .process-tabs .checked-tabs .tabs-text[data-v-385067d7]{color:var(--jy-primary-6)}.flowManage-layout .process .header .process-save[data-v-385067d7]{min-width:200px;display:flex;justify-content:flex-end;align-items:center}.flowManage-layout .process .header .process-save .process-save-down[data-v-385067d7]{margin-right:.5rem}.flowManage-layout .process .header .process-save .process-save-down .process-save-down-text[data-v-385067d7]{color:var(--jy-danger-6);cursor:pointer}.flowManage-layout .process .content[data-v-385067d7]{width:100%;height:calc(100vh - 56px);background-color:#f2f2f2;display:flex;align-items:flex-start;justify-content:center;position:relative;z-index:100}.popover-cont[data-v-385067d7]{padding:.5rem;color:var(--jy-color-text-1)}.popover-cont .popover-cont-title[data-v-385067d7]{font-size:var(--jy-font-size-title-1)}.popover-cont .popover-cont-subTitle[data-v-385067d7]{color:var(--jy-color-text-3);margin-top:.8rem}.popover-cont .popover-cont-list[data-v-385067d7]{margin-top:.2rem}.popover-cont .popover-cont-list .popover-cont-list-li[data-v-385067d7]{display:flex;align-items:center;background:rgba(0,0,0,.04);justify-content:space-between;padding:.8rem 1rem;margin:0rem 0rem .5rem}.popover-cont .popover-cont-list .popover-cont-list-li .popover-cont-list-li-name[data-v-385067d7]{width:4rem}.popover-cont .popover-cont-list .popover-cont-list-li .popover-cont-list-li-desc[data-v-385067d7]{color:var(--jy-color-text-3);width:calc(100% - 7rem);padding:0% .5rem}.popover-cont .popover-cont-list .popover-cont-list-li .popover-cont-list-li-but[data-v-385067d7]{color:var(--jy-info-6);width:3rem;cursor:pointer}.flowManage-index .title[data-v-38977b56]{display:flex;align-items:center;justify-content:space-between}.flowManage-index .title .title-more[data-v-38977b56],.flowManage-index .title .title-more .title-more-add[data-v-38977b56],.flowManage-index .title .title-more .title-more-down[data-v-38977b56]{height:100%;display:flex;align-items:center}\n',document.head.appendChild(Z),{setters:[e=>{o=e.c},e=>{l=e._,t=e.v,d=e.h,s=e.H,i=e.i,n=e.s,r=e.r,c=e.o,p=e.c,u=e.m,f=e.a,m=e.w,g=e.u,y=e.F,v=e.e,h=e.f,b=e.l,w=e.b3,x=e.g,I=e.cB,M=e.y,T=e.z,k=e.P,j=e.Q,D=e.t,A=e.a2,V=e.b4,_=e.j,B=e.k,S=e.n,C=e.b,U=e.p,N=e.q,z=e.cC,E=e.cD,L=e.ad,F=e.x,O=e.Y},e=>{q=e._},e=>{R=e.K},e=>{J=e.u,P=e.a,$=e.M},e=>{H=e.default},e=>{W=e.default},e=>{Y=e.default},e=>{K=e.M},e=>{G=e.a},e=>{Q=e.J},e=>{X=e._},null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const Z=e=>(M("data-v-b5f496d1"),e=e(),T(),e),ee={class:"flowManage-basics-info"},ae={class:"info-box"},oe=Z((()=>u("div",{class:"info-title"}," 请填写如下基础信息 ",-1))),le={class:"info-from"},te=x(" 物理用印 "),de=x(" 电子签章 "),se={class:"contbox"},ie=Z((()=>u("div",{class:"box-icon"},[u("img",{class:"box-icon-img",src:q,alt:""})],-1))),ne={class:"contbox"},re=Z((()=>u("div",{class:"box-icon"},[u("img",{class:"box-icon-img",src:q,alt:""})],-1))),ce=x(" 变更会清空已设计的流程，请问确定要继续吗？ "),pe=l({props:{businessList:{type:Array,default:()=>[]},modelValue:{type:String,default:""},sealId:{type:String,default:""},sealApplyInitId:{type:String,default:""},openType:{type:String,default:"add"},editBasicsForm:{type:Object,default:()=>({flowName:"",applyTypeId:"",sealUseTypeId:"1",fileTypeIds:[],fileTypeScope:[],showDataScope:[],dataScope:[],readme:""})},modelLinkId:{type:Object,deftault:()=>({})}},emits:"update:modelValue",setup(e,{expose:a,emit:o}){const l=e,x=J(),M=t(!1),T=t(!1),k=t([]),j=t(["user","organ"]),D=t("user"),A=t([]),V=t([]),_=t(null),B=t(!1),S=d({flowName:"",applyTypeId:"",sealUseTypeId:"1",fileTypeIds:[],fileTypeScope:[],showDataScope:[],dataScope:[],readme:""}),C=d({flowName:[{required:!0,message:"请填写流程名称",trigger:"change"}],applyTypeId:[{required:!0,message:"请选择业务类型",trigger:"change"}],sealUseTypeId:[{required:!0,message:"请选择用印类型",trigger:"change"}],fileTypeIds:[{required:!0,message:"请选择文件类型",trigger:["change","blur"]}],showDataScope:[{required:!0,message:"请选择流程适用范围",trigger:["change","blur"]}]}),U=s("accountInfo")&&s("accountInfo").userInfo?s("accountInfo").userInfo.userId:"",N=t({userId:U});i((()=>l.editBasicsForm),(e=>{if(e&&e.flowName&&"edit"===l.openType){S.flowName=e.flowName,S.applyTypeId=e.applyTypeId,S.sealUseTypeId=e.sealUseTypeId,S.readme=e.readme;const a=JSON.parse(JSON.stringify(e.fileTypeScope)),o=JSON.parse(JSON.stringify(e.dataScope));q(o),Z(a),k.value=o,Q.value=a}}));const z=t(null),E=()=>{z.value.blur(),T.value=!0},L=t(null),F=()=>{L.value.blur(),M.value=!0};S.sealUseTypeId=n({get:()=>l.sealId,set(e){o("update:sealId",e)}});const O=e=>{k.value=e,q(e)},q=e=>{const a=[];e&&e.length>0?(S.dataScope=[],V.value=e,e.forEach((e=>{a.push(e.id),S.dataScope.push({scopeId:e.id,scopeName:e.name,includeChild:e.includeChild,scopeType:"user"===e.type?1:2})})),S.showDataScope=a):(S.showDataScope=[],S.dataScope=[])},P=n({get:()=>l.modelLinkId,set(e){o("update:modelLinkId",e)}}),$=t("apply"),H=t(null),W=()=>{P.value.modelId&&(H.value.blur(),B.value=!0,$.value="apply")},Y=()=>{B.value=!1,"apply"===$.value?H.value.toggleMenu():S.sealUseTypeId="1"===S.sealUseTypeId?"2":"1",x.setModelId("",""),P.value={modleId:"",definitionId:""}},K=()=>{B.value=!1,"apply"===$.value&&H.value.blur()},G=e=>{P.value.modelId&&(S.sealUseTypeId=e,B.value=!0,$.value="sealType")};i((()=>S.applyTypeId),(e=>{o("update:modelValue",e)})),i((()=>l.modelValue),(e=>{S.applyTypeId=e}),{deep:!0,immediate:!0});const Q=t([]),X=e=>{Q.value=e,Z(e)},Z=e=>{const a=[],o=[],l=[];e.forEach((e=>{a.push({fileTypeId:e.id,fileTypeName:e.name,includeChild:e.includeChild?"1":"0",type:"fileType"}),o.push({id:e.id,name:e.name}),l.push(e.id)})),A.value=o,S.fileTypeIds=l,S.fileTypeScope=a},pe=e=>{Q.value=fe(Q.value,e)},ue=e=>{k.value=fe(k.value,e)},fe=(e,a)=>Array.isArray(e)&&0!==e.length?e.filter((e=>e.id!==a)):e;return a({getBasicsFormValue:async()=>{const e=await _.value.validate().catch((e=>e));return"boolean"==typeof e&&e?S:[e]},form:S}),(e,a)=>{const o=r("el-input"),t=r("el-form-item"),d=r("el-option"),s=r("el-option-group"),i=r("el-select"),n=r("el-radio"),x=r("el-radio-group"),U=r("el-form"),q=I;return c(),p("div",ee,[u("div",ae,[oe,u("div",le,[f(U,{model:g(S),"label-width":"120px",rules:g(C),ref_key:"ruleFormRef",ref:_},{default:m((()=>[f(t,{label:"流程名称",prop:"flowName"},{default:m((()=>[f(o,{modelValue:g(S).flowName,"onUpdate:modelValue":a[0]||(a[0]=e=>g(S).flowName=e),placeholder:"请输入",clearable:"",maxlength:"45"},null,8,["modelValue"])])),_:1}),f(t,{label:"业务类型",prop:"applyTypeId"},{default:m((()=>[f(i,{modelValue:g(S).applyTypeId,"onUpdate:modelValue":a[1]||(a[1]=e=>g(S).applyTypeId=e),ref_key:"selectApplyRef",ref:H,onClick:W},{default:m((()=>[(c(!0),p(y,null,v(l.businessList,(e=>(c(),h(s,{key:e.applyTypeName,label:e.applyTypeName},{default:m((()=>[(c(!0),p(y,null,v(e.children,(e=>(c(),h(d,{key:e.applyTypeId,label:e.applyTypeName,value:e.applyTypeId},null,8,["label","value"])))),128))])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),g(S).applyTypeId===l.sealApplyInitId?(c(),h(t,{key:0,label:"用印类型",prop:"sealUseTypeId"},{default:m((()=>[f(x,{modelValue:g(S).sealUseTypeId,"onUpdate:modelValue":a[4]||(a[4]=e=>g(S).sealUseTypeId=e)},{default:m((()=>[f(n,{label:"1",size:"large",onChange:a[2]||(a[2]=e=>G("2"))},{default:m((()=>[te])),_:1}),f(n,{label:"2",size:"large",onChange:a[3]||(a[3]=e=>G("1"))},{default:m((()=>[de])),_:1})])),_:1},8,["modelValue"])])),_:1})):b("",!0),g(S).applyTypeId===l.sealApplyInitId?(c(),h(t,{key:1,label:"文件类型",prop:"fileTypeIds"},{default:m((()=>[u("div",se,[f(i,{modelValue:g(S).fileTypeIds,"onUpdate:modelValue":a[5]||(a[5]=e=>g(S).fileTypeIds=e),ref_key:"selectRef",ref:z,placeholder:"请选择",multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":4,onClick:E,onRemoveTag:pe},{default:m((()=>[(c(!0),p(y,null,v(A.value,(e=>(c(),h(d,{label:e.name,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),ie])])),_:1})):b("",!0),f(t,{label:"流程适用范围",prop:"showDataScope"},{default:m((()=>[u("div",ne,[f(i,{modelValue:g(S).showDataScope,"onUpdate:modelValue":a[6]||(a[6]=e=>g(S).showDataScope=e),ref_key:"selectFileRef",ref:L,placeholder:"请选择",multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":4,onClick:F,onRemoveTag:ue},{default:m((()=>[(c(!0),p(y,null,v(V.value,(e=>(c(),h(d,{label:e.name,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),re])])),_:1}),f(t,{label:"流程说明"},{default:m((()=>[f(o,{modelValue:g(S).readme,"onUpdate:modelValue":a[7]||(a[7]=e=>g(S).readme=e),type:"textarea",maxlength:"100","show-word-limit":"",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])]),M.value?(c(),h(g(w),{key:0,show:M.value,"onUpdate:show":a[8]||(a[8]=e=>M.value=e),searchSelected:k.value,"onUpdate:searchSelected":O,tabsShow:j.value,activeTab:D.value},null,8,["show","searchSelected","tabsShow","activeTab"])):b("",!0),T.value?(c(),h(g(R),{key:1,show:T.value,"onUpdate:show":a[9]||(a[9]=e=>T.value=e),searchSelected:Q.value,"onUpdate:searchSelected":X,queryParams:N.value},null,8,["show","searchSelected","queryParams"])):b("",!0),f(q,{modelValue:B.value,"onUpdate:modelValue":a[10]||(a[10]=e=>B.value=e),mode:1,onOnConfirm:Y,onOnCancel:K},{default:m((()=>[ce])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-b5f496d1"]]),ue="/zgj-web/assets/vector-0f9d5285.svg",fe=e=>(M("data-v-7dc9f8f7"),e=e(),T(),e),me={class:"flowManage-Association-form"},ge={class:"choice"},ye={class:"info-box"},ve=A('<div class="info-title" data-v-7dc9f8f7> 选择表单进行关联 </div><div class="info-remind" data-v-7dc9f8f7><div class="info-remind-title" data-v-7dc9f8f7><div class="info-remind-title-icon" data-v-7dc9f8f7><i class="icon" data-v-7dc9f8f7><svg class="iconpark-icon" data-v-7dc9f8f7><use href="#Check-Circle" data-v-7dc9f8f7></use></svg></i></div><div class="info-remind-title-text" data-v-7dc9f8f7> 提示 </div></div><div class="info-remind-p" data-v-7dc9f8f7> 1: 如果关联表单，则该流程仅用于当前表单； </div><div class="info-remind-p" data-v-7dc9f8f7> 2: 若当前业务类型/文件类型换绑新的表单，则新表单无法使用当前流程； </div><div class="info-remind-p" data-v-7dc9f8f7> 3: 如果不关联表单，无论当前业务类型/文件类型绑定的表单怎么变更，该流程都可使用。 </div></div>',2),he={class:"info-form"},be=x(" 物理用印 "),we=x(" 电子签章 "),xe={key:0,class:"info-noContent"},Ie=[fe((()=>u("img",{src:ue},null,-1))),fe((()=>u("div",{class:"text"},"去创建",-1)))],Me=fe((()=>u("div",{class:"info-noContent-desc"},[u("img",{src:"/zgj-web/assets/info-6c401016.svg"}),x(" 暂无可关联的表单 ")],-1))),Te={key:1,class:"info-list"},ke={class:"container-list"},je={class:"list-desc"},De={style:{"margin-top":"4px"}},Ae=x(" 选择 "),Ve=[fe((()=>u("img",{src:ue},null,-1))),fe((()=>u("div",{class:"text"},"去创建",-1)))],_e=fe((()=>u("i",null,null,-1))),Be=fe((()=>u("i",null,null,-1))),Se=fe((()=>u("i",null,null,-1))),Ce=fe((()=>u("i",null,null,-1))),Ue=fe((()=>u("i",null,null,-1))),Ne=fe((()=>u("i",null,null,-1))),ze={key:0,class:"exhibition"},Ee={class:"info-footer"},Le=x("编辑"),Fe=x("重新选择"),Oe=x(" 变更会清空已设计的流程，请问确定要继续吗？ "),qe={props:{businessList:{type:Array,default:()=>[]},modelValue:{type:String,default:""},sealId:{type:String,default:"1"},sealApplyInitId:{type:String,default:""},openType:{type:String,default:"add"},formMessageId:{type:String,default:""},modelLinkId:{type:Object,deftault:()=>({})}},emits:"update:modelValue",setup(e,{expose:a,emit:o}){const l=e,s=J(),w=t(null),x=t(""),M=t(null),T=t(!0),A=t(!1),_=t(!1),B=d({currentState:"1",list:{radio:"",data:[]},JyElMessageBox:{show:!1,header:{data:""},content:{data:""}},SealformData:{},SealoptionData:{},showRelatedfFlow:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量删除"}],butDatas:[{name:"知道了",type:"",clickName:function(){}}]}}),S=d({ProcessName:"",ProcessType:!1,sealUseTypeId:"1",applyTypeId:"",formMessageId:"",formDefinitionId:""}),C=n({get:()=>l.modelLinkId,set(e){o("update:modelLinkId",e)}}),U=t("apply"),N=t(null),z=()=>{C.value.modelId&&(N.value.blur(),_.value=!0,U.value="apply")},E=()=>{_.value=!1,"apply"===U.value?N.value.toggleMenu():S.sealUseTypeId="1"===S.sealUseTypeId?"2":"1",s.setModelId("",""),C.value={modleId:"",definitionId:""}},L=()=>{_.value=!1,"apply"===U.value&&N.value.blur()},F=e=>{C.value.modelId&&(S.sealUseTypeId=e,_.value=!0,U.value="sealType")},O=t(""),q=e=>{O.value=e.formMessageId,T.value=!1,P.getFormJsonById({formMessageId:e.formMessageId}).then((a=>{S.formMessageId=a.data.formMessageId,S.formDefinitionId=a.data.formDefinitionId,B.currentState="2",x.value=a.success&&JSON.parse(a.data.formInfo)||"",M.value=e,T.value=!0}))};i((()=>l.formMessageId),(e=>{e&&q({formMessageId:e})}));const R=()=>{B.currentState="1"},$=()=>{!async function(e){if(!e)return M.value={formMessageId:null},void(B.JyElMessageBox.show=!0);const a=await V.flowList({formMessageId:e});a.data&&0!==a.data.length?(B.showRelatedfFlow.show=!0,G.value={header:"提示",content:"当前表单被已启用的以下流程所使用，仅当以下流程停用才允许编辑",selectionData:a.data}):(M.value={formMessageId:null},B.JyElMessageBox.show=!0)}(O.value)},G=t(null),Q=async()=>{try{const e={applyTypeId:S.applyTypeId,sealUseTypeId:S.sealUseTypeId},a=await P.flowSettingForm(e);B.list.data=a.data||[],A.value=!0}catch(e){}};return i((()=>S.applyTypeId),(e=>{if(!e)return A.value=!1;B.list.data=[],Q(),o("update:modelValue",e)}),{deep:!0,immediate:!0}),i((()=>l.modelValue),(e=>{S.applyTypeId=e}),{deep:!0,immediate:!0}),S.sealUseTypeId=n({get:()=>l.sealId,set(e){o("update:sealId",e)}}),i((()=>S.sealUseTypeId),(e=>{e&&!C.value.modelId&&Q()}),{deep:!0,immediate:!0}),a({getAssociationValue:()=>S.formDefinitionId?S:[{formDefinitionId:[{message:"请选择关联表单",fieldValue:"",field:"formDefinitionId"}]}],saveAddModel:e=>new Promise(((a,o)=>{if(!S.formDefinitionId)return void o("请选择表单");const l=Math.random();K.add({modelKey:l,formIdList:[S.formDefinitionId],modelName:e}).then((()=>{K.getModelKey({modelKey:l}).then((e=>{a({modelId:e.modelId,definitionId:e.definitionId})}))}))}))}),(e,a)=>{const o=r("el-option"),t=r("el-option-group"),d=r("el-select"),s=r("el-form-item"),i=r("el-radio"),n=r("el-radio-group"),V=r("el-form"),C=r("el-button"),U=r("el-scrollbar"),O=W,J=r("JyElMessageBox"),P=H,K=I;return c(),p("div",me,[k(u("div",ge,[u("div",ye,[ve,u("div",he,[f(V,{model:g(S),"label-width":"80px","status-icon":"",style:{width:"500px"}},{default:m((()=>[f(s,{label:"业务类型",prop:"applyTypeId",required:""},{default:m((()=>[f(d,{modelValue:g(S).applyTypeId,"onUpdate:modelValue":a[0]||(a[0]=e=>g(S).applyTypeId=e),ref_key:"selectApplyRef",ref:N,onClick:z},{default:m((()=>[(c(!0),p(y,null,v(l.businessList,(e=>(c(),h(t,{key:e.applyTypeName,label:e.applyTypeName},{default:m((()=>[(c(!0),p(y,null,v(e.children,(e=>(c(),h(o,{key:e.applyTypeId,label:e.applyTypeName,value:e.applyTypeId},null,8,["label","value"])))),128))])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),g(S).applyTypeId===l.sealApplyInitId?(c(),h(s,{key:0,label:"用印类型",prop:"sealUseTypeId"},{default:m((()=>[f(n,{modelValue:g(S).sealUseTypeId,"onUpdate:modelValue":a[3]||(a[3]=e=>g(S).sealUseTypeId=e)},{default:m((()=>[f(i,{label:"1",size:"large",onChange:a[1]||(a[1]=e=>F("2"))},{default:m((()=>[be])),_:1}),f(i,{label:"2",size:"large",onChange:a[2]||(a[2]=e=>F("1"))},{default:m((()=>[we])),_:1})])),_:1},8,["modelValue"])])),_:1})):b("",!0)])),_:1},8,["model"])]),0===g(B).list.data.length&&A.value?(c(),p("div",xe,[u("div",{class:"info-noContent-backcolor",onClick:$},Ie),Me])):b("",!0),g(S).applyTypeId&&0!==g(B).list.data.length?(c(),p("div",Te,[f(U,{style:{height:"100%"},"view-style":"padding: 0 54px"},{default:m((()=>[u("div",ke,[(c(!0),p(y,null,v(g(B).list.data,((e,a)=>(c(),p("div",{class:"list",key:a},[u("div",je,D(e.formName),1),u("div",De,[f(C,{type:"primary",class:"btn",onClick:a=>q(e)},{default:m((()=>[Ae])),_:2},1032,["onClick"])])])))),128)),u("div",{class:"info-noContent-backcolor",onClick:$},Ve),_e,Be,Se,Ce,Ue,Ne])])),_:1})])):b("",!0)])],512),[[j,"1"===g(B).currentState]]),"2"===g(B).currentState?(c(),p("div",ze,[f(U,{class:"info-box",always:""},{default:m((()=>[T.value?(c(),h(O,{key:0,mode:"render",formJson:x.value,formData:g(B).SealformData,optionData:g(B).SealoptionData,ref_key:"refFillFormInformation",ref:w,onOnLoaded:a[4]||(a[4]=e=>w.value.disableForm())},null,8,["formJson","formData","optionData"])):b("",!0)])),_:1}),u("div",Ee,[f(C,{type:"primary",onClick:$},{default:m((()=>[Le])),_:1}),f(C,{onClick:R},{default:m((()=>[Fe])),_:1})])])):b("",!0),u("div",null,[f(J,{modelValue:g(B).JyElMessageBox.show,"onUpdate:modelValue":a[7]||(a[7]=e=>g(B).JyElMessageBox.show=e),"custom-content":!0,defaultAttribute:{fullscreen:!0,height:"100%"}},{default:m((()=>[g(B).JyElMessageBox.show?(c(),h(Y,{key:0,modelValue:g(B).JyElMessageBox.show,"onUpdate:modelValue":a[5]||(a[5]=e=>g(B).JyElMessageBox.show=e),addTitle:"编辑",columnData:M.value,onClose:a[6]||(a[6]=e=>g(B).JyElMessageBox.show=!1),sealUseTypeId:g(S).sealUseTypeId,applyTypeId:g(S).applyTypeId,optionData:l.businessList,onReloadData:q},null,8,["modelValue","columnData","sealUseTypeId","applyTypeId","optionData"])):b("",!0)])),_:1},8,["modelValue"])]),f(P,{"onUpdate:modelValue":a[8]||(a[8]=e=>g(B).showRelatedfFlow.show=!1),show:g(B).showRelatedfFlow.show,selectionData:g(B).componentsBatch.selectionData,showToastDialogContent:G.value,label:"flowName"},null,8,["show","selectionData","showToastDialogContent"]),f(K,{modelValue:_.value,"onUpdate:modelValue":a[9]||(a[9]=e=>_.value=e),mode:1,onOnConfirm:E,onOnCancel:L},{default:m((()=>[Oe])),_:1},8,["modelValue"])])}}},Re=l(qe,[["__scopeId","data-v-7dc9f8f7"]]),Je=e=>(M("data-v-4d3f2f55"),e=e(),T(),e),Pe={class:"flowManage-advanced-setup"},$e={class:"info-box"},He={class:"time"},We={class:"time-eminder"},Ye=A('<div class="time-eminder-label" data-v-4d3f2f55><span class="time-eminder-label-text" data-v-4d3f2f55> 超时提醒 </span><i class="icon" data-v-4d3f2f55><svg class="iconpark-icon" data-v-4d3f2f55><use href="#Vector1" data-v-4d3f2f55></use></svg></i></div>',1),Ke={class:"time-eminder-switch"},Ge={class:"time-Number"},Qe=Je((()=>u("span",{class:"time-Number-text"},"超时",-1))),Xe={class:"time-Number-input"},Ze=Je((()=>u("span",{class:"time-Number-text"},"小时",-1))),ea={class:"deWeight"},aa=Je((()=>u("span",{class:"deWeight-text"},"审批人自动去重",-1))),oa={class:"deWeight-radio"},la=x("不去重"),ta=x("出现多次时，仅保留第一次"),da=x("在连续出现时，仅保留第一次"),sa=l({setup(e){const a=d({isTimeoutRemind:1,remindDuration:24,autoDistinct:0});return(e,o)=>{const l=r("el-switch"),t=r("el-input-number"),d=r("el-radio"),s=r("el-radio-group");return c(),p("div",Pe,[u("div",$e,[u("div",He,[u("div",We,[Ye,u("div",Ke,[f(l,{modelValue:g(a).isTimeoutRemind,"onUpdate:modelValue":o[0]||(o[0]=e=>g(a).isTimeoutRemind=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])]),u("div",Ge,[Qe,u("div",Xe,[f(t,{modelValue:g(a).remindDuration,"onUpdate:modelValue":o[1]||(o[1]=e=>g(a).remindDuration=e),min:0},null,8,["modelValue"])]),Ze])]),u("div",ea,[aa,u("div",oa,[f(s,{modelValue:g(a).autoDistinct,"onUpdate:modelValue":o[2]||(o[2]=e=>g(a).autoDistinct=e)},{default:m((()=>[f(d,{label:0},{default:m((()=>[la])),_:1}),f(d,{label:1},{default:m((()=>[ta])),_:1}),f(d,{label:2},{default:m((()=>[da])),_:1})])),_:1},8,["modelValue"])])])])])}}},[["__scopeId","data-v-4d3f2f55"]]),ia=e=>(M("data-v-a7c7c40d"),e=e(),T(),e),na={class:"components-ElMessageBox"},ra={key:0,class:"dialog-header"},ca={key:0,class:"dialog-header-icon"},pa=[ia((()=>u("svg",{class:"iconpark-icon"},[u("use",{href:"#icon4"})],-1)))],ua={key:1,class:"dialog-header-cont"},fa=[ia((()=>u("svg",{class:"iconpark-icon"},[u("use",{href:"#Vector"})],-1)))],ma={key:1,class:"cut-off-rule"},ga={key:2,class:"cut-off-rule"},ya=x("确定"),va=x("取消"),ha={props:{type:{type:String,default:"0"},modelValue:{type:Boolean,default:!0},"show-cut-off-rule":{type:Boolean,default:!1},"show-close":{type:Boolean,default:!0},"show-icon":{type:Boolean,default:!1},"show-title":{type:Boolean,default:!0},"show-footer":{type:Boolean,default:!0},"show-header":{type:Boolean,default:!0},"custom-content":{type:Boolean,default:!1},defaultAttribute:{type:Object,default:()=>({})}},emits:["close","update:modelValue"],setup(e,{emit:a}){const o=e,l=d({props:{defaultAttribute:{"align-center":!0,"show-close":!1,width:"500px",center:!1}}});function t(){const e=l.props;for(const a in o)Object.hasOwnProperty.call(e,a)?"defaultAttribute"!==a&&(e[a]=o[a]):e[a]=o[a];for(const a in o.defaultAttribute)Object.hasOwnProperty.call(o.defaultAttribute,a)&&(e.defaultAttribute[a]=o.defaultAttribute[a])}function s(){l.props.modelValue=!1}function n(){l.props.modelValue=!1,a("update:modelValue",l.props.modelValue)}return i(o,((e,a)=>{t()})),_((()=>{t()})),B((()=>{})),(e,a)=>{const o=r("el-button"),t=$;return c(),p("div",na,[f(t,N({visible:g(l).props.modelValue,"onUpdate:visible":a[0]||(a[0]=e=>g(l).props.modelValue=e)},g(l).props.defaultAttribute,{footer:null,keyboard:!1,width:"100%","wrap-class-name":"full-modal",getContainer:!1,closable:!1,zIndex:1003,onOnCancel:n,onOnOk:n}),{default:m((()=>[g(l).props.customContent?(c(),p("div",{key:0,class:"dialog",style:S({height:g(l).props.defaultAttribute.height})},[C(e.$slots,"default",{},void 0,!0)],4)):(c(),p("div",{key:1,class:"dialog",style:S({height:g(l).props.defaultAttribute.height})},[g(l).props.showHeader&&(g(l).props.showIcon||g(l).props.showTitle||g(l).props.showCutOffRule)?(c(),p("div",ra,[g(l).props.showIcon?(c(),p("div",ca,pa)):b("",!0),g(l).props.showTitle?(c(),p("div",ua,[C(e.$slots,"header",{},void 0,!0)])):b("",!0),g(l).props.showClose?(c(),p("div",{key:2,class:"dialog-header-remove",onClick:s},fa)):b("",!0)])):b("",!0),g(l).props.showCutOffRule?(c(),p("div",ma)):b("",!0),u("div",{class:U(["dialog-content",{"center-content":!!g(l).props.defaultAttribute.center}])},[C(e.$slots,"content",{},void 0,!0)],2),g(l).props.showCutOffRule?(c(),p("div",ga)):b("",!0),g(l).props.showFooter?(c(),p("div",{key:3,class:U(["dialog-footer",{"center-footer":!!g(l).props.defaultAttribute.center}])},[C(e.$slots,"footer",{},(()=>[f(o,{type:"primary"},{default:m((()=>[ya])),_:1}),f(o,{onClick:s},{default:m((()=>[va])),_:1})]),!0)],2)):b("",!0)],4))])),_:3},16,["visible"])])}}},ba=l(ha,[["__scopeId","data-v-a7c7c40d"]]),wa=e=>(M("data-v-385067d7"),e=e(),T(),e),xa={class:"add-flow-modal"},Ia={class:"flowManage-layout"},Ma={class:"process"},Ta={class:"header"},ka={class:"process-back"},ja=[wa((()=>u("svg",{class:"iconpark-icon"},[u("use",{href:"#Vector8Stroke"})],-1)))],Da={class:"process-back-text"},Aa={class:"process-tabs"},Va=["onClick"],_a={class:"tabs-icon"},Ba={class:"tabs-text"},Sa={class:"process-save"},Ca={class:"process-save-down"},Ua={class:"process-save-down-text"},Na={class:"popover-cont"},za=wa((()=>u("div",{class:"popover-cont-title"}," 内容不完善，当前无法发布 ",-1))),Ea=wa((()=>u("div",{class:"popover-cont-subTitle"}," 以下内容不完善，请修改后发布 ",-1))),La={key:0,class:"popover-cont-list"},Fa={class:"popover-cont-list-li-name"},Oa={class:"popover-cont-list-li-desc"},qa=wa((()=>u("div",{class:"popover-cont-list-li-but"},"去修改 ",-1))),Ra={class:"content"},Ja=x(" 确定 "),Pa={props:{modelValue:{type:Boolean,default:!1},businessList:{type:Array,default:()=>[]},openType:{type:String,default:"add"},treeSelectedId:{type:String,default:""},sealApplyInitId:{type:String,default:""},editModleIds:{type:Object,default:()=>({definitionId:"",modelId:"",flowMessageId:""})}},emits:"update:modelValue",setup(e,{emit:o}){const l=e,s=J(),w=t("1"),I=z({loader:()=>E((()=>a.import("./index-legacy-17b5c625.js")),void 0)}),M=d({checkedIndex:"1",tabsData:[{index:"1",label:"基础信息",checked:!0},{index:"2",label:"关联表单"},{index:"3",label:"流程设计"},{index:"4",label:"高级设置"}],jyBoxHeader:"",jyBoxCont:"",jyBoxShow:!1}),T=n({get:()=>l.modelValue,set(e){o("update:modelValue",e)}}),A=n({get:()=>l.treeSelectedId,set(e){o("update:treeSelectedId",e)}}),_=()=>{T.value=!1,o("reloadData")},B=t(null),S=t(null),C=t(null),N=t(null),q=t([]),R=t({modelId:"",definitionId:""}),$=t(!0),H=t(!1),W=t({applyTypeId:"",fileTypeScope:[],dataScope:[],flowName:"",readme:"",sealUseTypeId:""}),Y=t("");"edit"===l.openType&&(R.value.definitionId=l.editModleIds.definitionId,R.value.modelId=l.editModleIds.modelId,s.setModelId(R.value.modelId,R.value.definitionId),P.flowDetail({flowMessageId:l.editModleIds.flowMessageId}).then((e=>{const a=e.data.organScope?e.data.organScope:[],o=e.data.organUserScope?e.data.organUserScope:[];W.value={applyTypeId:e.data.applyTypeId,fileTypeScope:e.data.fileTypeScope,dataScope:a.concat(o),flowName:e.data.flowName,readme:e.data.readme,sealUseTypeId:e.data.sealUseTypeId},Y.value=e.data.formMessageId})));const G=e=>{M.tabsData.forEach((a=>{a.checked=!1,a.index===e.index&&(a.checked=!0,M.checkedIndex=a.index)}))},Q=async()=>{q.value=[];const e=await C.value.getBasicsFormValue();if(Array.isArray(e))for(const o in e[0])q.value.push({type:"基础信息",message:e[0][o][0].message});const a=S.value.getAssociationValue();if(Array.isArray(a))for(const o in a[0])q.value.push({type:"关联表单",message:a[0][o][0].message});let t=[];if(B.value){if(t=await B.value.designSave("add"===l.openType?"designModel":"updateModel"),Array.isArray(t))for(const o in t[0])q.value.push({type:"流程设计",message:t[0][o][0].message})}else q.value.push({type:"流程设计",message:"请设计流程"});if(q.value.length>0)return;const d={...e,...a,...t};"add"===l.openType?P.add(d).then((()=>{_(),o("reloadData")})):"edit"===l.openType&&K.detail({modelId:l.editModleIds.modelId}).then((e=>{P.flowEdit({...d,flowMessageId:l.editModleIds.flowMessageId,modelId:l.editModleIds.modelId,definitionId:e.definitionId}).then((()=>{_(),o("reloadData")}))}))};return i((()=>R.value),(e=>{if(e){if(!e||!e.modelId)return;s.setModelId(e.modelId,e.definitionId)}})),(a,o)=>{const t=r("el-popover"),d=r("el-button"),s=r("JyElMessageBox"),i=L("loading");return c(),p("div",xa,[f(ba,{modelValue:g(T),"onUpdate:modelValue":o[6]||(o[6]=e=>F(T)?T.value=e:null),"custom-content":!0,defaultAttribute:{fullscreen:!0,height:"100%"}},{default:m((()=>[u("div",Ia,[u("div",Ma,[u("div",Ta,[u("div",ka,[u("i",{class:"iconpark",onClick:_},ja),u("span",Da,[k(u("span",null,D(a.$t("t-zgj-sync.add")),513),[[j,"add"===l.openType]]),k(u("span",null,D(a.$t("t-editors")),513),[[j,"edit"===l.openType]])])]),u("div",Aa,[(c(!0),p(y,null,v(g(M).tabsData,((e,a)=>(c(),p("div",{class:U(["tabs",{"checked-tabs":!!e.checked}]),key:a,onClick:a=>(async e=>{if("3"===e.index){if("edit"===l.openType&&R.value.modelId)return H.value=!0,G(e),$.value?void V.flowDetail({...l.editModleIds,edit:!0}).then((e=>{H.value=!1,$.value=!1,B.value.handleSetData(e.data.data)})):void(H.value=!1);q.value=[];const a=await C.value.getBasicsFormValue();if(Array.isArray(a)){for(const e in a[0])q.value.push({type:"基础信息",message:a[0][e][0].message});O.warning("请填写基础信息")}const o=S.value.getAssociationValue();if(Array.isArray(o)){for(const e in o[0])q.value.push({type:"关联表单",message:o[0][e][0].message});O.warning("请选择关联表单")}if(q.value.length>0)return;R.value=await S.value.saveAddModel(C.value.form.flowName).catch((e=>{M.jyBoxHeader="提示？",M.jyBoxCont=e,M.jyBoxShow=!0})),R.value||(M.jyBoxHeader="提示？",M.jyBoxCont="请填写完整信息",M.jyBoxShow=!0)}G(e)})(e)},[u("div",_a,D(e.index),1),u("div",Ba,D(e.label),1)],10,Va)))),128))]),u("div",Sa,[u("div",Ca,[f(t,{placement:"bottom",width:400,trigger:"click"},{reference:m((()=>[u("div",Ua,[k(u("span",null,D(q.value.length)+"项不完善 ",513),[[j,0!==q.value.length]])])])),default:m((()=>[u("div",Na,[za,Ea,q.value?(c(),p("div",La,[(c(!0),p(y,null,v(q.value,((e,a)=>(c(),p("div",{class:"popover-cont-list-li",key:a},[u("div",Fa,D(e.type),1),u("div",Oa,D(e.message),1),qa])))),128))])):b("",!0)])])),_:1})]),f(d,{class:"process-save-but",type:"primary",onClick:Q},{default:m((()=>[x(D(a.$t("t-zgj-Save")),1)])),_:1})])]),u("div",Ra,[k(f(pe,{ref_key:"refBasicsInfo",ref:C,modelValue:g(A),"onUpdate:modelValue":o[0]||(o[0]=e=>F(A)?A.value=e:null),sealId:w.value,"onUpdate:sealId":o[1]||(o[1]=e=>w.value=e),modelLinkId:R.value,"onUpdate:modelLinkId":o[2]||(o[2]=e=>R.value=e),businessList:l.businessList,sealApplyInitId:l.sealApplyInitId,openType:e.openType,editBasicsForm:W.value},null,8,["modelValue","sealId","modelLinkId","businessList","sealApplyInitId","openType","editBasicsForm"]),[[j,"1"==g(M).checkedIndex]]),k(f(Re,{ref_key:"refAssociationForm",ref:S,modelValue:g(A),"onUpdate:modelValue":o[3]||(o[3]=e=>F(A)?A.value=e:null),sealId:w.value,"onUpdate:sealId":o[4]||(o[4]=e=>w.value=e),modelLinkId:R.value,"onUpdate:modelLinkId":o[5]||(o[5]=e=>R.value=e),businessList:l.businessList,sealApplyInitId:l.sealApplyInitId,openType:e.openType,formMessageId:Y.value},null,8,["modelValue","sealId","modelLinkId","businessList","sealApplyInitId","openType","formMessageId"]),[[j,"2"==g(M).checkedIndex]]),R.value.modelId?k((c(),h(g(I),{key:0,ref_key:"refVFlowDesign",ref:B,initObj:R.value,openType:e.openType,style:{height:"calc(100vh - 100px)"}},null,8,["initObj","openType"])),[[j,"3"==g(M).checkedIndex],[i,H.value]]):b("",!0),k(f(sa,{ref_key:"refAdvancedSetup",ref:N},null,512),[[j,"4"==g(M).checkedIndex]])])])])])),_:1},8,["modelValue"]),f(s,{modelValue:g(M).jyBoxShow,"onUpdate:modelValue":o[8]||(o[8]=e=>g(M).jyBoxShow=e),show:g(M).jyBoxShow,defaultAttribute:{},onOnCancel:o[9]||(o[9]=e=>g(M).jyBoxShow=!1)},{header:m((()=>[x(D(g(M).jyBoxHeader),1)])),content:m((()=>[x(D(g(M).jyBoxCont),1)])),footer:m((()=>[f(d,{type:"primary",onClick:o[7]||(o[7]=e=>g(M).jyBoxShow=!1)},{default:m((()=>[Ja])),_:1})])),_:1},8,["modelValue","show"])])}}},$a=l(Pa,[["__scopeId","data-v-385067d7"]]),Ha=[{prop:"flowName",label:"流程名称",fixed:"left",sortable:!0,flex:!0,"min-width":150,show:!0},{prop:"applyTypeName",label:"业务类型",sortable:!0,"min-width":150,show:!0},{prop:"fileTypeName",label:"文件类型",sortable:!0,"min-width":150,show:!0},{prop:"flag",label:"状态",sortable:!0,"min-width":120,show:!0},{prop:"createUserName",label:"创建人",sortable:!0,"min-width":120,show:!0},{prop:"modifyDatetime",label:"更新时间",sortable:!0,"min-width":180,show:!0},{prop:"caozuo",label:"操作",fixed:"right","min-width":280,align:"center",show:!0,rankDisplayData:[{name:"t-zgj-Edit"},{name:"t-zgj-Delete"},{name:"status"},{name:"t-zgj-qyWechat.Copy"}]}],Wa=[{prop:"flowName",label:"流程名称",sortable:!0,flex:!0,"min-width":150,show:!0},{prop:"applyTypeName",label:"业务类型",sortable:!0,"min-width":150,show:!0},{prop:"flag",label:"状态",sortable:!0,"min-width":120,show:!0},{prop:"createUserName",label:"创建人",sortable:!0,"min-width":120,show:!0},{prop:"modifyDatetime",label:"更新时间",sortable:!0,"min-width":180,show:!0},{prop:"caozuo",label:"操作",fixed:"right","min-width":260,show:!0,align:"center",rankDisplayData:[{name:"t-zgj-Edit"},{name:"t-zgj-Delete"},{name:"status"},{name:"t-zgj-qyWechat.Copy"}]}],Ya={class:"flowManage-index"},Ka={class:"title"},Ga={class:"title-more"},Qa={class:"title-more-add"},Xa=(e=>(M("data-v-38977b56"),e=e(),T(),e))((()=>u("div",{class:"title-more-down"},null,-1))),Za={class:"header-div"},eo=["src"],ao={class:"content-div"},oo=x(" 确认 "),lo=x("取消"),to={class:"header-div"},so=["src"],io={class:"content-div"},no={setup(e){const a=t(!1),l=t([]),s=t({modelId:"",definitionId:""}),i=t(!1),n=t(null),w=t(null),I=t({flowMessageId:"",modelId:"",definitionId:""}),M=()=>{i.value=!0,n.value="add"},T=t(null),k=t({}),j=t(""),A=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"表单名称/创建人"}},{id:"status",label:"状态",type:"select",optionLabel:"label",optionValue:"value",inCommonUse:!0,defaultAttribute:{placeholder:"请选择"},options:[{value:"1",label:"启用"},{value:"0",label:"停用"}]},{id:"updateTime",label:"更新时间",type:"picker",requestType:"array",startRequest:"updateStartTime",endRequest:"updateEndTime",inCommonUse:!1,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":e=>e.getTime()>Date.now(),"default-value":[new Date((new Date).setMonth((new Date).getMonth()-1)),new Date]},style:{}},{id:"fileTypeId",requestParams:"fileTypeId",label:"文件类型",type:"derivable",inCommonUse:!1,defaultAttribute:{placeholder:"请选择",type:"fileType",multiple:!1,joinStr:","},options:[]},{id:"sealUseTypeId",label:"用印类型",type:"select",optionLabel:"label",optionValue:"value",inCommonUse:!1,defaultAttribute:{placeholder:"请选择"},options:[{value:"1",label:"物理用印"},{value:"2",label:"电子签章"}]},{id:"formMessageId",label:"关联表单",type:"select",optionLabel:"formName",optionValue:"formMessageId",filterable:!0,inCommonUse:!1,defaultAttribute:{placeholder:"请选择"},requestObj:{method:"GET",url:"/form/list",type:"flow"}}],V=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"表单名称/创建人"}},{id:"status",label:"状态",type:"select",optionLabel:"label",optionValue:"value",inCommonUse:!0,defaultAttribute:{placeholder:"请选择"},options:[{value:"1",label:"启用"},{value:"0",label:"停用"}]},{id:"updateTime",label:"更新时间",type:"picker",requestType:"array",startRequest:"updateStartTime",endRequest:"updateEndTime",inCommonUse:!1,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":e=>e.getTime()>Date.now(),"default-value":[new Date((new Date).setMonth((new Date).getMonth()-1)),new Date]},style:{}},{id:"formMessageId",label:"关联表单",type:"select",optionLabel:"formName",optionValue:"formMessageId",filterable:!0,inCommonUse:!1,defaultAttribute:{placeholder:"请选择"},requestObj:{method:"GET",url:"/form/list",type:"flow"}}],B=d({flowMessageId:"",columnData:{},batchColumnData:[],MessageBox:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""},type:"删除"},showToastDialog:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""},type:"删除"},componentsSearchForm:{style:{lineStyle:{width:"30%"},labelStyle:{width:"100px"}},data:A,butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:Ha,data:[],defaultAttribute:{stripe:!0,"header-cell-style":{background:"var(--jy-color-fill--3)"},"cell-style":({row:e,column:a,rowIndex:o,columnIndex:l})=>{if("flowName"===a.property)return{color:"var(--jy-info-6)",cursor:"pointer"}}}},componentsPagination:{data:{amount:0,index:1,pageNumber:10},defaultAttribute:{layout:"prev, pager, next, jumper",total:0,"page-sizes":[10,100,200,300,400],background:!0}},componentsTree:{data:[],defaultAttribute:{"check-on-click-node":!0,"show-checkbox":!1,"default-expand-all":!0,"expand-on-click-node":!1,"check-strictly":!0,"highlight-current":!0,"node-key":"applyTypeId","current-node-key":"2"},defaultProps:{label:"applyTypeName",children:"children"},value:""},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量删除"},{name:"批量启用"},{name:"批量停用"}],butDatas:[{name:"知道了",type:"",clickName:U}]}}),S=(e,o,t,d)=>{"flowName"===o.property&&(a.value=!0,s.value={modelId:e.modelId,definitionId:e.definitionId},l.value=[{value:"detail",params:{flowMessageId:e.flowMessageId}},{value:"record",params:{operationId:e.flowMessageId}},{value:"version",params:{flowMessageId:e.flowMessageId}}])},C=(e,a,o,l)=>{B.columnData=a,B.flowMessageId=a.flowMessageId,B.title=o.name,"t-zgj-qyWechat.Copy"===o.name&&O.warning("功能暂未实现，敬请期待"),"t-zgj-Edit"===o.name&&("1"===a.flag?O.warning("请将流程停用后再进行修改"):(i.value=!0,n.value="edit",I.value.flowMessageId=a.flowMessageId,I.value.definitionId=a.definitionId,I.value.modelId=a.modelId)),"t-zgj-Delete"===o.name&&(B.MessageBox.header.data="提示",B.MessageBox.content.data="确认要删除流程吗？",B.MessageBox.show=!0,B.MessageBox.type="删除"),"status"===o.name&&"1"===a.flag&&(B.MessageBox.header.data="停用",B.MessageBox.content.data="请问确定停用该流程吗？",B.MessageBox.show=!0,B.MessageBox.type="停用"),"status"===o.name&&"0"===a.flag&&(B.MessageBox.header.data="启用",B.MessageBox.content.data="请问确定启用该流程吗？",B.MessageBox.show=!0,B.MessageBox.type="启用")};function U(){B.showToastDialog.show=!1}const N=(e,a)=>{a.then((a=>{200===a.code?O.success(`${e}成功！`):O.success(`${e}失败，请重试`),B.MessageBox.show=!1,q()}))};function z(e,a){B.batchColumnData=[],a.forEach((e=>{B.batchColumnData.push(e.flowName)})),B.showToastDialog.header.data=e.name,B.showToastDialog.content.data=`已选中以下流程，请问确定要${e.name}吗？`,B.showToastDialog.show=!0,B.showToastDialog.type=e.name,B.componentsBatch.butDatas=[{name:"确定",type:"primary",clickName:()=>E(a)},{name:"取消",type:"",clickName:U}]}const E=e=>{const a=e,o=[];switch(B.showToastDialog.type){case"批量删除":B.batchColumnData=[],a.forEach((e=>{"1"===e.flag&&B.batchColumnData.push(e.flowName),o.push(e.flowMessageId)})),B.batchColumnData.length>0?(B.showToastDialog.header.data=B.showToastDialog.type,B.showToastDialog.content.data="请将以下流程停用后再进行删除",B.componentsBatch.butDatas=[{name:"知道了",type:"primary",clickName:U}]):L("批量删除",P.batchDelete({flowMessageIds:o}));break;case"批量停用":a.forEach((e=>{o.push(e.flowMessageId)})),L("批量停用",P.batachEnable({flowMessageIds:o,flag:"0"}));break;case"批量启用":a.forEach((e=>{o.push(e.flowMessageId)})),L("批量启用",P.batachEnable({flowMessageIds:o,flag:"1"}))}},L=(e,a)=>{a.then((a=>{200===a.code?O.success(`${e}成功！`):O.error(`${e}失败，请重试！`),B.showToastDialog.show=!1,q()}))},F=(e,a)=>{1!==a.level&&(k.value.applyTypeId=e.applyTypeId?e.applyTypeId:null,B.componentsTree.value=e.applyTypeId,R(e.applyTypeId))},q=()=>{R(B.componentsTree.value),T.value.reloadData()},R=e=>{e===j.value?(B.componentsSearchForm.data=A,B.componentsTable.header=Ha,T.value.reloadSearchForm(A,{applyTypeId:e}),T.value.setTableHeader(Ha)):(B.componentsSearchForm.data=V,B.componentsTable.header=Wa,T.value.setTableHeader(Wa),T.value.reloadSearchForm(V,{applyTypeId:e})),T.value.reloadData()};return _((()=>{G.listApplyTypeTree({}).then((e=>{const a=[];e.data.forEach((e=>{if(e.applyTypePid){"用印申请"===e.applyTypeName&&(j.value=e.applyTypeId);const o=a.findIndex((a=>a.applyTypeId===e.applyTypePid));o>-1&&a[o].children.push(e)}else e.children=[],a.push(e)})),B.componentsTree.data=a,B.componentsTree.value=a[0].children[0].applyTypeId,k.value.applyTypeId=j.value,q()}))})),(e,t)=>{const d=r("el-button"),A=r("JyElMessageBox"),V=r("el-scrollbar");return c(),p("div",Ya,[f(Q,{url:"/flow/page",ref_key:"table",ref:T,hasTree:!0,needAutoRequest:!1,componentsSearchForm:g(B).componentsSearchForm,componentsTableHeader:g(B).componentsTable.header,componentsBatch:g(B).componentsBatch,queryParams:k.value,statusColoum:"flag",tableClick:"flowName",openValue:"1",isNo:!1,onCellClick:S,onCustomClick:C,onClickBatchButton:z},{title:m((()=>[u("div",Ka,[u("div",null,D(e.$t("t-zgj-cg-menu-liucheng-guanli")),1),u("div",Ga,[u("div",Qa,[f(d,{type:"primary",onClick:M},{default:m((()=>[x(" + "+D(e.$t("t-zgj-sync.add")),1)])),_:1})]),Xa])])])),tree:m((()=>[u("div",null,[g(B).componentsTree.value?(c(),h(g(o),{key:0,ref_key:"tree",ref:w,modelValue:g(B).componentsTree.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g(B).componentsTree.value=e),data:g(B).componentsTree.data,defaultAttribute:g(B).componentsTree.defaultAttribute,defaultProps:g(B).componentsTree.defaultProps,onCurrentChange:F},null,8,["modelValue","data","defaultAttribute","defaultProps"])):b("",!0)])])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch","queryParams"]),f(X,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e),modulesName:"system_flow_management",detailParams:l.value,importParams:s.value},null,8,["modelValue","detailParams","importParams"]),i.value?(c(),h($a,{key:0,modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),openType:n.value,sealApplyInitId:j.value,editModleIds:I.value,treeSelectedId:g(B).componentsTree.value,"onUpdate:treeSelectedId":t[3]||(t[3]=e=>g(B).componentsTree.value=e),businessList:g(B).componentsTree.data,onReloadData:q},null,8,["modelValue","openType","sealApplyInitId","editModleIds","treeSelectedId","businessList"])):b("",!0),f(A,{modelValue:g(B).MessageBox.show,"onUpdate:modelValue":t[6]||(t[6]=e=>g(B).MessageBox.show=e),show:g(B).MessageBox.show,defaultAttribute:{}},{header:m((()=>[u("div",Za,[u("img",{src:g(B).MessageBox.header.icon,alt:""},null,8,eo),u("span",null,D(g(B).MessageBox.header.data),1)])])),content:m((()=>[u("div",ao,D(g(B).MessageBox.content.data),1)])),footer:m((()=>[f(d,{type:"primary",onClick:t[4]||(t[4]=e=>(e=>{if("取消"===e&&(B.MessageBox.show=!1),"删除"===e){if("1"===B.columnData.flag)return B.MessageBox.show=!1,void O.warning("请将流程停用后再进行删除");N(e,P.flowDelete({flowMessageId:B.flowMessageId}))}"停用"===e&&N(e,P.flowEnable({flowMessageId:B.flowMessageId,flag:"0"})),"启用"===e&&N(e,P.flowEnable({flowMessageId:B.flowMessageId,flag:"1"})),"编辑"===e&&(B.MessageBox.show=!0)})(g(B).MessageBox.type))},{default:m((()=>[oo])),_:1}),f(d,{onClick:t[5]||(t[5]=e=>g(B).MessageBox.show=!1)},{default:m((()=>[lo])),_:1})])),_:1},8,["modelValue","show"]),f(A,{modelValue:g(B).showToastDialog.show,"onUpdate:modelValue":t[7]||(t[7]=e=>g(B).showToastDialog.show=e),show:g(B).showToastDialog.show,defaultAttribute:{}},{header:m((()=>[u("div",to,[u("img",{src:g(B).showToastDialog.header.icon,alt:""},null,8,so),u("span",null,D(g(B).showToastDialog.header.data),1)])])),content:m((()=>[u("div",io,D(g(B).showToastDialog.content.data),1),f(V,{class:"scrollbar","max-height":"200px"},{default:m((()=>[(c(!0),p(y,null,v(g(B).batchColumnData,(e=>(c(),p("div",{key:e,class:"scrollbar-demo-item"},D(e),1)))),128))])),_:1})])),footer:m((()=>[(c(!0),p(y,null,v(g(B).componentsBatch.butDatas,(e=>(c(),h(d,{key:e.name,type:e.type,onClick:e.clickName},{default:m((()=>[x(D(e.name),1)])),_:2},1032,["type","onClick"])))),128))])),_:1},8,["modelValue","show"])])}}};e("default",l(no,[["__scopeId","data-v-38977b56"]]))}}}));
