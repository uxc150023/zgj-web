import{_ as e}from"./back-bdc75944.js";import{J as a}from"./JyTable-8de6d2e9.js";import{g as t,j as s,u as o,P as l}from"./chunk-vform-ec6574e8.js";import{a as r}from"./authorityManagement-e63a23de.js";import{E as n}from"./chunk-element-plus-636450f3.js";import{a as c,at as i,b as d,aQ as u,W as m,X as h,ap as p,ai as b,Y as g,ao as y,u as v,ah as w,am as f,an as x,ba as k,bb as j}from"./chunk-ant-design-vue-a1de3c57.js";import"./sangedian-6ea00dcf.js";import"./Layout-58d8fae6.js";import"./searchForm-bc074dfc.js";import"./ketanchude-a94e84bc.js";import"./KDocumentTypeDialog-21febff4.js";import"./pagination-35741a8b.js";import"./batch-21ddcba8.js";import"./index-bd96bee1.js";const B=[{prop:"userName",label:"姓名",sortable:!0,flex:!0,"min-width":150,show:!0},{prop:"accountNo",label:"账号",sortable:!0,"min-width":150,show:!0},{prop:"hostOrganName",label:"所属部门",sortable:!0,"min-width":150,show:!0},{prop:"userTitle",label:"职位",sortable:!0,"min-width":150,show:!0},{prop:"caozuo",label:"操作",fixed:"right",width:220,show:!0,rankDisplayData:[{name:"t-zgj-role.Removal"}]}],S=e=>(k("data-v-d7ae183b"),e=e(),j(),e),E={class:"PrintControlManagement-LibraryOfSeals"},C={class:"breadcrumb"},I=x(" 权限管理 "),J=x(" 人员管理 "),M={class:"title"},T={class:"title"},_={class:"title-desc"},D=x(" 人员管理"),A={class:"role"},U={class:"title-more"},q={class:"title-more-add"},z=x("+ 新增人员"),N=S((()=>g("div",{class:"title-more-down"},null,-1))),P={class:"header-div"},F=["src"],R={class:"content-div"},O=t({setup(t){const k=s(),j=o(),S=c(null),O=c({}),V=c(j.query.roleName),$=i({sealIds:"",msg:"",tabsShow:[],searchSelected:[],typeList:[],activeTab:"",JyElMessageBox:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""},type:"删除"},showToastDialog:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}},componentsSearchForm:{style:{lineStyle:{width:"calc(100% / 3)"},labelStyle:{width:"100px"}},data:[{id:"searchKey",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"姓名/账号/职位"}},{id:"hostOrganId",label:"所属部门",type:"derivable",inCommonUse:!0,defaultAttribute:{placeholder:"+所属部门"}}],butData:[{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:B,data:[],defaultAttribute:{stripe:!0,"header-cell-style":{background:"var(--jy-color-fill--3)"},"cell-style":({row:e,column:a,rowIndex:t,columnIndex:s})=>{if(""===a.property)return{color:"var(--jy-info-6)",cursor:"pointer"}}}},componentsPagination:{data:{amount:0,index:1,pageNumber:10},defaultAttribute:{layout:"prev, pager, next, jumper",total:0,"page-sizes":[10,50,100],background:!0}},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量移除"}]}}),L=()=>{$.activeTab="user",$.tabsShow=["user"],H.value=!0};O.value={roleId:j.query.roleId};const H=c(!1);let K="";const Q=(e,a,t,s)=>{"t-zgj-role.Removal"===t.name&&($.JyElMessageBox.header.data="移除",$.JyElMessageBox.content.data="请问确定要移除吗？",$.JyElMessageBox.show=!0,$.JyElMessageBox.type="移除",K=a.userId)},W=()=>{k.go(-1)},X=()=>{r.roleDelete(`${O.value.roleId}/${K}`).then((e=>{n.success("操作成功"),$.JyElMessageBox.show=!1,S.value.reloadData()}))};d((()=>$.searchSelected),(e=>{if(e&&0!==e.length)if("user"===$.activeTab){const a=[];e.forEach((e=>{a.push(e.id)})),r.addRoleUser({roleId:O.value.roleId,userIds:a}).then((e=>{n.success("操作成功"),$.JyElMessageBox.show=!1,$.searchSelected=[],S.value.reloadData()}))}else $.activeTab}));const Y=(e,a)=>{const t=[];a.forEach((e=>{t.push(e.userId)})),r.batchDeleteRoleUser({roleId:O.value.roleId,userIds:t}).then((()=>{n.success("操作成功"),S.value.reloadData()}))},Z=e=>{"hostOrganId"===e.id&&($.activeTab="organ",$.tabsShow=["organ"],H.value=!0)};return(t,s)=>{const o=u("el-breadcrumb-item"),r=u("el-breadcrumb"),n=u("el-button"),c=u("JyElMessageBox");return m(),h("div",E,[p(a,{url:"/role/user/page",ref_key:"table",ref:S,hasTree:!1,breadcrumb:!0,needAutoRequest:!0,componentsSearchForm:v($).componentsSearchForm,componentsTableHeader:v($).componentsTable.header,componentsBatch:v($).componentsBatch,queryParams:O.value,tableClick:"",onCellClick:t.cellClick,onCustomClick:Q,onClickBatchButton:Y,onClickElement:Z},{breadcrumb:b((()=>[g("div",C,[p(r,{separator:"/"},{default:b((()=>[p(o,{style:{"--el-text-color-regular":"rgba(0, 0, 0, 0.65)"}},{default:b((()=>[I])),_:1}),p(o,{style:{"--el-text-color-regular":"rgba(0, 0, 0, 0.25)"}},{default:b((()=>[J])),_:1})])),_:1})])])),title:b((()=>[g("div",M,[g("div",T,[g("div",_,[g("img",{class:"title-desc-img",src:e,alt:"",onClick:W}),D,g("span",A,"（"+y(V.value)+"）",1)])]),g("div",U,[g("div",q,[p(n,{type:"primary",onClick:L},{default:b((()=>[z])),_:1})]),N])])])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch","queryParams","onCellClick"]),H.value?(m(),w(v(l),{key:0,show:H.value,"onUpdate:show":s[0]||(s[0]=e=>H.value=e),searchSelected:v($).searchSelected,"onUpdate:searchSelected":s[1]||(s[1]=e=>v($).searchSelected=e),tabsShow:v($).tabsShow,activeTab:v($).activeTab},null,8,["show","searchSelected","tabsShow","activeTab"])):f("",!0),p(c,{modelValue:v($).JyElMessageBox.show,"onUpdate:modelValue":s[3]||(s[3]=e=>v($).JyElMessageBox.show=e),show:v($).JyElMessageBox.show,defaultAttribute:{}},{header:b((()=>[g("div",P,[g("img",{src:v($).JyElMessageBox.header.icon,alt:""},null,8,F),g("span",null,y(v($).JyElMessageBox.header.data),1)])])),content:b((()=>[g("div",R,y(v($).JyElMessageBox.content.data),1)])),footer:b((()=>[p(n,{type:"primary",onClick:X},{default:b((()=>[x(y(t.$t("t-zgj-operation.submit")),1)])),_:1}),p(n,{onClick:s[2]||(s[2]=e=>v($).JyElMessageBox.show=!1)},{default:b((()=>[x(y(t.$t("t-zgj-operation.cancel")),1)])),_:1})])),_:1},8,["modelValue","show"])])}}},[["__scopeId","data-v-d7ae183b"]]);export{O as default};
