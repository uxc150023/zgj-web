System.register(["./index-legacy-d43a85fb.js","./chunk-vform-legacy-9e71fe2f.js","./index-legacy-e7fe48d5.js","./yuan-hui-legacy-0c1e3d03.js","./chunk-element-plus-legacy-cff7802d.js","./index-legacy-ce14c29e.js"],(function(e,a){"use strict";var l,t,r,o,n,i,s,d,u,p,m,c,y,N,v,b,E,T,f,A,S,g,M,h,O,_,w,I,j,L,R,k,D,U=document.createElement("style");return U.textContent=".flow-detail[data-v-87eaee9d]{padding-top:28px}.flow-detail .info-list[data-v-87eaee9d]{margin:0%}.flow-detail .info-list .cont .cont-details[data-v-87eaee9d]{display:flex;flex-flow:wrap;padding:8px 0;box-sizing:border-box}.flow-detail .info-list .cont .cont-details .cont-list[data-v-87eaee9d]{display:flex;width:50%;padding:8px 0;box-sizing:border-box}.flow-detail .info-list .cont .cont-details .cont-list .cont-list-label[data-v-87eaee9d]{width:100px;display:flex;justify-content:flex-end;color:var(--jy-color-text-3);flex-shrink:0}.flow-detail .info-list .cont .cont-details .cont-list .cont-list-value[data-v-87eaee9d]{display:flex;align-items:center}.flow-detail .info-list .cont .cont-details .cont-list .cont-list-value img[data-v-87eaee9d]{margin-right:8px}.flow-detail[data-v-e5d8fa81],.table[data-v-2615465a],.table[data-v-54566026]{padding-top:28px}.detail-drawer .el-drawer__header{margin-bottom:0}\n",document.head.appendChild(U),{setters:[e=>{l=e.default},e=>{t=e.B,r=e.g,o=e.Q,n=e.R,i=e.o},e=>{s=e.default},e=>{d=e.y,u=e.a},e=>{p=e.r,m=e.j,c=e.a9,y=e.F,N=e.G,v=e.B,b=e.H,E=e.P,T=e.U,f=e.O,A=e.I,S=e.J,g=e.R,M=e.u,h=e.Q,O=e._,_=e.n,w=e.C,I=e.N,j=e.b,L=e.w,R=e.Z,k=e.c},e=>{D=e._}],execute:function(){const a={SYSTEM_FLOW_MANAGEMENT:"system_flow_management",SYSTEM_FORM_MANAGEMENT:"system_form_management",RULEBUSINESSMANAGEMENT:"rule_business_management",DEALINGUNIT:"dealing_unit",UNITANDDEPARTMENT:"unit_and_department"},U={TABS:[],URLS:[],INFO:[],TABLEHEADERS:[]};U.URLS=[{value:"detail",urlName:"baseInfo"},{value:"version",urlName:"queryHisVersion"},{value:"record",urlName:"viewOperation"}],U.TABS=[{name:"t-zgj-detail-flow.Detail",value:"detail",children:["BaseInfo","FlowDetail"]},{name:"t-zgj-detail-operation.Record",value:"record",children:["RecordTable"]},{name:"t-zgj-detail-flow.Version",value:"version",children:["VersionTable"]}],U.INFO=[{label:"流程名称",key:"flowName"},{label:"流程编码",key:"flowNo"},{label:"业务类型",key:"applyTypeName"},{label:"文件类型",key:["fileTypeScope"],handleKey:"fileScope"},{label:"流程状态",key:"flag",type:"status",customStyle:!0},{label:"流程适用范围",key:["organScope","organUserScope"],handleKey:"flowScope"},{label:"创建人",key:"createUserName"},{label:"创建时间",key:"createDatetime"},{label:"更新时间",key:"modifyDatetime"},{label:"流程说明",key:"readme"},{label:"关联表单",key:"formMessageName"}],U.TABLEHEADERS={version:[{label:"版本号",prop:"flowVerison"},{label:"版本时间",prop:"modifyDatetime"}],record:[{label:"操作人",prop:"operationUser"},{label:"操作时间",prop:"operationDate"},{label:"操作记录",prop:"operationType"},{label:"操作说明",prop:"operationTxt"}]};const B={TABS:[],URLS:[],INFO:[],TABLEHEADERS:[]};B.URLS=[{value:"detail",urlName:"baseInfo"},{value:"version",urlName:"queryHisVersion"},{value:"record",urlName:"viewOperation"}],B.TABS=[{name:"t-zgj-detail-flow.Detail",value:"detail",children:["BaseInfo"]},{name:"t-zgj-detail-operation.Record",value:"record",children:["RecordTable"]},{name:"t-zgj-detail-flow.Version",value:"version",children:["VersionTable"]}],B.INFO=[{label:"表单名称",key:"formName"},{label:"表单编码",key:"formNo"},{label:"业务类型",key:"applyTypeName"},{label:"用印类型",key:"sealUseTypeName"},{label:"表单状态",key:"flag",type:"status",customStyle:!0},{label:"创建时间",key:"createDatetimeStr"},{label:"创建人",key:"createUserName"},{label:"更新时间",key:"modifyDatetimeStr"},{label:"表单说明",key:"readme"}],B.TABLEHEADERS={version:[{label:"版本号",prop:"formVerison"},{label:"版本时间",prop:"modifyDatetime"}],record:[{label:"操作人",prop:"operationUser"},{label:"操作时间",prop:"operationDate"},{label:"操作记录",prop:"operationType"},{label:"操作说明",prop:"operationTxt"}]};const G={TABS:[],URLS:[],INFO:[],TABLEHEADERS:[]};G.URLS=[{value:"detail",urlName:"baseInfo"},{value:"record",urlName:"viewOperation"}],G.TABS=[{name:"t-zgj-detail-flow.Detail",value:"detail",children:["BaseInfo"]}],G.INFO=[{label:"业务规则名称",key:"ruleBusinessName"},{label:"业务规则编码",key:"ruleBusinessNo"},{label:"用印类型",key:"sealUseTypeName"},{label:"关联文件类型",key:["fileTypeList"],handleKey:"filteType"},{label:"业务规则状态",key:"flag",type:"status",customStyle:!0},{label:"创建人",key:"createUserName"},{label:"创建时间",key:"createDatetime"},{label:"更新时间",key:"modifyDatetime"}],G.TABLEHEADERS={record:[{label:"操作人",prop:"operationUser"},{label:"操作时间",prop:"operationDate"},{label:"操作记录",prop:"operationType"},{label:"操作说明",prop:"operationTxt"}]};const x={TABS:[],URLS:[],INFO:[],TABLEHEADERS:[]};x.URLS=[{value:"detail",urlName:"baseInfo"}],x.TABS=[{name:"t-zgj-detail-flow.Detail",value:"detail",children:["BaseInfo"]}],x.INFO=[{label:"企业名称",key:"relatedCompanyName"},{label:"企业编码",key:"relatedCompanyNo"},{label:"企业所属部门",key:"organName"},{label:"联系人",key:"contactName"},{label:"备注",key:"readme"}],x.TABLEHEADERS={};const F={TABS:[],URLS:[],INFO:[],TABLEHEADERS:[]};F.URLS=[{value:"detail",urlName:"baseInfo"},{value:"organizer",urlName:"uninUser"},{value:"record",urlName:"viewOperation"}],F.TABS=[{name:"t-zgj-detail-unit.UnitAndDepart",value:"detail",children:["BaseInfo"]},{name:"t-zgj-detail-unit.UnitUser",value:"organizer",children:["VersionTable"]}],F.INFO=[{label:"部门名称",key:"organName"},{label:"组织类型",key:"organTypeName"},{label:"部门主管",key:"organLeaderName"},{label:"部门编码",key:"organNo"},{label:"部门人数",key:"organUserNum"},{label:"上级部门",key:"organPName"},{label:"备注",key:"readme"}],F.TABLEHEADERS={organizer:[{label:"人员列表",prop:"userName"},{label:"账号",prop:"accountNo"}],record:[{label:"操作人",prop:"operator"},{label:"操作时间",prop:"operateDatetime"},{label:"操作记录",prop:"operateAction"},{label:"操作说明",prop:"operateDesc"}]};const q=[];q.push({[a.SYSTEM_FLOW_MANAGEMENT]:U,[a.SYSTEM_FORM_MANAGEMENT]:B,[a.RULEBUSINESSMANAGEMENT]:G,[a.DEALINGUNIT]:x,[a.UNITANDDEPARTMENT]:F});const P=(e,a)=>q[q.findIndex((a=>a[e]))][e].URLS[a].urlName,V=(e,a)=>q[q.findIndex((a=>a[e]))][e].URLS.findIndex((e=>e.value===a));let H={};H={[a.SYSTEM_FLOW_MANAGEMENT]:{[P(a.SYSTEM_FLOW_MANAGEMENT,V(a.SYSTEM_FLOW_MANAGEMENT,"detail"))]:e=>t({method:"GET",url:"/flow/query",params:e}),[P(a.SYSTEM_FLOW_MANAGEMENT,V(a.SYSTEM_FLOW_MANAGEMENT,"version"))]:e=>t({method:"GET",url:"/flow/queryHisVersion",params:e}),[P(a.SYSTEM_FLOW_MANAGEMENT,V(a.SYSTEM_FLOW_MANAGEMENT,"record"))]:e=>t({method:"GET",url:"/flow/viewOperation",params:e})},[a.SYSTEM_FORM_MANAGEMENT]:{[P(a.SYSTEM_FORM_MANAGEMENT,V(a.SYSTEM_FORM_MANAGEMENT,"detail"))]:e=>t({method:"GET",url:"/form/query",params:e}),[P(a.SYSTEM_FORM_MANAGEMENT,V(a.SYSTEM_FORM_MANAGEMENT,"version"))]:e=>t({method:"GET",url:"/form/queryHisVersion",params:e}),[P(a.SYSTEM_FORM_MANAGEMENT,V(a.SYSTEM_FORM_MANAGEMENT,"record"))]:e=>t({method:"GET",url:"/form/queryOperation",params:e})},[a.RULEBUSINESSMANAGEMENT]:{[P(a.RULEBUSINESSMANAGEMENT,V(a.RULEBUSINESSMANAGEMENT,"detail"))]:e=>t({method:"GET",url:`/biz/rule/view/${e}`})},[a.DEALINGUNIT]:{[P(a.DEALINGUNIT,V(a.DEALINGUNIT,"detail"))]:e=>t({method:"GET",url:`/tenant/relatedCompany/detail/${e}`})},[a.UNITANDDEPARTMENT]:{[P(a.UNITANDDEPARTMENT,V(a.UNITANDDEPARTMENT,"detail"))]:e=>t({method:"GET",url:`/organ/${e}`}),[P(a.UNITANDDEPARTMENT,V(a.UNITANDDEPARTMENT,"organizer"))]:e=>t({method:"GET",url:`/organ/userInfoList/${e}`})}};const z=H,Y={class:"flow-detail"},C={class:"info-list"},W={class:"cont"},K={class:"cont-details"},$={class:"cont-list-label"},Q=["src"],J={name:"BaseInfo"},Z=r(Object.assign(J,{props:{requestObj:{type:Object,defatult:()=>({})}},setup(e){const a=e,l=p({yuanLv:d,yuanHui:u,warning:"/zgj-web/assets/detail-warning-52514a54.svg",danger:"/zgj-web/assets/detail-danger-a1cea784.svg"}),t=["var(--jy-success-6)","var(--jy-color-text-4)","var(--jy-warning-6)","var(--jy-primary-6)","var(--jy-danger-6)"],r=m({get:()=>a.requestObj.info}),o=p({});c((()=>{z[a.requestObj.modulesName][a.requestObj.urlName](a.requestObj.params).then((e=>{e.data&&(r.value.forEach((a=>{for(const l in e.data)if(a.handleKey&&a.key.includes(l)&&Array.isArray(a.key))n(a.handleKey,e.data[l]);else if(l===a.key){if(a.customStyle){a.valStyle=h(a,e.data[l]),a.iconPath=O(a,e.data[l]),a.value=_(a,e.data[l]);continue}a.value=e.data[l]}})),r.value.forEach((e=>{e.handleKey&&(e.value=i(o.value[e.handleKey]))})))}))}));const n=(e,a)=>{a&&Array.isArray(a)&&(o.value.hasOwnProperty(e)?o.value[e]=o.value[e].concat(a):o.value[e]=a)},i=(e,a)=>{if(!e||!Array.isArray(e))return"";const l=[];return e.forEach((e=>l.push(e.name))),a?a+","+l.join(","):l.join(",")},h=(e,a)=>{let l={};return"status"===e.type&&(l="1"===a?{color:t[0]}:{color:t[1]}),l},O=(e,a)=>{let l="";return"status"===e.type&&(l="1"===a?"yuanLv":"yuanHui"),l},_=(e,a)=>{let l="";return"status"===e.type&&(l="1"===a?"启用":"停用"),l};return(e,a)=>{const t=s;return y(),N("div",Y,[v(t,{label:"基本信息"}),b("div",C,[b("div",W,[b("div",K,[(y(!0),N(E,null,T(M(r),(a=>(y(),N("div",{class:"cont-list",style:f(a.lineStyle),key:a.label},[b("div",$,A(e.$t(a.label))+"： ",1),b("div",{class:"cont-list-value",style:f(a.valStyle)},[a.iconPath?(y(),N("img",{key:0,src:l.value[a.iconPath],style:f(a.iconStyle)},null,12,Q)):S("",!0),g(" "+A(a.value),1)],4)],4)))),128))])])])])}}}),[["__scopeId","data-v-87eaee9d"]]),X={class:"flow-detail"},ee={name:"FlowDetail"},ae=r(Object.assign(ee,{props:{importParams:{type:Object,default:()=>({})}},setup(e){const a=e,l=p({}),t=p(null);return c((()=>{o.flowDetail({modelId:a.importParams.modelId,definitionId:a.importParams.definitionId,edit:!0}).then((async e=>{t.value=null,_((()=>{t.value=e.data.data}))}))})),(e,a)=>{const r=s,o=D;return y(),N("div",X,[v(r,{label:"审批流程"}),t.value?(y(),h(o,O({key:0,id:"flow"},{readable:!0,mapable:!1,scroll:!1,scrollY:!1,top:"50"},{node:t.value,wrapStyle:l.value}),null,16,["node","wrapStyle"])):S("",!0)])}}}),[["__scopeId","data-v-e5d8fa81"]]),le={name:"RecordTable"},te=r(Object.assign(le,{props:{requestObj:{type:Object,defatult:()=>({})}},setup(e){const a=e,l=p([]),t=p(!1),r=m({get:()=>a.requestObj.tableHeaders[a.requestObj.value]});return c((()=>{t.value=!0,z[a.requestObj.modulesName][a.requestObj.urlName](a.requestObj.params).then((e=>{e.data&&(l.value=e.data),t.value=!1})).catch((()=>{t.value=!1}))})),(e,a)=>{const o=w("el-table-column"),i=n;return y(),h(i,{data:l.value,loading:t.value,ref:"recordTableRef",highlightCurrentRow:!0,class:"table"},{default:I((()=>[v(o,{type:"index",label:"序号",width:"60"}),(y(!0),N(E,null,T(M(r),(a=>(y(),h(o,{key:a.prop,prop:a.prop,width:a.width},{header:I((()=>[g(A(e.$t(a.label)),1)])),_:2},1032,["prop","width"])))),128))])),_:1},8,["data","loading"])}}}),[["__scopeId","data-v-2615465a"]]),re={name:"VersionTable"},oe=r(Object.assign(re,{props:{requestObj:{type:Object,defatult:()=>({})}},setup(e){const a=e,l=p([]),t=p(!1),r=m({get:()=>a.requestObj.tableHeaders[a.requestObj.value]});return c((()=>{t.value=!0,z[a.requestObj.modulesName][a.requestObj.urlName](a.requestObj.params).then((e=>{e.data&&(l.value=e.data),t.value=!1})).catch((()=>{t.value=!1}))})),(e,a)=>{const o=w("el-table-column"),i=n;return y(),h(i,{data:l.value,loading:t.value,ref:"versionTableRef",highlightCurrentRow:!0,class:"table"},{default:I((()=>[v(o,{type:"index",label:"序号",width:"60"}),(y(!0),N(E,null,T(M(r),(a=>(y(),h(o,{key:a.prop,prop:a.prop,width:a.width},{header:I((()=>[g(A(e.$t(a.label)),1)])),_:2},1032,["prop","width"])))),128))])),_:1},8,["data","loading"])}}}),[["__scopeId","data-v-54566026"]]),ne={key:0},ie={name:"DetailDrawer"};e("_",Object.assign(ie,{props:{modelValue:{type:Boolean,defult:!1},modulesName:{type:String,default:""},detailParams:{type:Array,default:()=>[]},importParams:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,r={BaseInfo:Z,FlowDetail:ae,VersionTable:oe,RecordTable:te},o=p({urlName:"",params:"",modulesName:""}),n=q.findIndex((e=>e[t.modulesName])),s=q[n][t.modulesName],d=j({...s,componentList:[],componentName:"",updateActive:!1}),u=p(d.TABS.length>0&&d.TABS[0].value),c=m({get:()=>t.modelValue,set(e){a("update:modelValue",e)}}),b=p(0),A=()=>0!==d.componentList.length&&-1!==d.componentList.findIndex((e=>e.value===u.value)),g=e=>{const a=d.componentList;return e&&Array.isArray(e.children)?(0===d.componentList.length?e.children.forEach((l=>{a.push({value:e.value,copName:l})})):e.children.forEach((l=>{-1===a.findIndex((e=>e.copName===l))&&a.push({value:e.value,copName:l})})),a):[]},O=()=>{const{urlName:e,value:a}=d.URLS.find((e=>e.value===u.value)),l=t.detailParams.find((e=>e.value===u.value));o.value={value:a,urlName:e,params:l.params,modulesName:t.modulesName,info:d.INFO,tableHeaders:d.TABLEHEADERS}};return L((()=>t.modelValue),(e=>{e?(u.value=d.TABS.length>0&&d.TABS[0].value,O()):(d.componentList=[],d.updateActive=!1,u.value=null)})),L((()=>u.value),(()=>{!A()&&u.value&&(t.modelValue&&O(),(()=>{b.value=d.TABS.findIndex((e=>e.value===u.value));const e=d.TABS[b.value];e.value===u.value&&(0!==d.componentList.length&&A()||(d.componentList=g(e)),d.updateActive=!0)})())}),{immediate:!0}),(a,t)=>{const n=l;return y(),h(n,{modelValue:M(c),"onUpdate:modelValue":t[1]||(t[1]=e=>k(c)?c.value=e:null),direction:"rtl",onClose:a.clickClose,title:"详情",class:"detail-drawer",size:"800px"},{default:I((()=>[v(i,{active:u.value,label:M(d).TABS,"onUpdate:active":t[0]||(t[0]=e=>u.value=e),border:!0},null,8,["active","label"]),M(d).updateActive?(y(),N("div",ne,[(y(!0),N(E,null,T(M(d).componentList,((a,l)=>(y(),N("div",{key:l},[(y(),h(R(r[a.copName]),{requestObj:o.value,importParams:e.importParams,style:f({display:a.value===u.value?"block":"none"})},null,8,["requestObj","importParams","style"]))])))),128))])):S("",!0)])),_:1},8,["modelValue","onClose"])}}}))}}}));
