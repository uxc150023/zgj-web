System.register(["./gengduo-caozuo-legacy-e441bcd3.js","./JyTable-legacy-caaa7541.js","./main-legacy-32c40b54.js","./ketanchude-legacy-4abaf206.js","./index-legacy-4a966d5e.js","./sangedian-legacy-75d81ddc.js","./Layout-legacy-8a369202.js","./searchForm-legacy-6cef90ab.js","./KDocumentTypeDialog-legacy-531ebfaa.js","./pagination-legacy-fb6b924b.js","./batch-legacy-3a06fca6.js","./index-legacy-301598c8.js","./index-legacy-1f81a8d9.js","./cha-kong-legacy-1ebc7b7b.js","./index-legacy-88ea9e78.js","./yuan-hui-legacy-0c1e3d03.js","./index-legacy-31a1c1a3.js","./home-back-legacy-d9a8ace4.js","./logo-legacy-7450937f.js","./request-util-legacy-76780fff.js"],(function(e,a){"use strict";var t,o,l,n,d,r,m,s,c,i,p,u,g,y,h,f,C,b,w,x,v,j,A,D,F,I,N,B,V=document.createElement("style");return V.textContent=".el-icon[data-v-7c71dbe5]{color:#aaa;margin-right:5px}.title[data-v-49cd03c2]{display:flex;align-items:center;justify-content:space-between}.title .title-more[data-v-49cd03c2]{height:100%;display:flex;align-items:center}.title .title-more .title-more-add[data-v-49cd03c2]{margin-right:.5rem;height:100%;display:flex;align-items:center}.title .title-more .title-more-down[data-v-49cd03c2]{height:100%;display:flex;align-items:center}.title .title-more .title-more-down img[data-v-49cd03c2]{margin-right:5px}\n",document.head.appendChild(V),{setters:[e=>{t=e._},e=>{o=e.J},e=>{l=e.a7,n=e._,d=e.v,r=e.h,m=e.i,s=e.s,c=e.r,i=e.o,p=e.c,u=e.a,g=e.w,y=e.u,h=e.m,f=e.f,C=e.b3,b=e.l,w=e.F,x=e.M,v=e.j,j=e.t,A=e.g,D=e.Y,F=e.y,I=e.z},e=>{N=e._},e=>{B=e._},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const a={getRelatedCompanyList:e=>l({method:"GET",url:"/tenant/relatedCompany/list",params:e}),addRelatedCompany:e=>l({method:"POST",url:"/tenant/relatedCompany/add",data:e}),updateRelatedCompany:e=>l({method:"POST",url:"/tenant/relatedCompany/update",data:e}),deleteRelatedCompany:e=>l({method:"POST",url:"/tenant/relatedCompany/delete",data:e}),batchImportRelatedCompany:e=>l({method:"GET",url:"/tenant/relatedCompany/batchImport",params:e}),detailRelatedCompany:e=>l({method:"GET",url:`/tenant/relatedCompany/detail/${e}`}),detailGetRelatedCompanyNo:e=>l({method:"GET",url:"/tenant/relatedCompany/getRelatedCompanyNo"})},V={class:"select-box-contBox"},E={class:"ap-box-contBox-icon"},_={props:{showAdd:{type:Boolean,default:!1},title:{type:String,default:"t-zgj-add"},column:{type:Object,default:()=>({})}},emits:["update:showAdd","on-confirm","on-cancel"],setup(e,{emit:t}){const o=e,l=d(null),n=d(!1),v=r({searchSelected:[],componentsAddForm:{formData:{relatedCompanyName:"",organId:"",organName:"",contactName:"",contactInformation:"",relatedCompanyId:"",readme:""},formRules:{relatedCompanyName:[{required:!0,message:"请输入企业名称",trigger:"change"}],organId:[{required:!0,message:"请选择所属部门",trigger:"change"}],contactName:[{required:!0,message:"请输入联系人",trigger:"change"}],contactInformation:[{required:!0,message:"请输入正确的手机号",pattern:/^1(3[0-9]|4[01456879]|5[0-35-9]|6[2567]|7[0-8]|8[0-9]|9[0-35-9])\d{8}$/,trigger:"change"}]}}});m((()=>o.column),(e=>{if(e)if("t-zgj-Edit"===o.title){v.searchSelected=[{id:e.organId,idFullPathSet:[e.organId],name:e.organName,type:"organ"}];for(const a in e)v.componentsAddForm.formData[a]=e[a]}else{if(l.value){l.value.resetFields(),v.searchSelected=[];for(const e in v.componentsAddForm.formData)v.componentsAddForm.formData[e]=""}j()}}));const j=()=>{a.detailGetRelatedCompanyNo().then((e=>{200===e.code&&(v.componentsAddForm.formData.relatedCompanyNo=e.data)}))},A=s({get:()=>o.showAdd,set(e){t("update:showAdd",e)}}),D=()=>{t("on-cancel",!1)},F=()=>{l.value.validate((e=>{e&&(v.componentsAddForm.formData.relatedCompanyId&&"t-zgj-Edit"===o.title?a.updateRelatedCompany(v.componentsAddForm.formData).then((e=>{t("on-confirm",e,"修改")})):a.addRelatedCompany(v.componentsAddForm.formData).then((e=>{t("on-confirm",e,"新增")})))}))},I=e=>{n.value=!0},B=e=>{e&&e.length>0&&(v.searchSelected=e,v.componentsAddForm.formData.organName=e[0].name,v.componentsAddForm.formData.organId=e[0].id),n.value=!1};return(e,a)=>{const t=c("el-input"),d=c("el-form-item"),r=c("el-form"),m=x;return i(),p(w,null,[u(m,{"onUpdate:show":a[10]||(a[10]=e=>A.value=e),show:y(A),title:e.$t(o.title),centerBtn:!0,confirmText:e.$t("t-zgj-operation.submit"),concelText:e.$t("t-zgj-operation.cancel"),width:900,height:420,onClose:D,onConfirm:F},{default:g((()=>[u(r,{model:y(v).componentsAddForm.formData,rules:y(v).componentsAddForm.formRules,ref_key:"formRef",ref:l,"label-width":"100px"},{default:g((()=>[u(d,{label:"企业编码",prop:"relatedCompanyNo"},{default:g((()=>[u(t,{type:"hidden",modelValue:y(v).componentsAddForm.formData.relatedCompanyId,"onUpdate:modelValue":a[0]||(a[0]=e=>y(v).componentsAddForm.formData.relatedCompanyId=e)},null,8,["modelValue"]),u(t,{disabled:"",modelValue:y(v).componentsAddForm.formData.relatedCompanyNo,"onUpdate:modelValue":a[1]||(a[1]=e=>y(v).componentsAddForm.formData.relatedCompanyNo=e),placeholder:"请输入企业编码"},null,8,["modelValue"])])),_:1}),u(d,{label:"企业名称",prop:"relatedCompanyName"},{default:g((()=>[u(t,{modelValue:y(v).componentsAddForm.formData.relatedCompanyName,"onUpdate:modelValue":a[2]||(a[2]=e=>y(v).componentsAddForm.formData.relatedCompanyName=e),placeholder:"请输入企业名称",clearable:"",maxlength:"128"},null,8,["modelValue"])])),_:1}),u(d,{label:"所属部门",prop:"organId"},{default:g((()=>[h("div",V,[u(t,{class:"ap-box-contBox-input width-100",readonly:"",modelValue:y(v).componentsAddForm.formData.organName,"onUpdate:modelValue":a[3]||(a[3]=e=>y(v).componentsAddForm.formData.organName=e),placeholder:"请选择",onClick:a[4]||(a[4]=e=>I())},null,8,["modelValue"]),u(t,{type:"hidden",modelValue:y(v).componentsAddForm.formData.organId,"onUpdate:modelValue":a[5]||(a[5]=e=>y(v).componentsAddForm.formData.organId=e)},null,8,["modelValue"]),h("div",E,[h("img",{onClick:a[6]||(a[6]=e=>I()),class:"ap-box-contBox-icon-img",src:N,alt:""})])])])),_:1}),u(d,{label:"联系人",prop:"contactName"},{default:g((()=>[u(t,{modelValue:y(v).componentsAddForm.formData.contactName,"onUpdate:modelValue":a[7]||(a[7]=e=>y(v).componentsAddForm.formData.contactName=e),placeholder:"请输入联系人",clearable:"",maxlength:"64"},null,8,["modelValue"])])),_:1}),u(d,{label:"联系方式",prop:"contactInformation"},{default:g((()=>[u(t,{modelValue:y(v).componentsAddForm.formData.contactInformation,"onUpdate:modelValue":a[8]||(a[8]=e=>y(v).componentsAddForm.formData.contactInformation=e),placeholder:"请输入联系方式",clearable:"",maxlength:"64"},null,8,["modelValue"])])),_:1}),u(d,{label:"备注",prop:"readme"},{default:g((()=>[u(t,{type:"textarea",rows:4,modelValue:y(v).componentsAddForm.formData.readme,"onUpdate:modelValue":a[9]||(a[9]=e=>y(v).componentsAddForm.formData.readme=e),placehoder:"请输入备注",maxlength:"512"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["show","title","confirmText","concelText"]),n.value?(i(),f(C,{key:0,show:n.value,"onUpdate:show":a[11]||(a[11]=e=>n.value=e),tabsShow:["organ"],multiple:!1,"onUpdate:searchSelected":B,searchSelected:y(v).searchSelected},null,8,["show","searchSelected"])):b("",!0)],64)}}},z=n(_,[["__scopeId","data-v-7c71dbe5"]]),S={class:"title"},J={class:"title-more"},M={class:"title-more-add"},k={class:"title-more-down"},R=(e=>(F("data-v-49cd03c2"),e=e(),I(),e))((()=>h("img",{class:"button-icon",src:t,alt:"",srcset:""},null,-1))),T={class:"header-div"},U=["src"];e("default",n({setup(e){const t=d(!1),l=d([]),n=d(!1),m=d(null),s=r({title:"新增",column:{},relatedCompanyIds:[],componetsAddForm:{showAddDialog:!1},componentsSearchForm:{style:{lineStyle:{width:"30%"},labelStyle:{width:"100px"}},data:[{id:"relatedCompanyName",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"企业名称/企业编码/联系人/联系方式"}},{id:"organId",requestParams:"organId",label:"所属部门",type:"derivable",inCommonUse:!0,defaultAttribute:{type:"organ",placeholder:"+所属部门",joinStr:",",multiple:!0},values:[]}],butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"t-zgj-query",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"t-zgj-reset",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:[{prop:"relatedCompanyName",label:"企业名称",sortable:!0,"min-width":150,fixed:!0,"show-overflow-tooltip":!0,show:!0},{prop:"relatedCompanyNo",label:"企业编码",sortable:!0,show:!0,"min-width":150},{prop:"organName",label:"所属部门",sortable:!0,show:!0,"min-width":150},{prop:"contactName",label:"联系人",sortable:!0,show:!0,"min-width":150},{prop:"contactInformation",label:"联系方式",sortable:!0,show:!0,"min-width":150},{prop:"readme",label:"备注",sortable:!0,show:!0,"min-width":150,"show-overflow-tooltip":!0},{prop:"7",label:"操作",fixed:"right",width:"120px",show:!0,align:"center",rankDisplayData:[{name:"t-zgj-Edit"},{name:"t-zgj-Delete"}]}],data:[],defaultAttribute:{stripe:!0,"header-cell-style":{background:"var(--jy-color-fill--3)"},"cell-style":({row:e,column:a,rowIndex:t,columnIndex:o})=>{if("relatedCompanyName"===a.property)return{color:"var(--jy-info-6)",cursor:"pointer"}}},loading:!1},componentsPagination:{data:{amount:0,index:1,pageNumber:10},defaultAttribute:{layout:"prev, pager, next, jumper",total:0,"page-sizes":[10,50,100],background:!0}},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"t-zgj-seal.BatchDelete"}]},JyElMessageBox:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""},type:"删除"}}),f=()=>{n.value=!1},C=(e,a)=>{200===e.code&&(D.success(`${a}成功！`),n.value=!1,m.value.reloadData())};function b(e,a,o,n){"relatedCompanyName"===a.property&&(t.value=!0,l.value=[{value:"detail",params:e.relatedCompanyId}])}function w(e,t,o,l){s.relatedCompanyIds=[],s.relatedCompanyIds.push(t.relatedCompanyId),"t-zgj-Edit"===o.name&&(s.title="t-zgj-Edit",a.detailRelatedCompany(t.relatedCompanyId).then((e=>{200===e.code&&(s.column=e.data,n.value=!0)}))),"t-zgj-Delete"===o.name&&(s.JyElMessageBox.header.data="t-zgj-Delete",s.JyElMessageBox.content.data="请问确定要删除吗？",s.JyElMessageBox.show=!0)}const x=e=>{a.deleteRelatedCompany({relatedCompanyIds:s.relatedCompanyIds}).then((a=>{200===a.code&&(D.success(`${e}成功！`),s.JyElMessageBox.show=!1,m.value.reloadData())}))},F=(e,a)=>{s.relatedCompanyIds=[];const t=s.componentsBatch.selectionData=a;let o="";const l=[],n=[];t.forEach((e=>{l.push(`[${e.relatedCompanyName}]`),n.push(e.relatedCompanyId)})),s.relatedCompanyIds=n,o=l.join("、"),"t-zgj-seal.BatchDelete"===e.name&&(s.JyElMessageBox.header.data="t-zgj-seal.BatchDelete",s.JyElMessageBox.content.data=`已选中往来企业：${o}，请问确定要批量删除吗？`,s.JyElMessageBox.show=!0,s.JyElMessageBox.type="批量删除")};return v((()=>{})),(e,a)=>{const d=c("el-button"),r=c("el-dropdown-item"),v=c("el-dropdown-menu"),D=c("el-dropdown"),I=c("JyElMessageBox");return i(),p("div",null,[u(o,{url:"/tenant/relatedCompany/list",ref_key:"table",ref:m,needAutoRequest:!0,componentsSearchForm:y(s).componentsSearchForm,componentsTableHeader:y(s).componentsTable.header,componentsBatch:y(s).componentsBatch,tableClick:"relatedCompanyName",onCellClick:b,onCustomClick:w,onClickBatchButton:F},{title:g((()=>[h("div",S,[h("div",null,j(e.$t("t-zgj-F_CUSTOMER_MANAGE")),1),h("div",J,[h("div",M,[u(d,{type:"primary",onClick:a[0]||(a[0]=()=>{n.value=!0,y(s).title="t-zgj-add",y(s).column={}})},{default:g((()=>[A(" + "+j(e.$t("t-zgj-add")),1)])),_:1})]),h("div",k,[u(D,null,{dropdown:g((()=>[u(v,null,{default:g((()=>[u(r,null,{default:g((()=>[A(j(e.$t("t-zgj-importCustomer.title")),1)])),_:1})])),_:1})])),default:g((()=>[u(d,null,{default:g((()=>[R,h("span",null,j(e.$t("t-zgj-table.more.Operation")),1)])),_:1})])),_:1})])])])])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch"]),u(B,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value=e),modulesName:"dealing_unit",detailParams:l.value,importParams:e.importParams},null,8,["modelValue","detailParams","importParams"]),u(z,{showAdd:n.value,title:y(s).title,column:y(s).column,onOnCancel:f,onOnConfirm:C},null,8,["showAdd","title","column"]),u(I,{modelValue:y(s).JyElMessageBox.show,"onUpdate:modelValue":a[2]||(a[2]=e=>y(s).JyElMessageBox.show=e),show:y(s).JyElMessageBox.show,defaultAttribute:{},showClose:!1,onConfirmClick:a[3]||(a[3]=a=>{return t=e.$t(y(s).JyElMessageBox.header.data),void x(t);var t})},{header:g((()=>[h("div",T,[h("img",{src:y(s).JyElMessageBox.header.icon,alt:""},null,8,U),h("span",null,j(e.$t(y(s).JyElMessageBox.header.data)),1)])])),content:g((()=>[A(j(y(s).JyElMessageBox.content.data),1)])),_:1},8,["modelValue","show"])])}}},[["__scopeId","data-v-49cd03c2"]]))}}}));
