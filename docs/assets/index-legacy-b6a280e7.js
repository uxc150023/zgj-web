System.register(["./chunk-vform-legacy-9e71fe2f.js","./index-legacy-1a686847.js","./tree-legacy-bc0b7f78.js","./JyTable-legacy-1dc5603b.js","./actionMoreDialog-legacy-e3a254d0.js","./index-legacy-58f7c896.js","./index-legacy-a843cba5.js","./chunk-element-plus-legacy-cff7802d.js","./tree.vue_vue_type_style_index_0_scoped_c843ec9b_lang-legacy-893f98eb.js","./sangedian-legacy-75d81ddc.js","./Layout-legacy-ddb3d5bb.js","./searchForm-legacy-0db0fcbc.js","./ketanchude-legacy-4abaf206.js","./KDocumentTypeDialog-legacy-3b4e9ad0.js","./pagination-legacy-34422168.js","./batch-legacy-06a13475.js","./index-legacy-d43a85fb.js","./cha-kong-legacy-1ebc7b7b.js","./index-legacy-e7fe48d5.js","./yuan-hui-legacy-0c1e3d03.js","./index-legacy-ce14c29e.js","./home-back-legacy-d9a8ace4.js","./logo-legacy-7450937f.js","./request-util-legacy-a6f10f11.js","./main-legacy-4d8c855f.js"],(function(e,a){"use strict";var t,o,l,n,s,d,r,i,m,p,c,u,h,y,g,w,b,f,D,v,T,F,x,A,I,k,j,C,M=document.createElement("style");return M.textContent=".title[data-v-0ca073b5]{display:flex;align-items:center;justify-content:space-between}.header-div[data-v-0ca073b5]{display:flex;align-items:center}img[data-v-0ca073b5]{width:21px;margin-right:18px}span[data-v-0ca073b5]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:16px;line-height:24px;color:rgba(0,0,0,.85)}.content-div[data-v-0ca073b5]{padding-left:40px;margin-bottom:10px;font-size:14px}.scrollbar[data-v-0ca073b5]{padding:0 20px}.scrollbar .scrollbar-demo-item[data-v-0ca073b5]{display:flex;align-items:center;justify-content:center;height:50px;margin:20px;text-align:center;border-radius:4px;background:var(--el-color-primary-light-9);color:var(--el-color-primary)}\n",document.head.appendChild(M),{setters:[e=>{t=e.g,o=e._,l=e.E,n=e.Q,s=e.a3},e=>{d=e.default},e=>{r=e.c},e=>{i=e.J},e=>{m=e.a},e=>{p=e.a},e=>{c=e._},e=>{u=e.r,h=e.a5,y=e.b,g=e.a9,w=e.C,b=e.F,f=e.G,D=e.B,v=e.N,T=e.H,F=e.R,x=e.I,A=e.u,I=e.Q,k=e.J,j=e.V,C=e.W},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const M=e=>(j("data-v-0ca073b5"),e=e(),C(),e),V={class:"title"},U=M((()=>T("div",null,"表单管理",-1))),N={class:"header-div"},B=["src"],_={class:"content-div"},E=F(" 提交 "),L=F("取消"),J=M((()=>T("div",{class:"from-label"},"表单名称",-1))),z=F(" 提交 "),q=F("取消"),P={setup(e){const t=u(!1),j=u([]),C=h((()=>o((()=>a.import("./index-legacy-a64368f7.js")),void 0))),M=u([]),P=u(null),S=u(null),R=u(null),W=u(null),Y=u({formMessageId:"",formName:""}),H=y({componentsAddForm:{dialogVisible:!1,addTitle:"新增",data:{}},componentsSearchForm:{data:[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"表单名称/创建人"},options:[{value:"1",label:"全部"}]},{id:"sealUseTypeId",label:"用印类型",type:"select",inCommonUse:!0,defaultAttribute:{placeholder:"请选择"},options:[{sealUseTypeId:"1",sealUseTypeIdLabel:"物理用印"},{sealUseTypeId:"2",sealUseTypeIdLabel:"电子签章"}],optionLabel:"sealUseTypeIdLabel",optionValue:"sealUseTypeId"},{id:"updateTime",label:"更新时间",type:"picker",requestType:"array",startRequest:"updateStartTime",endRequest:"updateEndTime",defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":e=>e.getTime()>Date.now(),"default-value":[new Date((new Date).setMonth((new Date).getMonth()-1)),new Date]},style:{}},{id:"relationFlow",label:"是否关联流程",type:"select",defaultAttribute:{placeholder:"请选择"},options:[{relationFlow:"1",relationFlowLabel:"是"},{relationFlow:"0",relationFlowLabel:"否"}],optionLabel:"relationFlowLabel",optionValue:"relationFlow"}],butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:[{prop:"formName",label:"表单名称",sortable:!0,"min-width":150,fixed:"left",show:!0},{prop:"applyTypeName",label:"业务类型",sortable:!0,"min-width":150,show:!0},{prop:"sealUseTypeName",label:"用印类型",sortable:!0,"min-width":150,show:!0},{prop:"relationFlow",label:"是否关联流程","min-width":150,type:"format",statusList:[{label:"是",key:"1"},{label:"否",key:"0"}],show:!0},{prop:"createUserName",label:"创建人",sortable:!0,"min-width":150,show:!0},{prop:"modifyDatetimeStr",label:"更新时间",width:190,sortable:!0,show:!0},{prop:"8",label:"操作",fixed:"right",width:200,align:"center",rankDisplayData:[{name:"t-zgj-Edit"},{name:"t-zgj-Delete"},{name:"t-zgj-qyWechat.Copy"}],show:!0}]},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量删除"}],butDatas:[{name:"知道了",type:"",clickName:ae}]},componentsTree:{data:[],defaultAttribute:{"check-on-click-node":!1,"show-checkbox":!1,"default-expand-all":!0,"expand-on-click-node":!1,"check-strictly":!0,"highlight-current":!0,"node-key":"applyTypeId","current-node-key":"2"},defaultProps:{label:"applyTypeName",children:"children"},value:""},JyElMessageBox:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""},data:{}},showFormDialog:{show:!1,header:{data:""},content:{data:""}},showToastDialog:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}},showRelatedfFlow:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}},showDeleteForm:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}}}),Q=(e,a)=>{1!==a.level?(S.value=e.applyTypeId?{applyTypeId:e.applyTypeId}:null,"5"===e.applyTypePid?(H.componentsTable.header=[{prop:"formName",label:"表单名称",sortable:!0,"min-width":150,fixed:!0},{prop:"applyTypeName",label:"业务类型",sortable:!0,"min-width":150},{prop:"createUserName",label:"创建人",sortable:!0,"min-width":150},{prop:"modifyDatetime",label:"更新时间",width:190,sortable:!0},{prop:"8",label:"操作",fixed:"right",width:200,align:"center",rankDisplayData:[{name:"t-zgj-Edit"},{name:"t-zgj-Delete"},{name:"t-zgj-qyWechat.Copy"}]}],H.componentsSearchForm.data=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"表单名称/创建人"},options:[{value:"1",label:"全部"}]},{id:"modifyDatetime",label:"更新时间",type:"picker",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间"},style:{}},{id:"modifyDatetime",label:"是否关联流程",type:"select",inCommonUse:!0,defaultAttribute:{placeholder:"请选择"},options:[{relationFlow:"1",relationFlowLabel:"是"},{relationFlow:"0",relationFlowLabel:"否"}],optionLabel:"relationFlowLabel",optionValue:"relationFlow"}]):(H.componentsTable.header=[{prop:"formName",label:"表单名称",sortable:!0,"min-width":150,fixed:!0},{prop:"applyTypeName",label:"业务类型",sortable:!0,"min-width":150},{prop:"sealUseTypeName",label:"用印类型",sortable:!0,"min-width":150},{prop:"createUserName",label:"创建人",sortable:!0,"min-width":150},{prop:"modifyDatetime",label:"更新时间",width:190,sortable:!0},{prop:"8",label:"操作",fixed:"right",width:200,align:"center",rankDisplayData:[{name:"t-zgj-Edit"},{name:"t-zgj-Delete"},{name:"t-zgj-qyWechat.Copy"}]}],H.componentsSearchForm.data=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"表单名称/创建人"},options:[{value:"1",label:"全部"}]},{id:"sealUseTypeId",label:"用印类型",type:"select",inCommonUse:!0,defaultAttribute:{placeholder:"请选择"},options:[{sealUseTypeId:"1",sealUseTypeIdLabel:"物理用印"},{sealUseTypeId:"2",sealUseTypeIdLabel:"电子签章"}],optionLabel:"sealUseTypeIdLabel",optionValue:"sealUseTypeId"},{id:"modifyDatetime",label:"更新时间",type:"picker",defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间"},style:{}},{id:"relationFlow",label:"是否关联流程",type:"select",defaultAttribute:{placeholder:"请选择"},options:[{relationFlow:"1",relationFlowLabel:"是"},{relationFlow:"2",relationFlowLabel:"否"}],optionLabel:"relationFlowLabel",optionValue:"relationFlow"}]),P.value.reloadData()):W.value.setCurrentKey("5"===e.applyTypeId?"6":"2")};function $(){H.componentsAddForm.dialogVisible=!0,H.componentsAddForm.addTitle="新建",H.componentsAddForm.data={}}async function K(e,a,t,o){"t-zgj-Edit"===t.name&&ne(a.formMessageId,a,"edit"),"t-zgj-Delete"===t.name&&ne(a.formMessageId,a,"delete"),"t-zgj-qyWechat.Copy"===t.name&&(Y.value={...Y.value,...a},H.showFormDialog.header.data="表单复制",H.showFormDialog.show=!0,H.componentsAddForm.data.formName=`${Y.value.formName}-副本`)}function G(){const e={formMessageId:H.JyElMessageBox.data.tableId};p.formDelete(e).then((a=>{a.data.length>0?(H.showToastDialog.header.data="删除",H.showToastDialog.content.data="当前表单关联了以下流程，不允许删除",H.showToastDialog.show=!0,H.showToastDialog.header.icon="/src/assets/svg/common/danger.svg",H.componentsBatch.butDatas=[{name:"知道了",type:"primary",clickName:ae}]):p.formPage(e).then((e=>{P.value.reloadData()}))})),H.JyElMessageBox.show=!1}function O(e,a){H.componentsBatch.selectionData=a,R.value={header:{data:"批量删除"},content:{data:"是否删除表单？"}},H.showToastDialog.show=!0}const Z=(e,a,o,l)=>{"formName"===a.property&&(t.value=!0,j.value=[{value:"detail",params:{formMessageId:e.formMessageId}},{value:"record",params:{operationId:e.formMessageId}},{value:"version",params:{formMessageId:e.formMessageId}}])},X=()=>{P.value.reloadData()},ee=()=>{const e=H.componentsBatch.selectionData,a={formMessageIds:[]};e.forEach((e=>{a.formMessageIds.push(e.formMessageId)})),p.batchDelete(a).then((e=>{e.data.length>0?(H.showToastDialog.header.data="删除",H.showToastDialog.content.data="选中的以下表单已关联了流程，不允许删除",H.showToastDialog.show=!0,H.showToastDialog.header.icon="/src/assets/svg/common/danger.svg",H.componentsBatch.butDatas=[{name:"知道了",type:"primary",clickName:ae}]):(H.showToastDialog.show=!1,P.value.reloadData())}))};function ae(){H.showToastDialog.show=!1}function te(){H.showFormDialog.show=!1}const oe=u(null);async function le(){try{await oe.value.validate(),Y.value.formName=H.componentsAddForm.data.formName,await async function(){const e=await p.copy({formMessageId:Y.value.formMessageId,formName:Y.value.formName});s("表单复制成功"),await P.value.reloadData(),H.componentsAddForm.data.formMessageId=e.data}(),H.showFormDialog.show=!1,H.componentsAddForm.dialogVisible=!0,H.componentsAddForm.addTitle="修改"}catch(e){l(e)}}async function ne(e,a,t){const o=await n.flowList({formMessageId:e});o.data&&0!==o.data.length?(H.showRelatedfFlow.show=!0,R.value={header:"提示",content:"当前表单被已启用的以下流程所使用，仅当以下流程停用才允许"+("edit"===t?"修改":"删除"),selectionData:o.data}):"edit"===t?(H.componentsAddForm.dialogVisible=!0,H.componentsAddForm.addTitle="修改",H.componentsAddForm.data=a):(H.JyElMessageBox.header.data="删除",H.JyElMessageBox.content.data="请问确定要删除该表单吗？",H.JyElMessageBox.show=!0,H.JyElMessageBox.data.tableId=a.formMessageId)}return g((()=>{p.listApplyTypeTree().then((e=>{const{data:a}=e,t=[];M.value=a,a.forEach((e=>{if(null===e.applyTypePid)e.children=[],e.disabled=!1,t.push(e);else{const a=t.findIndex((a=>a.applyTypeId===e.applyTypePid));a>-1&&t[a].children.push(e)}})),H.componentsTree.data=t,H.componentsTree.value=t[0].children[0].applyTypeId,S.value={applyTypeId:"2"},P.value.reloadData()}))})),(e,a)=>{const o=w("el-button"),l=w("JyElMessageBox"),n=w("el-input"),s=w("el-form-item"),p=w("el-form"),u=d;return b(),f("div",null,[D(i,{url:"/form/page",ref_key:"table",ref:P,hasTree:!0,needAutoRequest:!1,componentsSearchForm:A(H).componentsSearchForm,componentsTableHeader:A(H).componentsTable.header,componentsBatch:A(H).componentsBatch,queryParams:S.value,statusColoum:"flag",openValue:"0",tableClick:"formName",onCellClick:Z,onCustomClick:K,onClickBatchButton:O},{title:v((()=>[T("div",V,[U,T("div",null,[D(o,{type:"primary",onClick:$},{default:v((()=>[F("+ "+x(e.$t("t-zgj-add")),1)])),_:1})])])])),tree:v((()=>[T("div",null,[A(H).componentsTree.value?(b(),I(A(r),{key:0,ref_key:"tree",ref:W,modelValue:A(H).componentsTree.value,"onUpdate:modelValue":a[0]||(a[0]=e=>A(H).componentsTree.value=e),data:A(H).componentsTree.data,defaultAttribute:A(H).componentsTree.defaultAttribute,defaultProps:A(H).componentsTree.defaultProps,onCurrentChange:Q},null,8,["modelValue","data","defaultAttribute","defaultProps"])):k("",!0)])])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch","queryParams"]),A(H).componentsAddForm.dialogVisible?(b(),I(A(C),{key:0,modelValue:A(H).componentsAddForm.dialogVisible,"onUpdate:modelValue":a[1]||(a[1]=e=>A(H).componentsAddForm.dialogVisible=e),addTitle:A(H).componentsAddForm.addTitle,columnData:A(H).componentsAddForm.data,onClose:a[2]||(a[2]=e=>A(H).componentsAddForm.dialogVisible=!1),onReloadData:X,optionData:A(H).componentsTree.data},null,8,["modelValue","addTitle","columnData","optionData"])):k("",!0),D(l,{modelValue:A(H).JyElMessageBox.show,"onUpdate:modelValue":a[4]||(a[4]=e=>A(H).JyElMessageBox.show=e),show:A(H).JyElMessageBox.show,defaultAttribute:{}},{header:v((()=>[T("div",N,[T("img",{src:A(H).JyElMessageBox.header.icon,alt:""},null,8,B),T("span",null,x(A(H).JyElMessageBox.header.data),1)])])),content:v((()=>[T("div",_,x(A(H).JyElMessageBox.content.data),1)])),footer:v((()=>[D(o,{type:"primary",onClick:G},{default:v((()=>[E])),_:1}),D(o,{onClick:a[3]||(a[3]=e=>A(H).JyElMessageBox.show=!1)},{default:v((()=>[L])),_:1})])),_:1},8,["modelValue","show"]),D(l,{modelValue:A(H).showFormDialog.show,"onUpdate:modelValue":a[6]||(a[6]=e=>A(H).showFormDialog.show=e),show:A(H).showFormDialog.show,defaultAttribute:{}},{header:v((()=>[F(x(A(H).showFormDialog.header.data),1)])),content:v((()=>[D(p,{ref_key:"formRef",ref:oe,"label-position":"left","label-width":"100px",model:A(H).componentsAddForm.data,"hide-required-asterisk":""},{default:v((()=>[D(s,{prop:"formName",rules:[{required:!0,message:"表单名称不能为空",trigger:"blur"}]},{label:v((()=>[J])),default:v((()=>[D(n,{modelValue:A(H).componentsAddForm.data.formName,"onUpdate:modelValue":a[5]||(a[5]=e=>A(H).componentsAddForm.data.formName=e),placeholder:"请输入",style:{width:"210px"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),footer:v((()=>[D(o,{type:"primary",onClick:le},{default:v((()=>[z])),_:1}),D(o,{onClick:te},{default:v((()=>[q])),_:1})])),_:1},8,["modelValue","show"]),D(A(m),{"onUpdate:modelValue":a[7]||(a[7]=e=>A(H).showToastDialog.show=!1),show:A(H).showToastDialog.show,selectionData:A(H).componentsBatch.selectionData,showToastDialogContent:R.value,label:"formName",onSureAction:ee},null,8,["show","selectionData","showToastDialogContent"]),D(u,{"onUpdate:modelValue":a[8]||(a[8]=e=>A(H).showRelatedfFlow.show=!1),show:A(H).showRelatedfFlow.show,selectionData:A(H).componentsBatch.selectionData,showToastDialogContent:R.value,label:"flowName"},null,8,["show","selectionData","showToastDialogContent"]),D(A(m),{"onUpdate:modelValue":a[9]||(a[9]=e=>A(H).showDeleteForm.show=!1),show:A(H).showDeleteForm.show,selectionData:A(H).componentsBatch.selectionData,showToastDialogContent:R.value,label:"flowName",onSureAction:a[10]||(a[10]=e=>A(H).showDeleteForm.show=!1)},null,8,["show","selectionData","showToastDialogContent"]),D(c,{modelValue:t.value,"onUpdate:modelValue":a[11]||(a[11]=e=>t.value=e),modulesName:"system_form_management",detailParams:j.value},null,8,["modelValue","detailParams"])])}}};e("default",t(P,[["__scopeId","data-v-0ca073b5"]]))}}}));
