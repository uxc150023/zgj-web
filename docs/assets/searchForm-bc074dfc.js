import{i as e,P as a,B as l,S as t,T as s}from"./chunk-vform-ec6574e8.js";import{a as o,at as c,e as u,b as n,a9 as d,aQ as i,W as p,X as b,Y as r,ap as y,ai as m,a3 as v,aE as f,ae as h,u as x,am as k,an as V,ao as g,af as U,aG as w,ah as A,ad as S,ac as D,aK as C,aX as B}from"./chunk-ant-design-vue-a1de3c57.js";import{_ as j}from"./ketanchude-a94e84bc.js";import{K as I}from"./KDocumentTypeDialog-21febff4.js";const N="/zgj-web/assets/anniu-xuanzhong-adff5261.svg",O={class:"components-searchForm"},z={class:"fromData"},q={key:0,class:"ap-box-cont input"},_={key:0,class:"ap-box-label-necessary"},T={class:"ap-box-contBox"},L={key:1,class:"ap-box-cont derivable"},$={key:0,class:"ap-box-label-necessary"},K={class:"ap-box-contBox width-0"},E=["onClick"],P=[r("img",{class:"ap-box-contBox-icon-img",src:j,alt:""},null,-1)],R={key:2,class:"ap-box-cont derivable"},F={key:0,class:"ap-box-label-necessary"},G={class:"ap-box-contBox width-0"},J=r("div",{class:"ap-box-contBox-icon"},[r("img",{class:"ap-box-contBox-icon-img",src:j,alt:""})],-1),X={key:3,class:"ap-box-cont select"},H={key:0,class:"ap-box-label-necessary"},Q={class:"ap-box-contBox"},W={key:4,class:"ap-box-cont picker"},Y={key:0,class:"ap-box-label-necessary"},M={class:"ap-box-contBox width-0"},Z={key:5,class:"ap-box-cont checkbox"},ee={key:0,class:"ap-box-label-necessary"},ae={key:6,class:"ap-box-cont radio"},le={class:"ap-box-autoBox"},te={key:7,class:"ap-box-cont cascader"},se={key:0,class:"ap-box-label-necessary"},oe={class:"ap-box-contBox"},ce={key:8,class:"ap-box-cont switch"},ue={key:0,class:"ap-box-label-necessary"},ne={class:"ap-box-contBox"},de={key:9,class:"ap-box-cont radioButton"},ie={key:0,class:"ap-box-label-necessary"},pe={class:"ap-box-contBox"},be=["onClick"],re=r("img",{class:"custom-button-checkIcon",src:N,alt:""},null,-1),ye={key:10,class:"ap-box-cont checkButton"},me={key:0,class:"ap-box-label-necessary"},ve={class:"ap-box-contBox"},fe=["onClick"],he=r("img",{class:"custom-button-checkIcon",src:N,alt:""},null,-1),xe={key:11,class:"ap-box-cont scopeInput"},ke={key:0,class:"ap-box-label-necessary"},Ve={class:"ap-box-contBox"},ge={class:"ap-box-contBox-start"},Ue=r("div",{class:"ap-box-contBox-cut"}," - ",-1),we={class:"ap-box-contBox-end"},Ae={key:12,class:"ap-box-cont custom"},Se={key:0,class:"ap-box-label-necessary"},De=["onClick"],Ce={key:0,class:"unfold-"},Be=r("img",{class:"unfold-icon",src:"/zgj-web/assets/xiangxia-lan-b1289975.svg",alt:"",srcset:""},null,-1),je={key:1},Ie=r("img",{class:"unfold-icon",src:"/zgj-web/assets/xiangshang-lan-49ab5dfe.svg",alt:"",srcset:""},null,-1),Ne=["onClick"],Oe={props:{refs:{type:String,default:""},type:{type:String,default:"0"},data:{type:Array,default:()=>[]},butData:{type:Array,default:()=>[]},style:{type:Object,default:()=>({lineStyle:{width:"calc(100% / 3)"},cutOffRuleStyle:{width:"100%"},labelStyle:{width:"100px"},butLayoutStyle:{width:"100%","justify-content":"center"}})},defaultAttribute:{type:Object,default:()=>({isUnfold:!1,"scrollbar-max-height":"auto","border-bottom":!0})}},emits:["clickSubmit","reloadData"],setup(j,{expose:N,emit:Oe}){const ze=j,qe=o(!1),_e=o(!1),Te=o([]),Le=o([]),$e=o([]),Ke=o(null),Ee=o(null),Pe=o(!1),Re=o(!1),Fe=o(null),Ge=o(null),Je=o(null),Xe=o(null),He=c({props:{defaultAttribute:{isUnfold:!1,"scrollbar-max-height":"auto","border-bottom":!0}},cache:{cutOffRuleStyle:{width:"100%"},isUnfold:0,formData:[],showUnfold:!1}}),Qe=e("accountInfo")&&e("accountInfo").userInfo?e("accountInfo").userInfo.userId:"",We=o({userId:Qe}),Ye=u((()=>(e,a)=>{const l=["custom","checkbox","radio","switch","radioButton","checkButton"],t=[];return l.indexOf(e.type)>-1&&a<He.cache.formData.length-1?{width:"100%"}:l.indexOf(e.type)>-1&&a===He.cache.formData.length-1?{width:"auto","min-width":"calc(100% / 3 * 2 + 100px)"}:t.indexOf(e.type)>-1&&a<He.cache.formData.length-1||t.indexOf(e.type)>-1&&a===He.cache.formData.length-1?{width:"auto"}:{}}));function Me(){if(ze.defaultAttribute)for(const e in ze.defaultAttribute)He.props.defaultAttribute[e]=ze.defaultAttribute[e];ea()}const Ze=u({get:()=>ze.data});function ea(e,a){const t=e||Ze.value;let s=!1;ze.defaultAttribute.isUnfold&&(He.cache.isUnfold=ze.defaultAttribute.isUnfold),t.forEach((e=>{if(e.inCommonUse||(s=!0),e.requestObj){"GET"===e.requestObj.method?e.requestObj.params=a:e.requestObj.data=a;const t=o(!1);"flow"!==e.requestObj.type||a||(t.value=!0),!t.value&&l(e.requestObj).then((a=>{e.options=a.data}))}})),He.cache.showUnfold=s,aa(t)}function aa(e){const a=e||Ze.value;let l=[];0===He.cache.isUnfold?a.map((e=>(e.inCommonUse&&l.push(e),e))):1===He.cache.isUnfold&&(l=a),He.cache.formData=l}function la(){Oe("reloadData")}n((()=>ze.data),(()=>{He.cache.isUnfold=0,Me()}));const ta={},sa=o(!0),oa=o(!0);const ca=e=>{const a=He.cache.formData.findIndex((e=>e.id===Ee.value));a>-1&&(He.cache.formData[a].defaultAttribute.multiple?He.cache.formData[a].values=e.map((e=>e.id)):He.cache.formData[a].values=e[0].id,He.cache.formData[a].options=e.map((e=>({label:e.name,value:e.id}))))};function ua(e,a){Oe("clickSubmit",e,a)}function na(){0===He.cache.isUnfold?He.cache.isUnfold=1:1===He.cache.isUnfold&&(He.cache.isUnfold=0),aa()}function da(e){e||Oe("reloadData")}function ia(e,a){Xe.value=e.defaultAttribute.multiple?"checkbox":"radio","JyRelatedCompany"===e.defaultAttribute.type?(Pe.value=!0,Ge.value=e.values):"JySelectSeal"===e.defaultAttribute.type&&(Re.value=!0,Fe.value=e.defaultAttribute.multiple?e.options:e.values),Je.value=e.id}function pa(e){Pe.value=!1;const a=He.cache.formData.findIndex((e=>e.id===Je.value));a>-1&&(He.cache.formData[a].defaultAttribute.multiple?(He.cache.formData[a].values=e.map((e=>e.relatedCompanyId)),He.cache.formData[a].options=e.map((e=>({label:e.relatedCompanyName,value:e.relatedCompanyId})))):(He.cache.formData[a].values=e.relatedCompanyId,He.cache.formData[a].options=[{label:e.relatedCompanyName,value:e.relatedCompanyId}]))}function ba(e){Re.value=!1;const a=He.cache.formData.findIndex((e=>e.id===Je.value));a>-1&&(He.cache.formData[a].defaultAttribute.multiple?(He.cache.formData[a].values=e.map((e=>e.sealId)),He.cache.formData[a].options=e.map((e=>({label:e.sealName,value:e.sealId,...e})))):(He.cache.formData[a].values=e.sealId,He.cache.formData[a].options=[{label:e.sealName,value:e.sealId,...e}]))}const ra=()=>{qe.value=!1},ya=e=>{if(!e||0===e.length)return;const a=He.cache.formData.findIndex((e=>e.id===Ke.value));a>-1&&(He.cache.formData[a].defaultAttribute.multiple?He.cache.formData[a].values=e.map((e=>e.id)):He.cache.formData[a].values=e[0].id,He.cache.formData[a].options=e.map((e=>({label:e.name,value:e.id}))))};return d((()=>{Me()})),N({initFormData:ea}),(e,l)=>{const o=i("el-input"),c=i("el-option"),u=i("el-select"),n=i("el-date-picker"),d=i("el-checkbox"),j=i("el-radio"),N=i("el-radio-group"),Oe=i("el-cascader"),Je=i("el-switch"),Qe=i("el-button"),Me=i("el-scrollbar"),Ze=t,ea=s;return p(),b("div",O,[r("div",{class:S(["ap-dis",{"border-bottom":!1!==x(He).props.defaultAttribute["border-bottom"]}])},[y(Me,{"max-height":x(He).props.defaultAttribute["scrollbar-max-height"],class:"fromData-scrollbar"},{default:m((()=>[r("div",z,[(p(!0),b(v,null,f(x(He).cache.formData,((a,l)=>(p(),b("div",{class:"ap-box",key:l,style:h([ze.style.lineStyle,a.style,x(Ye)(a,l)])},["input"==a.type?(p(),b("div",q,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},[a.isNecessary?(p(),b("span",_,"*")):k("",!0),V(" "+g(a.label),1)],4),r("div",T,[y(o,U({class:"width-100"},a.defaultAttribute,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,clearable:"",onKeyup:w(la,["enter"])}),null,16,["modelValue","onUpdate:modelValue","onKeyup"])])])):"dialog"==a.type?(p(),b("div",L,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},[a.isNecessary?(p(),b("span",$," * ")):k("",!0),V(" "+g(a.label),1)],4),r("div",K,[y(u,U({modelValue:a.values,"onUpdate:modelValue":e=>a.values=e},a.defaultAttribute,{"tag-type":"waring",disabled:"",style:{width:"100%"},class:a.defaultAttribute.multiple&&a.values.length||!a.defaultAttribute.multiple&&a.values?"hasContent":"",onClick:e=>ia(a)}),{default:m((()=>[(p(!0),b(v,null,f(a.options,(e=>(p(),A(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue","class","onClick"]),r("div",{class:"ap-box-contBox-icon",onClick:e=>ia(a)},P,8,E)])])):"derivable"==a.type?(p(),b("div",R,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},[a.isNecessary?(p(),b("span",F," * ")):k("",!0),V(" "+g(a.label),1)],4),r("div",G,[y(u,U({modelValue:a.values,"onUpdate:modelValue":e=>a.values=e},a.defaultAttribute,{ref_for:!0,ref:e=>((e,a)=>{e&&(ta[a.id]=e)})(e,a),"collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":2,style:{width:"100%"},"popper-class":"popperHidden",class:a.defaultAttribute.multiple&&a.values&&a.values.length||!a.defaultAttribute.multiple&&a.values?"hasContent":"",onClick:e=>function(e,a,l){if(ta[e.id].blur(),"fileType"===e.defaultAttribute.type)return _e.value=!0,sa.value=l,void(Ee.value=e.id);qe.value=!0,Ee.value=e.id,Ke.value=e.id,oa.value=l,"user"===e.defaultAttribute.type?(Te.value=["user"],$e.value=[]):(Te.value=["organ"],$e.value=[])}(a,0,a.defaultAttribute.multiple)}),{default:m((()=>[(p(!0),b(v,null,f(a.options,(e=>(p(),A(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue","class","onClick"]),J])])):"select"==a.type?(p(),b("div",X,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},[a.isNecessary?(p(),b("span",H," * ")):k("",!0),V(" "+g(a.label),1)],4),r("div",Q,[y(u,U({class:"width-100"},a.defaultAttribute,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,clearable:"",multiple:!!a.defaultAttribute&&a.defaultAttribute.multiple,onChange:la,filterable:a.filterable}),{default:m((()=>[(p(!0),b(v,null,f(a.options,(e=>(p(),A(c,{key:e[a.optionValue||"value"],label:e[a.optionLabel||"label"],value:e[a.optionValue||"value"]},null,8,["label","value"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue","multiple","filterable"])])])):"picker"==a.type?(p(),b("div",W,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},[a.isNecessary?(p(),b("span",Y,"*")):k("",!0),V(" "+g(a.label),1)],4),r("div",M,[y(n,U({class:"width-100"},a.defaultAttribute,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onChange:da}),null,16,["modelValue","onUpdate:modelValue"])])])):"checkbox"==a.type?(p(),b("div",Z,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},[a.isNecessary?(p(),b("span",ee,"*")):k("",!0),V(" "+g(a.label),1)],4),(p(!0),b(v,null,f(a.checkbox,((e,a)=>(p(),b("div",{class:"ap-box-autoBox checkbox",key:a},[y(d,U(e.defaultAttribute,{style:e.style,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a}),null,16,["style","modelValue","onUpdate:modelValue"])])))),128))])):"radio"==a.type?(p(),b("div",ae,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},g(a.label),5),r("div",le,[y(N,U(a.defaultAttribute,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onChange:la}),{default:m((()=>[(p(!0),b(v,null,f(a.radio,((e,a)=>(p(),A(j,{key:a,label:e.label},{default:m((()=>[V(g(e.name),1)])),_:2},1032,["label"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])])])):"cascader"==a.type?(p(),b("div",te,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},[a.isNecessary?(p(),b("span",se,"*")):k("",!0),V(" "+g(a.label),1)],4),r("div",oe,[y(Oe,U({class:"width-100",style:{width:"100%"}},a.defaultAttribute,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onChange:la}),null,16,["modelValue","onUpdate:modelValue"])])])):"switch"==a.type?(p(),b("div",ce,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},[a.isNecessary?(p(),b("span",ue,"*")):k("",!0),V(" "+g(a.label),1)],4),r("div",ne,[y(Je,U(a.defaultAttribute,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e}),null,16,["modelValue","onUpdate:modelValue"])])])):"radioButton"==a.type?(p(),b("div",de,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},[a.isNecessary?(p(),b("span",ie,"*")):k("",!0),V(" "+g(a.label),1)],4),r("div",pe,[(p(!0),b(v,null,f(a.data,((e,l)=>(p(),b("div",{class:"button-contBox",key:l},[r("div",{class:S(["custom-button",{checked:!!e.checked}]),style:h(a.style),onClick:t=>function(e,a,l){a.checked?e[l].checked=!1:(e.forEach((e=>{e.checked=!1})),e[l].checked=!0)}(a.data,e,l)},[V(g(e.name)+" ",1),re],14,be)])))),128))])])):"checkButton"==a.type?(p(),b("div",ye,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},[a.isNecessary?(p(),b("span",me,"*")):k("",!0),V(" "+g(a.label),1)],4),r("div",ve,[(p(!0),b(v,null,f(a.data,((e,l)=>(p(),b("div",{class:"button-contBox",key:l},[r("div",{class:S(["custom-button",{checked:!!e.checked}]),style:h(a.style),onClick:t=>function(e,a,l){a.checked?e[l].checked=!1:e[l].checked=!0}(a.data,e,l)},[V(g(e.name)+" ",1),he],14,fe)])))),128))])])):k("",!0),"scopeInput"==a.type?(p(),b("div",xe,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},[a.isNecessary?(p(),b("span",ke,"*")):k("",!0),V(" "+g(a.label),1)],4),r("div",Ve,[r("div",ge,[y(o,U({class:"width-100"},a.startAttribute,{modelValue:a.startValue,"onUpdate:modelValue":e=>a.startValue=e}),null,16,["modelValue","onUpdate:modelValue"])]),Ue,r("div",we,[y(o,U({class:"width-100"},a.endAttribute,{modelValue:a.endValue,"onUpdate:modelValue":e=>a.endValue=e}),null,16,["modelValue","onUpdate:modelValue"])])])])):"custom"==a.type?(p(),b("div",Ae,[r("div",{class:"ap-box-label",style:h(ze.style.labelStyle)},[a.isNecessary?(p(),b("span",Se,"*")):k("",!0),V(" "+g(a.label),1)],4),(p(!0),b(v,null,f(a.data,((a,l)=>(p(),b("div",{class:"ap-box-contBox",key:l},[D(e.$slots,a.id)])))),128))])):k("",!0)],4)))),128)),r("div",{class:"butData",style:h(ze.style.butLayoutStyle)},[(p(!0),b(v,null,f(ze.butData,((a,l)=>(p(),b("div",{class:"ap-box",key:l,style:h(a.style)},["click"==a.type?(p(),b("div",{key:0,class:"ap-box-cont",onClick:e=>ua(a,l)},[y(Qe,C(B(a.defaultAttribute)),{default:m((()=>[V(g("重置"===a.name?e.$t("t-zgj-reset"):"查询"===a.name?e.$t("t-zgj-query"):"t-zgj-reset"===a.name?e.$t("t-zgj-reset"):"t-zgj-query"===a.name?e.$t("t-zgj-query"):"-"),1)])),_:2},1040)],8,De)):k("",!0),"unfold"==a.type&&x(He).cache.showUnfold?(p(),b("div",{key:1,class:"ap-box-cont unfold",onClick:na},[0==x(He).cache.isUnfold?(p(),b("div",Ce,[V(g(e.$t("t-zgj-unfold"))+" ",1),Be])):1==x(He).cache.isUnfold?(p(),b("div",je,[V(g(e.$t("t-zgj-fold"))+" ",1),Ie])):k("",!0)])):k("",!0),"text"==a.type?(p(),b("div",{key:2,class:"ap-box-cont",onClick:e=>ua(a,l)},g(a.name),9,Ne)):k("",!0)],4)))),128))],4)])])),_:3},8,["max-height"])],2),qe.value?(p(),A(x(a),{key:0,show:qe.value,"onUpdate:show":ra,searchSelected:$e.value,"onUpdate:searchSelected":ya,tabsShow:Te.value,multiple:oa.value,haveIncluded:!1},null,8,["show","searchSelected","tabsShow","multiple"])):k("",!0),y(Ze,{modelValue:Pe.value,"onUpdate:modelValue":l[0]||(l[0]=e=>Pe.value=e),onOnSubmit:pa,checkType:Xe.value,haveSelectList:Ge.value},null,8,["modelValue","checkType","haveSelectList"]),y(ea,{modelValue:Re.value,"onUpdate:modelValue":l[1]||(l[1]=e=>Re.value=e),haveSelectList:Fe.value,checkType:Xe.value,onOnSubmit:ba},null,8,["modelValue","haveSelectList","checkType"]),y(x(I),{show:_e.value,"onUpdate:show":l[2]||(l[2]=e=>_e.value=e),searchSelected:Le.value,"onUpdate:searchSelected":ca,multiple:sa.value,queryParams:We.value},null,8,["show","searchSelected","multiple","queryParams"])])}}};export{Oe as _};
