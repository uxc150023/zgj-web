import{_ as e}from"./back-bdc75944.js";import{c as a}from"./Layout-a5f6ee71.js";import{v as l,I as t,h as s,r as o,o as n,c as i,a as p,w as r,m,u as c,g as u,cv as d}from"./main-e75bd94c.js";import{J as h}from"./JyTable-735e5f88.js";import{c as y}from"./documentsDetails-e4b559a6.js";import{a as b}from"./sealApplyIntellect-5e0da576.js";import{s as g}from"./listApprovingJson-a70956ef.js";import{a as D}from"./actionOneDialog-4ff87827.js";import{a as v}from"./actionMoreDialog-c32f63c4.js";import"./sangedian-6ea00dcf.js";import"./searchForm-6ca4b4e4.js";import"./ketanchude-a94e84bc.js";import"./KDocumentTypeDialog-6b47a1ba.js";import"./pagination-10abb664.js";import"./batch-99f4afc3.js";import"./index-7c7937e4.js";import"./cha-kong-c10eac4e.js";import"./JyTabs-82aef442.js";/* empty css                                                               */import"./table-d1366238.js";/* empty css                                                                         */import"./portion-ad7469a7.js";/* empty css                                                                */import"./yuan-hui-31c99901.js";const f={class:"breadcrumb"},w=u(" 用印记录 "),S=u(" 查看已作废单据 "),j={class:"title"},x={class:"title-desc"},A=u(" 查看已作废单据 "),B=m("div",null,null,-1),I={class:"ap-box"},_={name:"VoidApply"},J=Object.assign(_,{setup(u){const _=l(null),J=t(),M=l(null),N=s({componentsTitle:{more:{data:[{name:"查看已作废的单据",codle:"1"}]}},componentsSearchForm:{data:g,butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:[{prop:"useSealFileName",label:"文件名称","min-width":150,fixed:"left",show:!0},{prop:"useSealApplyNo",label:"单据编号",width:180,show:!0},{prop:"fileTypeName",label:"文件类型","min-width":150,show:!0},{prop:"sealName",label:"印章名称","min-width":150,show:!0},{prop:"applyUserName",label:"申请人","min-width":150,show:!0},{prop:"applyOrganName",label:"申请部门","min-width":150,show:!0},{prop:"applyStatus",label:"审批状态",align:"center",width:150,show:!0},{prop:"useSealStateName",label:"用印状态",align:"center",width:150,show:!0},{prop:"applyDatetime",label:"申请时间",width:180,show:!0},{prop:"caozuo",label:"操作",fixed:"right","min-width":150,show:!0,align:"center",rankDisplayData:[{name:"t-zgj-sealInfoDelete.restore"},{name:"t-zgj-File.Delete"}]}]},componentsDocumentsDetails:{show:!1,visible:[{label:"用印详情",name:"Details-of-Printing"},{label:"审批流程",name:"approval-process"},{label:"领用记录",name:"Record-of-requisition"},{label:"操作记录",name:"operating-record"}]},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"t-zgj-seal.BatchDelete"}]},JyElMessageBox:{type:"",column:{},flag:"",show:!1,header:{data:""},content:{data:""}},computedData:[],showToastDialog:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}}});function E(e,a,l,t){"useSealFileName"===a.property&&(N.componentsDocumentsDetails.show=!0,b.sealBaseInfo({useSealApplyId:e.useSealApplyId}).then((e=>{const a=e.data,l=[{label:"文件名称",value:a.useSealFileName},{label:"单据编码",value:a.useSealApplyNo},{label:"文件类型",value:a.fileTypeName},{label:"文件份数",value:(a.useSealFileNum||0)+"份"},{label:"金额",value:a.totalMoney||"-"},{label:"申请事由",value:a.useSealInfo},{label:"盖章码",value:a.sealCode||"-"},{label:"申请人员",value:a.applyUserName},{label:"申请时间",value:a.applyDatetime},{label:"所属部门",value:a.applyOrganName},{label:"单据状态",value:"APPROVAL"===a.useSealStateId?"用印审批中":"USING"===a.useSealStateId?"智能用印中":"",iconPath:"yuanLv",iconStyle:{},valStyle:{color:"var(--jy-success-6)"}}];a.listSeal.length&&(1===a.listSeal.length?l.splice(l.length-5,0,{label:"印章名称",value:a.listSeal[0].useSealApplySealInfoDto.sealName},{label:"常规盖章",value:a.listSeal[0].useSealApplySealNumDto.applySealNum+"次"}):a.listSeal.forEach(((e,a)=>{l.splice(l.length-5,0,{label:`印章${a+1}名称`,value:e.useSealApplySealInfoDto.sealName},{label:"常规盖章",value:e.useSealApplySealNumDto.applySealNum+"次"})}))),N.componentsDocumentsDetails.visible[0].basicInformation={show:!0,data:l}})),b.intellect({useSealApplyId:e.useSealApplyId}).then((e=>{var a;(null==(a=e.data)?void 0:a.length)?N.componentsDocumentsDetails.visible[0].IntelligentPrinting={show:!0,data:e.data}:N.componentsDocumentsDetails.visible[0].IntelligentPrinting={show:!1,data:[]}})),b.attachment({useSealApplyId:e.useSealApplyId}).then((e=>{var a,l;(null==(a=e.data.fileInfos)?void 0:a.length)||(null==(l=e.data.fileInfoAdds)?void 0:l.length)?N.componentsDocumentsDetails.visible[0].accessory={show:!0,printedData:e.data.fileInfos,additionalData:e.data.fileInfoAdds}:N.componentsDocumentsDetails.visible[0].accessory={show:!1,printedData:[],additionalData:[]}})))}function T(e,a,l,t){N.JyElMessageBox.type=l.name,N.JyElMessageBox.column=a,"t-zgj-sealInfoDelete.restore"===l.name&&(N.JyElMessageBox.header.data="提示？",N.JyElMessageBox.content.data="还原后本次申请送审将被还原，请问确定要还原吗？",N.JyElMessageBox.show=!0),"t-zgj-File.Delete"===l.name&&(N.JyElMessageBox.header.data="提示？",N.JyElMessageBox.content.data="删除会把申请单连同对应的附件均删除，删除后可释放存储空间，请问确定要删除么？",N.JyElMessageBox.show=!0)}function F(){N.componentsDocumentsDetails.show=!1}const k=()=>{"t-zgj-sealInfoDelete.restore"===N.JyElMessageBox.type?b.return({sealUseApplyIds:[N.JyElMessageBox.column.useSealApplyId]}).then((()=>{d("还原成功"),M.value.reloadData()})).finally((()=>{N.JyElMessageBox.show=!1})):"t-zgj-File.Delete"===N.JyElMessageBox.type&&b.delete({sealUseApplyIds:[N.JyElMessageBox.column.useSealApplyId]}).then((()=>{M.value.reloadData(),d("删除成功")})).finally((()=>{N.JyElMessageBox.show=!1}))};function C(e,a){N.componentsBatch.selectionData=a,_.value={header:{data:"批量删除"},content:{data:"删除会把申请单，连同对应的附件均删除，删除后可释放存储空间，请问确定批量删除么？"}},N.showToastDialog.show=!0}const U=()=>{const e=N.componentsBatch.selectionData,a=[];e.forEach((e=>{a.push(e.useSealApplyId)})),b.delete({sealUseApplyIds:a}).then((e=>{M.value.reloadData(),d("删除成功"),N.showToastDialog.show=!1}))};return(l,t)=>{const s=o("el-breadcrumb-item"),u=o("el-breadcrumb");return n(),i("div",null,[p(a,{Layout:"breadcrumb,title,custom,fixed,table"},{breadcrumb:r((()=>[m("div",f,[p(u,{separator:"/"},{default:r((()=>[p(s,{style:{"--el-text-color-regular":"rgba(0, 0, 0, 0.65)"}},{default:r((()=>[w])),_:1}),p(s,{style:{"--el-text-color-regular":"rgba(0, 0, 0, 0.25)"}},{default:r((()=>[S])),_:1})])),_:1})])])),title:r((()=>[m("div",j,[m("div",x,[m("img",{class:"title-desc-img",src:e,alt:"",onClick:t[0]||(t[0]=e=>c(J).go(-1))}),A]),B])])),table:r((()=>[p(h,{url:"/sealApply/listInvalid",ref_key:"jyTable",ref:M,hasTabs:"",componentsSearchForm:c(N).componentsSearchForm,componentsTableHeader:c(N).componentsTable.header,componentsBatch:c(N).componentsBatch,computedData:"listApproving"===l.currentActiveName?c(N).computedData:[],tableClick:"useSealFileName",onCellClick:E,onCustomClick:T,onClickBatchButton:C},null,8,["componentsSearchForm","componentsTableHeader","componentsBatch","computedData"])])),_:1}),m("div",I,[p(y,{show:c(N).componentsDocumentsDetails.show,visible:c(N).componentsDocumentsDetails.visible,onClickClose:F},null,8,["show","visible"])]),p(c(v),{"onUpdate:modelValue":t[1]||(t[1]=e=>c(N).showToastDialog.show=!1),show:c(N).showToastDialog.show,selectionData:c(N).componentsBatch.selectionData,showToastDialogContent:_.value,label:"useSealFileName",onSureAction:U},null,8,["show","selectionData","showToastDialogContent"]),p(D,{modelValue:c(N).JyElMessageBox.show,"onUpdate:modelValue":[t[2]||(t[2]=e=>c(N).JyElMessageBox.show=e),c(N).JyElMessageBox.show],JyElMessageBox:c(N).JyElMessageBox,onSubmitElMessageBox:k},null,8,["modelValue","JyElMessageBox","onUpdate:modelValue"])])}}});export{J as default};
