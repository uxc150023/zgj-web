import{_ as e}from"./back-bdc75944.js";import{J as a}from"./JyTable-735e5f88.js";import{_ as t,I as s,C as o,v as l,h as r,i as c,Y as n,r as i,o as d,c as u,a as m,w as h,m as p,t as b,u as g,f as y,ai as v,l as w,g as f,y as x,z as S}from"./main-e75bd94c.js";import{a as B}from"./authorityManagement-20001f98.js";import"./sangedian-6ea00dcf.js";import"./Layout-a5f6ee71.js";import"./searchForm-6ca4b4e4.js";import"./ketanchude-a94e84bc.js";import"./KDocumentTypeDialog-6b47a1ba.js";import"./pagination-10abb664.js";import"./batch-99f4afc3.js";import"./index-7c7937e4.js";const k=[{prop:"userName",label:"姓名",sortable:!0,flex:!0,"min-width":150,show:!0},{prop:"accountNo",label:"账号",sortable:!0,"min-width":150,show:!0},{prop:"hostOrganName",label:"所属部门",sortable:!0,"min-width":150,show:!0},{prop:"userTitle",label:"职位",sortable:!0,"min-width":150,show:!0},{prop:"caozuo",label:"操作",fixed:"right",width:220,show:!0,rankDisplayData:[{name:"t-zgj-role.Removal"}]}],j=e=>(x("data-v-d7ae183b"),e=e(),S(),e),I={class:"PrintControlManagement-LibraryOfSeals"},C={class:"breadcrumb"},E=f(" 权限管理 "),J=f(" 人员管理 "),T={class:"title"},M={class:"title"},_={class:"title-desc"},D=f(" 人员管理"),A={class:"role"},z={class:"title-more"},U={class:"title-more-add"},q=f("+ 新增人员"),F=j((()=>p("div",{class:"title-more-down"},null,-1))),N={class:"header-div"},P=["src"],R={class:"content-div"},O=t({setup(t){const x=s(),S=o(),j=l(null),O=l({}),V=l(S.query.roleName),$=r({sealIds:"",msg:"",tabsShow:[],searchSelected:[],typeList:[],activeTab:"",JyElMessageBox:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""},type:"删除"},showToastDialog:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}},componentsSearchForm:{style:{lineStyle:{width:"calc(100% / 3)"},labelStyle:{width:"100px"}},data:[{id:"searchKey",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"姓名/账号/职位"}},{id:"hostOrganId",label:"所属部门",type:"derivable",inCommonUse:!0,defaultAttribute:{placeholder:"+所属部门"}}],butData:[{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:k,data:[],defaultAttribute:{stripe:!0,"header-cell-style":{background:"var(--jy-color-fill--3)"},"cell-style":({row:e,column:a,rowIndex:t,columnIndex:s})=>{if(""===a.property)return{color:"var(--jy-info-6)",cursor:"pointer"}}}},componentsPagination:{data:{amount:0,index:1,pageNumber:10},defaultAttribute:{layout:"prev, pager, next, jumper",total:0,"page-sizes":[10,50,100],background:!0}},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量移除"}]}}),K=()=>{$.activeTab="user",$.tabsShow=["user"],L.value=!0};O.value={roleId:S.query.roleId};const L=l(!1);let H="";const Q=(e,a,t,s)=>{"t-zgj-role.Removal"===t.name&&($.JyElMessageBox.header.data="移除",$.JyElMessageBox.content.data="请问确定要移除吗？",$.JyElMessageBox.show=!0,$.JyElMessageBox.type="移除",H=a.userId)},W=()=>{x.go(-1)},X=()=>{B.roleDelete(`${O.value.roleId}/${H}`).then((e=>{n.success("操作成功"),$.JyElMessageBox.show=!1,j.value.reloadData()}))};c((()=>$.searchSelected),(e=>{if(e&&0!==e.length)if("user"===$.activeTab){const a=[];e.forEach((e=>{a.push(e.id)})),B.addRoleUser({roleId:O.value.roleId,userIds:a}).then((e=>{n.success("操作成功"),$.JyElMessageBox.show=!1,$.searchSelected=[],j.value.reloadData()}))}else $.activeTab}));const Y=(e,a)=>{const t=[];a.forEach((e=>{t.push(e.userId)})),B.batchDeleteRoleUser({roleId:O.value.roleId,userIds:t}).then((()=>{n.success("操作成功"),j.value.reloadData()}))},G=e=>{"hostOrganId"===e.id&&($.activeTab="organ",$.tabsShow=["organ"],L.value=!0)};return(t,s)=>{const o=i("el-breadcrumb-item"),l=i("el-breadcrumb"),r=i("el-button"),c=i("JyElMessageBox");return d(),u("div",I,[m(a,{url:"/role/user/page",ref_key:"table",ref:j,hasTree:!1,breadcrumb:!0,needAutoRequest:!0,componentsSearchForm:g($).componentsSearchForm,componentsTableHeader:g($).componentsTable.header,componentsBatch:g($).componentsBatch,queryParams:O.value,tableClick:"",onCellClick:t.cellClick,onCustomClick:Q,onClickBatchButton:Y,onClickElement:G},{breadcrumb:h((()=>[p("div",C,[m(l,{separator:"/"},{default:h((()=>[m(o,{style:{"--el-text-color-regular":"rgba(0, 0, 0, 0.65)"}},{default:h((()=>[E])),_:1}),m(o,{style:{"--el-text-color-regular":"rgba(0, 0, 0, 0.25)"}},{default:h((()=>[J])),_:1})])),_:1})])])),title:h((()=>[p("div",T,[p("div",M,[p("div",_,[p("img",{class:"title-desc-img",src:e,alt:"",onClick:W}),D,p("span",A,"（"+b(V.value)+"）",1)])]),p("div",z,[p("div",U,[m(r,{type:"primary",onClick:K},{default:h((()=>[q])),_:1})]),F])])])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch","queryParams","onCellClick"]),L.value?(d(),y(g(v),{key:0,show:L.value,"onUpdate:show":s[0]||(s[0]=e=>L.value=e),searchSelected:g($).searchSelected,"onUpdate:searchSelected":s[1]||(s[1]=e=>g($).searchSelected=e),tabsShow:g($).tabsShow,activeTab:g($).activeTab},null,8,["show","searchSelected","tabsShow","activeTab"])):w("",!0),m(c,{modelValue:g($).JyElMessageBox.show,"onUpdate:modelValue":s[3]||(s[3]=e=>g($).JyElMessageBox.show=e),show:g($).JyElMessageBox.show,defaultAttribute:{}},{header:h((()=>[p("div",N,[p("img",{src:g($).JyElMessageBox.header.icon,alt:""},null,8,P),p("span",null,b(g($).JyElMessageBox.header.data),1)])])),content:h((()=>[p("div",R,b(g($).JyElMessageBox.content.data),1)])),footer:h((()=>[m(r,{type:"primary",onClick:X},{default:h((()=>[f(b(t.$t("t-zgj-operation.submit")),1)])),_:1}),m(r,{onClick:s[2]||(s[2]=e=>g($).JyElMessageBox.show=!1)},{default:h((()=>[f(b(t.$t("t-zgj-operation.cancel")),1)])),_:1})])),_:1},8,["modelValue","show"])])}}},[["__scopeId","data-v-d7ae183b"]]);export{O as default};
