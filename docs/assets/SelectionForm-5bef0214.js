import{_ as s,I as l,v as a,k as e,r as t,o as i,c,a as o,w as n,m as u,u as d,$ as v,b9 as m,F as r,e as p,f,ab as g,t as y,l as b,P as h,Q as k,g as I,b4 as C,Y as V,J as _,M as x,cB as w,y as T,z as U,bf as j}from"./main-e75bd94c.js";import M from"./index-1f964f06.js";import{_ as N,a as S,b as F,c as L}from"./form_icon-346326a6.js";import{_ as O}from"./step_next-7a8cf5a2.js";import{c as q}from"./Layout-a5f6ee71.js";const A=s=>(T("data-v-54dd16fb"),s=s(),U(),s),B={class:"Seal-application-Selection-form"},D=A((()=>u("div",{class:"title"},[u("div",null,"用印申请"),u("div")],-1))),J={class:"custom"},K=A((()=>u("div",{class:"cont-title"}," 请选择所需表单 ",-1))),z=A((()=>u("div",{class:"cont-desc"}," 请根据以下步骤完善表单内容及确认审批流程 ",-1))),P=A((()=>u("div",{class:"cont-liuc"},[u("div",{class:"step"},[u("div",{class:"step-icon"},[u("img",{class:"step-icon-img",src:S,alt:""})]),u("div",{class:"step-text"}," 填写表单信息 ")]),u("div",{class:"cont-liuc-tubiao"},[u("img",{class:"cont-liuc-tubiao-img",src:O,alt:""})]),u("div",{class:"step"},[u("div",{class:"step-icon"},[u("img",{class:"step-icon-img",src:F,alt:""})]),u("div",{class:"step-text"}," 确认审批流程 ")]),u("div",{class:"cont-liuc-tubiao"},[u("img",{class:"cont-liuc-tubiao-img",src:O,alt:""})]),u("div",{class:"step"},[u("div",{class:"step-icon"},[u("img",{class:"step-icon-img",src:L,alt:""})]),u("div",{class:"step-text"}," 完成用印申请 ")])],-1))),Q={class:"cont-liebiao"},Y={class:"column-list-back"},$=A((()=>u("img",{class:"image-slot",src:N},null,-1))),E={key:1,class:"column-list-back-img",src:N,alt:""},G={class:"column-list-desc"},H={class:"column-list-but"},R=I(" 去申请 "),W=["onClick"],X=[A((()=>u("span",{class:"text"},"保存的模板",-1))),A((()=>u("i",{class:"icon"},[u("svg",{class:"iconpark-icon"},[u("use",{href:"#icon3"})])],-1)))],Z={class:"empty"},ss={class:"optional"},ls={class:"list-title"},as={class:"list-title-desc"},es={class:"list-title-time"},ts={class:"optional-list-desc"},is={class:"optional-list-desc-text"},cs={class:"optional-list-desc-but"},os=["onClick"],ns=["onClick"],us=A((()=>u("span",{class:"tip"}," 表单已更新，历史表单对应的模板会自动失效 ",-1))),ds={class:"list-title"},vs={class:"list-title-desc"},ms={class:"list-title-time"},rs={class:"optional-list-desc"},ps={class:"optional-list-desc-text"},fs={key:0,class:"data-null"},gs=[A((()=>u("img",{src:j},null,-1)))],ys=A((()=>u("span",null,null,-1))),bs=I(" 请问确定要删除吗？ "),hs=s({setup(s){const I=l(),T=a(!1),U=a([]),j=a(""),N=a(!1),S=a(!1),F=a(""),L=()=>{C.deleteTem(F.value).then((s=>{S.value=!1,V.success("删除成功"),Cs()})).catch((()=>{S.value=!1}))},O=()=>{S.value=!1};const A=a([]),hs=a([]),ks=a(""),Is=a("");const Cs=()=>{C.templateList({formVersionId:Is.value}).then((s=>{s.data?(A.value=s.data.templates?s.data.templates:[],hs.value=s.data.validTemplates?s.data.validTemplates:[],T.value=!0):(A.value=[],hs.value=[],T.value=!0)}))};function Vs(){T.value=!1}const _s=_((()=>{xs()}),500),xs=()=>{N.value=!0,U.value=[],C.list({keyword:j.value.trim()}).then((s=>{U.value=s.data||[]})).finally((()=>{N.value=!1}))},ws=()=>{C.clearValid({formVersionId:Is.value}).then((s=>{V.success("清除成功"),hs.value=[]}))};return e((()=>{xs()})),(s,l)=>{const a=t("el-input"),e=t("el-image"),C=t("el-button"),V=t("el-empty"),_=M,Ts=x,Us=w;return i(),c("div",B,[o(q,{Layout:"title,custom"},{title:n((()=>[D])),custom:n((()=>[u("div",J,[o(a,{modelValue:j.value,"onUpdate:modelValue":l[0]||(l[0]=s=>j.value=s),placeholder:"请输入表单名称",clearable:"",class:"formInput",onInput:d(_s),onKeyup:v(xs,["enter"]),"prefix-icon":d(m)},null,8,["modelValue","onInput","onKeyup","prefix-icon"]),K,z,P,u("div",Q,[(i(!0),c(r,null,p(U.value,((s,l)=>(i(),c("div",{class:"column-list",key:l},[u("div",Y,[s.imageUrl?(i(),f(e,{key:0,class:"column-list-back-img active",src:d(g)+s.imageUrl,fit:"scale-down","preview-src-list":[d(g)+s.imageUrl]},{error:n((()=>[$])),_:2},1032,["src","preview-src-list"])):(i(),c("img",E))]),u("div",G,y(s.formName),1),u("div",H,[o(C,{type:"primary",onClick:l=>{return a=s.formMessageId,e=s.formVersionId,void I.push({name:"fillForm",query:{formMessageId:a,formVersionId:e}});var a,e}},{default:n((()=>[R])),_:2},1032,["onClick"])]),u("div",{class:"column-list-template",onClick:l=>{return a=s.formMessageId,e=s.formVersionId,A.value=[],hs.value=[],ks.value=a,Is.value=e,void Cs();var a,e}},X,8,W)])))),128)),u("div",Z,[U.value.length||N.value?b("",!0):(i(),f(V,{key:0,description:"您暂无可用的申请表单"}))])])])])),_:1}),o(Ts,{"onUpdate:show":l[1]||(l[1]=s=>T.value=s),show:T.value,title:"选择模板",centerBtn:!0,width:1e3,height:600,onClose:Vs},{footer:n((()=>[ys])),default:n((()=>[u("div",ss,[(i(!0),c(r,null,p(A.value,((s,l)=>(i(),c("div",{class:"optional-list",key:l},[u("div",ls,[u("div",as,y(s.fileTypeName),1),u("div",es,y(s.createDatetime),1)]),u("div",ts,[u("div",is,y(s.templateName),1),u("div",cs,[u("div",{class:"button shiyong",onClick:l=>{return a=s.useSealApplyTemplateId,void I.push({name:"fillForm",query:{formVersionId:null,useId:a,formMessageId:ks.value}});var a}}," 使用 ",8,os),u("div",{class:"button shanchu",onClick:l=>{return a=s.useSealApplyTemplateId,S.value=!0,void(F.value=a);var a}}," 删除 ",8,ns)])])])))),128)),h(o(_,{label:"失效模版",btn1:"一键清除",onOnClickCancel:ws},{tip:n((()=>[us])),_:1},512),[[k,0!==hs.value.length]]),(i(!0),c(r,null,p(hs.value,((s,l)=>h((i(),c("div",{class:"optional-list1",key:l},[u("div",ds,[u("div",vs,y(s.fileTypeName),1),u("div",ms,y(s.createDatetime),1)]),u("div",rs,[u("div",ps,y(s.templateName),1)])])),[[k,0!==hs.value.length]]))),128))]),A.value.length+hs.value.length===0?(i(),c("div",fs,gs)):b("",!0)])),_:1},8,["show"]),o(Us,{modelValue:S.value,"onUpdate:modelValue":l[2]||(l[2]=s=>S.value=s),mode:1,onOnConfirm:L,onOnCancel:O,title:"删除模版"},{default:n((()=>[bs])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-54dd16fb"]]);export{hs as default};
