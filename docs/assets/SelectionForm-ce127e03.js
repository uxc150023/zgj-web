import{g as s,j as a,U as l,F as e,Q as t,k as i,n as c,a8 as o,a0 as n}from"./chunk-vform-ec6574e8.js";import u from"./index-a02cc9a9.js";import{a as d,d as v,aQ as m,W as r,X as p,ap as f,ai as g,Y as h,u as k,aG as y,a3 as b,aE as I,ah as C,ao as V,am as _,aj as x,ak as j,an as w,ba as T,bb as U}from"./chunk-ant-design-vue-a1de3c57.js";import{_ as N,a as M,b as S,c as F}from"./form_icon-346326a6.js";import{_ as L}from"./step_next-7a8cf5a2.js";import{c as O}from"./Layout-58d8fae6.js";import{E as q}from"./chunk-element-plus-636450f3.js";const A=s=>(T("data-v-54dd16fb"),s=s(),U(),s),D={class:"Seal-application-Selection-form"},E=A((()=>h("div",{class:"title"},[h("div",null,"用印申请"),h("div")],-1))),K={class:"custom"},Q=A((()=>h("div",{class:"cont-title"}," 请选择所需表单 ",-1))),B=A((()=>h("div",{class:"cont-desc"}," 请根据以下步骤完善表单内容及确认审批流程 ",-1))),G=A((()=>h("div",{class:"cont-liuc"},[h("div",{class:"step"},[h("div",{class:"step-icon"},[h("img",{class:"step-icon-img",src:M,alt:""})]),h("div",{class:"step-text"}," 填写表单信息 ")]),h("div",{class:"cont-liuc-tubiao"},[h("img",{class:"cont-liuc-tubiao-img",src:L,alt:""})]),h("div",{class:"step"},[h("div",{class:"step-icon"},[h("img",{class:"step-icon-img",src:S,alt:""})]),h("div",{class:"step-text"}," 确认审批流程 ")]),h("div",{class:"cont-liuc-tubiao"},[h("img",{class:"cont-liuc-tubiao-img",src:L,alt:""})]),h("div",{class:"step"},[h("div",{class:"step-icon"},[h("img",{class:"step-icon-img",src:F,alt:""})]),h("div",{class:"step-text"}," 完成用印申请 ")])],-1))),P={class:"cont-liebiao"},W={class:"column-list-back"},X=A((()=>h("img",{class:"image-slot",src:N},null,-1))),Y={key:1,class:"column-list-back-img",src:N,alt:""},z={class:"column-list-desc"},H={class:"column-list-but"},J=w(" 去申请 "),R=["onClick"],Z=[A((()=>h("span",{class:"text"},"保存的模板",-1))),A((()=>h("i",{class:"icon"},[h("svg",{class:"iconpark-icon"},[h("use",{href:"#icon3"})])],-1)))],$={class:"empty"},ss={class:"optional"},as={class:"list-title"},ls={class:"list-title-desc"},es={class:"list-title-time"},ts={class:"optional-list-desc"},is={class:"optional-list-desc-text"},cs={class:"optional-list-desc-but"},os=["onClick"],ns=["onClick"],us=A((()=>h("span",{class:"tip"}," 表单已更新，历史表单对应的模板会自动失效 ",-1))),ds={class:"list-title"},vs={class:"list-title-desc"},ms={class:"list-title-time"},rs={class:"optional-list-desc"},ps={class:"optional-list-desc-text"},fs={key:0,class:"data-null"},gs=[A((()=>h("img",{src:n},null,-1)))],hs=A((()=>h("span",null,null,-1))),ks=w(" 请问确定要删除吗？ "),ys=s({setup(s){const n=a(),w=d(!1),T=d([]),U=d(""),N=d(!1),M=d(!1),S=d(""),F=()=>{t.deleteTem(S.value).then((s=>{M.value=!1,q.success("删除成功"),Cs()})).catch((()=>{M.value=!1}))},L=()=>{M.value=!1};const A=d([]),ys=d([]),bs=d(""),Is=d("");const Cs=()=>{t.templateList({formVersionId:Is.value}).then((s=>{s.data?(A.value=s.data.templates?s.data.templates:[],ys.value=s.data.validTemplates?s.data.validTemplates:[],w.value=!0):(A.value=[],ys.value=[],w.value=!0)}))};function Vs(){w.value=!1}const _s=i((()=>{xs()}),500),xs=()=>{N.value=!0,T.value=[],t.list({keyword:U.value.trim()}).then((s=>{T.value=s.data||[]})).finally((()=>{N.value=!1}))},js=()=>{t.clearValid({formVersionId:Is.value}).then((s=>{q.success("清除成功"),ys.value=[]}))};return v((()=>{xs()})),(s,a)=>{const t=m("el-input"),i=m("el-image"),d=m("el-button"),v=m("el-empty"),q=u,ws=c,Ts=o;return r(),p("div",D,[f(O,{Layout:"title,custom"},{title:g((()=>[E])),custom:g((()=>[h("div",K,[f(t,{modelValue:U.value,"onUpdate:modelValue":a[0]||(a[0]=s=>U.value=s),placeholder:"请输入表单名称",clearable:"",class:"formInput",onInput:k(_s),onKeyup:y(xs,["enter"]),"prefix-icon":k(l)},null,8,["modelValue","onInput","onKeyup","prefix-icon"]),Q,B,G,h("div",P,[(r(!0),p(b,null,I(T.value,((s,a)=>(r(),p("div",{class:"column-list",key:a},[h("div",W,[s.imageUrl?(r(),C(i,{key:0,class:"column-list-back-img active",src:k(e)+s.imageUrl,fit:"scale-down","preview-src-list":[k(e)+s.imageUrl]},{error:g((()=>[X])),_:2},1032,["src","preview-src-list"])):(r(),p("img",Y))]),h("div",z,V(s.formName),1),h("div",H,[f(d,{type:"primary",onClick:a=>{return l=s.formMessageId,e=s.formVersionId,void n.push({name:"fillForm",query:{formMessageId:l,formVersionId:e}});var l,e}},{default:g((()=>[J])),_:2},1032,["onClick"])]),h("div",{class:"column-list-template",onClick:a=>{return l=s.formMessageId,e=s.formVersionId,A.value=[],ys.value=[],bs.value=l,Is.value=e,void Cs();var l,e}},Z,8,R)])))),128)),h("div",$,[T.value.length||N.value?_("",!0):(r(),C(v,{key:0,description:"您暂无可用的申请表单"}))])])])])),_:1}),f(ws,{"onUpdate:show":a[1]||(a[1]=s=>w.value=s),show:w.value,title:"选择模板",centerBtn:!0,width:1e3,height:600,onClose:Vs},{footer:g((()=>[hs])),default:g((()=>[h("div",ss,[(r(!0),p(b,null,I(A.value,((s,a)=>(r(),p("div",{class:"optional-list",key:a},[h("div",as,[h("div",ls,V(s.fileTypeName),1),h("div",es,V(s.createDatetime),1)]),h("div",ts,[h("div",is,V(s.templateName),1),h("div",cs,[h("div",{class:"button shiyong",onClick:a=>{return l=s.useSealApplyTemplateId,void n.push({name:"fillForm",query:{formVersionId:null,useId:l,formMessageId:bs.value}});var l}}," 使用 ",8,os),h("div",{class:"button shanchu",onClick:a=>{return l=s.useSealApplyTemplateId,M.value=!0,void(S.value=l);var l}}," 删除 ",8,ns)])])])))),128)),x(f(q,{label:"失效模版",btn1:"一键清除",onOnClickCancel:js},{tip:g((()=>[us])),_:1},512),[[j,0!==ys.value.length]]),(r(!0),p(b,null,I(ys.value,((s,a)=>x((r(),p("div",{class:"optional-list1",key:a},[h("div",ds,[h("div",vs,V(s.fileTypeName),1),h("div",ms,V(s.createDatetime),1)]),h("div",rs,[h("div",ps,V(s.templateName),1)])])),[[j,0!==ys.value.length]]))),128))]),A.value.length+ys.value.length===0?(r(),p("div",fs,gs)):_("",!0)])),_:1},8,["show"]),f(Ts,{modelValue:M.value,"onUpdate:modelValue":a[2]||(a[2]=s=>M.value=s),mode:1,onOnConfirm:F,onOnCancel:L,title:"删除模版"},{default:g((()=>[ks])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-54dd16fb"]]);export{ys as default};
