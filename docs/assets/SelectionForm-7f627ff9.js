import{g as s,j as l,U as a,F as e,Q as t,k as i,n as c,a8 as o,a0 as n}from"./chunk-vform-d740b35c.js";import u from"./index-5b654134.js";import{r as d,a1 as v,C as m,F as r,G as p,B as f,N as g,H as h,u as k,ab as y,P as b,U as I,Q as C,I as V,J as x,S as _,T as j,R as w,E as T,V as U,W as N}from"./chunk-element-plus-a77de3d2.js";import{_ as S,a as F,b as M,c as O}from"./form_icon-346326a6.js";import{_ as L}from"./step_next-7a8cf5a2.js";import{c as q}from"./Layout-e90710df.js";const A=s=>(U("data-v-54dd16fb"),s=s(),N(),s),B={class:"Seal-application-Selection-form"},D=A((()=>h("div",{class:"title"},[h("div",null,"用印申请"),h("div")],-1))),K={class:"custom"},Q=A((()=>h("div",{class:"cont-title"}," 请选择所需表单 ",-1))),E=A((()=>h("div",{class:"cont-desc"}," 请根据以下步骤完善表单内容及确认审批流程 ",-1))),G=A((()=>h("div",{class:"cont-liuc"},[h("div",{class:"step"},[h("div",{class:"step-icon"},[h("img",{class:"step-icon-img",src:F,alt:""})]),h("div",{class:"step-text"}," 填写表单信息 ")]),h("div",{class:"cont-liuc-tubiao"},[h("img",{class:"cont-liuc-tubiao-img",src:L,alt:""})]),h("div",{class:"step"},[h("div",{class:"step-icon"},[h("img",{class:"step-icon-img",src:M,alt:""})]),h("div",{class:"step-text"}," 确认审批流程 ")]),h("div",{class:"cont-liuc-tubiao"},[h("img",{class:"cont-liuc-tubiao-img",src:L,alt:""})]),h("div",{class:"step"},[h("div",{class:"step-icon"},[h("img",{class:"step-icon-img",src:O,alt:""})]),h("div",{class:"step-text"}," 完成用印申请 ")])],-1))),H={class:"cont-liebiao"},J={class:"column-list-back"},P=A((()=>h("img",{class:"image-slot",src:S},null,-1))),R={key:1,class:"column-list-back-img",src:S,alt:""},W={class:"column-list-desc"},z={class:"column-list-but"},X=w(" 去申请 "),Y=["onClick"],Z=[A((()=>h("span",{class:"text"},"保存的模板",-1))),A((()=>h("i",{class:"icon"},[h("svg",{class:"iconpark-icon"},[h("use",{href:"#icon3"})])],-1)))],$={class:"empty"},ss={class:"optional"},ls={class:"list-title"},as={class:"list-title-desc"},es={class:"list-title-time"},ts={class:"optional-list-desc"},is={class:"optional-list-desc-text"},cs={class:"optional-list-desc-but"},os=["onClick"],ns=["onClick"],us=A((()=>h("span",{class:"tip"}," 表单已更新，历史表单对应的模板会自动失效 ",-1))),ds={class:"list-title"},vs={class:"list-title-desc"},ms={class:"list-title-time"},rs={class:"optional-list-desc"},ps={class:"optional-list-desc-text"},fs={key:0,class:"data-null"},gs=[A((()=>h("img",{src:n},null,-1)))],hs=A((()=>h("span",null,null,-1))),ks=w(" 请问确定要删除吗？ "),ys=s({setup(s){const n=l(),w=d(!1),U=d([]),N=d(""),S=d(!1),F=d(!1),M=d(""),O=()=>{t.deleteTem(M.value).then((s=>{F.value=!1,T.success("删除成功"),Cs()})).catch((()=>{F.value=!1}))},L=()=>{F.value=!1};const A=d([]),ys=d([]),bs=d(""),Is=d("");const Cs=()=>{t.templateList({formVersionId:Is.value}).then((s=>{s.data?(A.value=s.data.templates?s.data.templates:[],ys.value=s.data.validTemplates?s.data.validTemplates:[],w.value=!0):(A.value=[],ys.value=[],w.value=!0)}))};function Vs(){w.value=!1}const xs=i((()=>{_s()}),500),_s=()=>{S.value=!0,U.value=[],t.list({keyword:N.value.trim()}).then((s=>{U.value=s.data||[]})).finally((()=>{S.value=!1}))},js=()=>{t.clearValid({formVersionId:Is.value}).then((s=>{T.success("清除成功"),ys.value=[]}))};return v((()=>{_s()})),(s,l)=>{const t=m("el-input"),i=m("el-image"),d=m("el-button"),v=m("el-empty"),T=u,ws=c,Ts=o;return r(),p("div",B,[f(q,{Layout:"title,custom"},{title:g((()=>[D])),custom:g((()=>[h("div",K,[f(t,{modelValue:N.value,"onUpdate:modelValue":l[0]||(l[0]=s=>N.value=s),placeholder:"请输入表单名称",clearable:"",class:"formInput",onInput:k(xs),onKeyup:y(_s,["enter"]),"prefix-icon":k(a)},null,8,["modelValue","onInput","onKeyup","prefix-icon"]),Q,E,G,h("div",H,[(r(!0),p(b,null,I(U.value,((s,l)=>(r(),p("div",{class:"column-list",key:l},[h("div",J,[s.imageUrl?(r(),C(i,{key:0,class:"column-list-back-img active",src:k(e)+s.imageUrl,fit:"scale-down","preview-src-list":[k(e)+s.imageUrl]},{error:g((()=>[P])),_:2},1032,["src","preview-src-list"])):(r(),p("img",R))]),h("div",W,V(s.formName),1),h("div",z,[f(d,{type:"primary",onClick:l=>{return a=s.formMessageId,e=s.formVersionId,void n.push({name:"fillForm",query:{formMessageId:a,formVersionId:e}});var a,e}},{default:g((()=>[X])),_:2},1032,["onClick"])]),h("div",{class:"column-list-template",onClick:l=>{return a=s.formMessageId,e=s.formVersionId,A.value=[],ys.value=[],bs.value=a,Is.value=e,void Cs();var a,e}},Z,8,Y)])))),128)),h("div",$,[U.value.length||S.value?x("",!0):(r(),C(v,{key:0,description:"您暂无可用的申请表单"}))])])])])),_:1}),f(ws,{"onUpdate:show":l[1]||(l[1]=s=>w.value=s),show:w.value,title:"选择模板",centerBtn:!0,width:1e3,height:600,onClose:Vs},{footer:g((()=>[hs])),default:g((()=>[h("div",ss,[(r(!0),p(b,null,I(A.value,((s,l)=>(r(),p("div",{class:"optional-list",key:l},[h("div",ls,[h("div",as,V(s.fileTypeName),1),h("div",es,V(s.createDatetime),1)]),h("div",ts,[h("div",is,V(s.templateName),1),h("div",cs,[h("div",{class:"button shiyong",onClick:l=>{return a=s.useSealApplyTemplateId,void n.push({name:"fillForm",query:{formVersionId:null,useId:a,formMessageId:bs.value}});var a}}," 使用 ",8,os),h("div",{class:"button shanchu",onClick:l=>{return a=s.useSealApplyTemplateId,F.value=!0,void(M.value=a);var a}}," 删除 ",8,ns)])])])))),128)),_(f(T,{label:"失效模版",btn1:"一键清除",onOnClickCancel:js},{tip:g((()=>[us])),_:1},512),[[j,0!==ys.value.length]]),(r(!0),p(b,null,I(ys.value,((s,l)=>_((r(),p("div",{class:"optional-list1",key:l},[h("div",ds,[h("div",vs,V(s.fileTypeName),1),h("div",ms,V(s.createDatetime),1)]),h("div",rs,[h("div",ps,V(s.templateName),1)])])),[[j,0!==ys.value.length]]))),128))]),A.value.length+ys.value.length===0?(r(),p("div",fs,gs)):x("",!0)])),_:1},8,["show"]),f(Ts,{modelValue:F.value,"onUpdate:modelValue":l[2]||(l[2]=s=>F.value=s),mode:1,onOnConfirm:O,onOnCancel:L,title:"删除模版"},{default:g((()=>[ks])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-54dd16fb"]]);export{ys as default};
