import{_ as e}from"./back-bdc75944.js";import{J as a}from"./JyTable-d62bb35b.js";import{g as t,j as s,u as o,P as l}from"./chunk-vform-d740b35c.js";import{a as r}from"./authorityManagement-64dea20a.js";import{r as c,b as n,w as i,E as d,C as u,F as m,G as h,B as p,N as b,H as g,I as y,u as v,Q as w,J as f,R as x,V as k,W as B}from"./chunk-element-plus-a77de3d2.js";import"./sangedian-6ea00dcf.js";import"./Layout-e90710df.js";import"./searchForm-96cc0cf8.js";import"./ketanchude-a94e84bc.js";import"./KDocumentTypeDialog-63de8919.js";import"./pagination-3c925a2b.js";import"./batch-6eb7c760.js";import"./index-d761d72f.js";const j=[{prop:"userName",label:"姓名",sortable:!0,flex:!0,"min-width":150,show:!0},{prop:"accountNo",label:"账号",sortable:!0,"min-width":150,show:!0},{prop:"hostOrganName",label:"所属部门",sortable:!0,"min-width":150,show:!0},{prop:"userTitle",label:"职位",sortable:!0,"min-width":150,show:!0},{prop:"caozuo",label:"操作",fixed:"right",width:220,show:!0,rankDisplayData:[{name:"t-zgj-role.Removal"}]}],S=e=>(k("data-v-d7ae183b"),e=e(),B(),e),E={class:"PrintControlManagement-LibraryOfSeals"},C={class:"breadcrumb"},I=x(" 权限管理 "),J=x(" 人员管理 "),M={class:"title"},T={class:"title"},D={class:"title-desc"},_=x(" 人员管理"),A={class:"role"},U={class:"title-more"},q={class:"title-more-add"},z=x("+ 新增人员"),F=S((()=>g("div",{class:"title-more-down"},null,-1))),N={class:"header-div"},P=["src"],R={class:"content-div"},O=t({setup(t){const k=s(),B=o(),S=c(null),O=c({}),V=c(B.query.roleName),$=n({sealIds:"",msg:"",tabsShow:[],searchSelected:[],typeList:[],activeTab:"",JyElMessageBox:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""},type:"删除"},showToastDialog:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}},componentsSearchForm:{style:{lineStyle:{width:"calc(100% / 3)"},labelStyle:{width:"100px"}},data:[{id:"searchKey",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"姓名/账号/职位"}},{id:"hostOrganId",label:"所属部门",type:"derivable",inCommonUse:!0,defaultAttribute:{placeholder:"+所属部门"}}],butData:[{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:j,data:[],defaultAttribute:{stripe:!0,"header-cell-style":{background:"var(--jy-color-fill--3)"},"cell-style":({row:e,column:a,rowIndex:t,columnIndex:s})=>{if(""===a.property)return{color:"var(--jy-info-6)",cursor:"pointer"}}}},componentsPagination:{data:{amount:0,index:1,pageNumber:10},defaultAttribute:{layout:"prev, pager, next, jumper",total:0,"page-sizes":[10,50,100],background:!0}},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量移除"}]}}),H=()=>{$.activeTab="user",$.tabsShow=["user"],L.value=!0};O.value={roleId:B.query.roleId};const L=c(!1);let K="";const G=(e,a,t,s)=>{"t-zgj-role.Removal"===t.name&&($.JyElMessageBox.header.data="移除",$.JyElMessageBox.content.data="请问确定要移除吗？",$.JyElMessageBox.show=!0,$.JyElMessageBox.type="移除",K=a.userId)},Q=()=>{k.go(-1)},W=()=>{r.roleDelete(`${O.value.roleId}/${K}`).then((e=>{d.success("操作成功"),$.JyElMessageBox.show=!1,S.value.reloadData()}))};i((()=>$.searchSelected),(e=>{if(e&&0!==e.length)if("user"===$.activeTab){const a=[];e.forEach((e=>{a.push(e.id)})),r.addRoleUser({roleId:O.value.roleId,userIds:a}).then((e=>{d.success("操作成功"),$.JyElMessageBox.show=!1,$.searchSelected=[],S.value.reloadData()}))}else $.activeTab}));const Y=(e,a)=>{const t=[];a.forEach((e=>{t.push(e.userId)})),r.batchDeleteRoleUser({roleId:O.value.roleId,userIds:t}).then((()=>{d.success("操作成功"),S.value.reloadData()}))},Z=e=>{"hostOrganId"===e.id&&($.activeTab="organ",$.tabsShow=["organ"],L.value=!0)};return(t,s)=>{const o=u("el-breadcrumb-item"),r=u("el-breadcrumb"),c=u("el-button"),n=u("JyElMessageBox");return m(),h("div",E,[p(a,{url:"/role/user/page",ref_key:"table",ref:S,hasTree:!1,breadcrumb:!0,needAutoRequest:!0,componentsSearchForm:v($).componentsSearchForm,componentsTableHeader:v($).componentsTable.header,componentsBatch:v($).componentsBatch,queryParams:O.value,tableClick:"",onCellClick:t.cellClick,onCustomClick:G,onClickBatchButton:Y,onClickElement:Z},{breadcrumb:b((()=>[g("div",C,[p(r,{separator:"/"},{default:b((()=>[p(o,{style:{"--el-text-color-regular":"rgba(0, 0, 0, 0.65)"}},{default:b((()=>[I])),_:1}),p(o,{style:{"--el-text-color-regular":"rgba(0, 0, 0, 0.25)"}},{default:b((()=>[J])),_:1})])),_:1})])])),title:b((()=>[g("div",M,[g("div",T,[g("div",D,[g("img",{class:"title-desc-img",src:e,alt:"",onClick:Q}),_,g("span",A,"（"+y(V.value)+"）",1)])]),g("div",U,[g("div",q,[p(c,{type:"primary",onClick:H},{default:b((()=>[z])),_:1})]),F])])])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch","queryParams","onCellClick"]),L.value?(m(),w(v(l),{key:0,show:L.value,"onUpdate:show":s[0]||(s[0]=e=>L.value=e),searchSelected:v($).searchSelected,"onUpdate:searchSelected":s[1]||(s[1]=e=>v($).searchSelected=e),tabsShow:v($).tabsShow,activeTab:v($).activeTab},null,8,["show","searchSelected","tabsShow","activeTab"])):f("",!0),p(n,{modelValue:v($).JyElMessageBox.show,"onUpdate:modelValue":s[3]||(s[3]=e=>v($).JyElMessageBox.show=e),show:v($).JyElMessageBox.show,defaultAttribute:{}},{header:b((()=>[g("div",N,[g("img",{src:v($).JyElMessageBox.header.icon,alt:""},null,8,P),g("span",null,y(v($).JyElMessageBox.header.data),1)])])),content:b((()=>[g("div",R,y(v($).JyElMessageBox.content.data),1)])),footer:b((()=>[p(c,{type:"primary",onClick:W},{default:b((()=>[x(y(t.$t("t-zgj-operation.submit")),1)])),_:1}),p(c,{onClick:s[2]||(s[2]=e=>v($).JyElMessageBox.show=!1)},{default:b((()=>[x(y(t.$t("t-zgj-operation.cancel")),1)])),_:1})])),_:1},8,["modelValue","show"])])}}},[["__scopeId","data-v-d7ae183b"]]);export{O as default};
