import{_ as e,I as a,v as t,h as l,j as o,k as s,r as n,o as i,c as p,a as r,w as d,m as u,u as m,l as c,f as y,b3 as b,g as h,cv as f,aa as g,M as v,y as D,z as S}from"./main-35f8b412.js";import{_ as w}from"./gengduo-caozuo-730fe1cb.js";import{J as A}from"./JyTable-78da21a1.js";import{c as T}from"./JyTabs-aa8380ea.js";import{c as M}from"./documentsDetails-1a4a2918.js";import{d as x,l as J,a as I,b as U,c as j,e as B,f as N,g as _,h as k}from"./listUsing-651ca84e.js";import{R as E}from"./RecordSealToReview-dca792f4.js";import{a as R}from"./sealApplyIntellect-e244208d.js";import{a as C}from"./actionOneDialog-fbdb7018.js";import{A as q}from"./ApproverApi-43c69969.js";import{s as F}from"./listApprovingJson-a70956ef.js";import{a as Y}from"./actionMoreDialog-2e89d3f5.js";import"./sangedian-6ea00dcf.js";import"./Layout-8dc22f8d.js";import"./searchForm-e6ac3aae.js";import"./ketanchude-a94e84bc.js";import"./KDocumentTypeDialog-fc5a935b.js";import"./pagination-70da6ee6.js";import"./batch-7c7d6062.js";import"./index-4c09bf33.js";/* empty css                                                               */import"./cha-kong-c10eac4e.js";import"./table-4b68006a.js";/* empty css                                                                         */import"./portion-da325dae.js";/* empty css                                                                */import"./yuan-hui-31c99901.js";import"./request-util-1d542434.js";const P=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"文件名称/申请人/用印编码"}},{id:"applyTime",label:"申请时间",type:"picker",requestType:"array",startRequest:"applyStartTime",endRequest:"applyEndTime",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":e=>e.getTime()>Date.now(),"default-value":[new Date((new Date).setMonth((new Date).getMonth()-1)),new Date]},style:{}},{id:"fileTypeId",requestParams:"fileTypeId",label:"文件类型",type:"derivable",inCommonUse:!1,defaultAttribute:{placeholder:"请选择",type:"fileType",multiple:!0,joinStr:","},options:[]},{id:"sealId",requestParams:"sealId",label:"印章名称",type:"dialog",defaultAttribute:{type:"JySelectSeal",multiple:!1,placeholder:"+印章名称"},options:[]},{id:"applyUser",requestParams:"applyUserId",label:"申请人",type:"derivable",defaultAttribute:{type:"user",multiple:!1,placeholder:"+申请人"},options:[],values:null},{id:"applyOrgan",requestParams:"applyOrganId",label:"申请部门",type:"derivable",defaultAttribute:{type:"organ",multiple:!1,placeholder:"+申请部门"},options:[],values:null},{id:"relatedCompanyId",label:"往来单位",type:"dialog",defaultAttribute:{type:"JyRelatedCompany",multiple:!1,placeholder:"+往来单位"},options:[],values:null},{id:"totalMoney",label:"金额",type:"scopeInput",startAttribute:{placeholder:"最小金额",id:"totalMoneyMin"},endAttribute:{placeholder:"最大金额",id:"totalMoneyMax"}},{id:"applyTime",label:"盖章时间",type:"picker",requestType:"array",startRequest:"applyStartTime",endRequest:"applyEndTime",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD"},style:{}},{id:"extSeal",label:"",type:"checkbox",checkbox:[{defaultAttribute:{label:"印章外带","true-label":1,"false-label":0},style:{}}]},{id:"querySelf",label:"",type:"checkbox",checkbox:[{defaultAttribute:{label:"我的申请单据","true-label":1,"false-label":0},style:{}}]}],O=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"文件名称/申请人/用印编码"}},{id:"applyTime",label:"申请时间",type:"picker",requestType:"array",startRequest:"applyStartTime",endRequest:"applyEndTime",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":e=>e.getTime()>Date.now(),"default-value":[new Date((new Date).setMonth((new Date).getMonth()-1)),new Date]},style:{}},{id:"fileTypeId",requestParams:"fileTypeId",label:"文件类型",type:"derivable",inCommonUse:!1,defaultAttribute:{placeholder:"请选择",type:"fileType",multiple:!0,joinStr:","},options:[]},{id:"sealId",requestParams:"sealId",label:"印章名称",type:"dialog",defaultAttribute:{type:"JySelectSeal",multiple:!1,placeholder:"+印章名称"},options:[],values:null},{id:"applyUser",requestParams:"applyUserId",label:"申请人",type:"derivable",defaultAttribute:{type:"user",multiple:!1,placeholder:"+申请人"},options:[],values:null},{id:"applyOrgan",requestParams:"applyOrganId",label:"申请部门",type:"derivable",defaultAttribute:{type:"organ",multiple:!1,placeholder:"+申请部门"},options:[],values:null},{id:"relatedCompanyId",label:"往来单位",type:"dialog",defaultAttribute:{type:"JyRelatedCompany",multiple:!1,placeholder:"+往来单位"},options:[],values:null},{id:"totalMoney",label:"金额",type:"scopeInput",startAttribute:{placeholder:"最小金额",id:"totalMoneyMin"},endAttribute:{placeholder:"最大金额",id:"totalMoneyMax"}},{id:"applyTime",label:"盖章时间",type:"picker",requestType:"array",startRequest:"applyStartTime",endRequest:"applyEndTime",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD"},style:{}},{id:"status",label:"用印状态",type:"checkButton",data:[{id:"1",name:"正常"},{id:"0",name:"异常"}]},{id:"extSeal",label:"",type:"checkbox",checkbox:[{defaultAttribute:{label:"印章外带","true-label":1,"false-label":0},style:{}}]},{id:"querySelf",label:"",type:"checkbox",checkbox:[{defaultAttribute:{label:"我的申请单据","true-label":1,"false-label":0},style:{}}]}],V=e=>(D("data-v-b30ef6f9"),e=e(),S(),e),z={class:"PrintControlManagement-recordWithSeal"},$={class:"title"},L=V((()=>u("div",null,"用印记录",-1))),H={class:"title-more"},W=V((()=>u("div",{class:"title-more-add"},null,-1))),K={key:0,class:"title-more-down"},Q=V((()=>u("img",{class:"button-icon",src:w,alt:"",srcset:""},null,-1))),Z=V((()=>u("span",null,"更多操作",-1))),G=h("查看已作废的单据"),X={class:"ap-box"},ee=e({setup(e){const h=a(),D=t(!1),S=t(null),w=l({show:!1,title:"流程终止",formJson:x}),V=t(null),ee=t("listApproving"),ae=t({listApproving:J,listFileVerification:I,listNoResult:U,listNotUse:j,listNoUse:B,listResultDone:N,listUseDone:_,listUsing:k}),te=t(null),le=e=>{e?V.value.getFormData().then((e=>{alert(JSON.stringify(e))})):V.value.resetForm()},oe=l({componentsTitle:{more:{data:[{name:"查看已作废的单据",codle:"1"}]}},componentsTabs:{data:[{label:"待审批",name:"listApproving"},{label:"待文件核验",name:"listFileVerification"},{label:"待智能用印",name:"listNoUse"},{label:"智能用印中",name:"listUsing"},{label:"已完成用印",name:"listUseDone"},{label:"待上传文件归档",name:"listNoResult"},{label:"已完成归档",name:"listResultDone"},{label:"不可用",name:"listNotUse"}]},componentsSearchForm:{data:F,butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:J},componentsDocumentsDetails:{show:!1,visible:[{label:"用印详情",name:"Details-of-Printing"},{label:"审批流程",name:"approval-process"},{label:"领用记录",name:"Record-of-requisition"},{label:"操作记录",name:"operating-record"}]},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量作废"}]},JyElMessageBox:{type:"",column:{},flag:"",show:!1,header:{data:""},content:{data:""}},computedData:[],showToastDialog:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}}});function se(e,a,t,l){"useSealFileName"===a.property&&(oe.componentsDocumentsDetails.show=!0,R.sealBaseInfo({useSealApplyId:e.useSealApplyId}).then((e=>{const a=e.data,t=[{label:"文件名称",value:a.useSealFileName},{label:"单据编码",value:a.useSealApplyNo},{label:"文件类型",value:a.fileTypeName},{label:"文件份数",value:(a.useSealFileNum||0)+"份"},{label:"金额",value:a.totalMoney||"-"},{label:"申请事由",value:a.useSealInfo},{label:"盖章码",value:a.sealCode||"-"},{label:"申请人员",value:a.applyUserName},{label:"申请时间",value:a.applyDatetime},{label:"所属部门",value:a.applyOrganName},{label:"单据状态",value:a.useSealStateName,iconPath:"yuanLv",iconStyle:{},valStyle:{color:"var(--jy-success-6)"}}];a.listSeal.length&&(1===a.listSeal.length?t.splice(t.length-5,0,{label:"印章名称",value:a.listSeal[0].useSealApplySealInfoDto.sealName},{label:"常规盖章",value:a.listSeal[0].useSealApplySealNumDto.applySealNum+"次"}):a.listSeal.forEach(((e,a)=>{t.splice(t.length-5,0,{label:`印章${a+1}名称`,value:e.useSealApplySealInfoDto.sealName},{label:"常规盖章",value:e.useSealApplySealNumDto.applySealNum+"次"})}))),oe.componentsDocumentsDetails.visible[0].basicInformation={show:!0,data:t}})),R.intellect({useSealApplyId:e.useSealApplyId}).then((e=>{var a;(null==(a=e.data)?void 0:a.length)?oe.componentsDocumentsDetails.visible[0].IntelligentPrinting={show:!0,data:e.data}:oe.componentsDocumentsDetails.visible[0].IntelligentPrinting={show:!1,data:[]}})),R.attachment({useSealApplyId:e.useSealApplyId}).then((e=>{var a,t;(null==(a=e.data.fileInfos)?void 0:a.length)||(null==(t=e.data.fileInfoAdds)?void 0:t.length)?oe.componentsDocumentsDetails.visible[0].accessory={show:!0,printedData:e.data.fileInfos,additionalData:e.data.fileInfoAdds}:oe.componentsDocumentsDetails.visible[0].accessory={show:!1,printedData:[],additionalData:[]}})))}function ne(e,a,t,l){oe.JyElMessageBox.type=t.name,oe.JyElMessageBox.column=a,"t-zgj-Revocation"===t.name&&(oe.JyElMessageBox.header.data="提示？",oe.JyElMessageBox.content.data="撤销后本次申请送审将被取消，请问确定要撤销吗？",oe.JyElMessageBox.show=!0),"t-zgj-Void"===t.name&&(oe.JyElMessageBox.header.data="提示？",oe.JyElMessageBox.content.data="作废后当前记录将从当前表格中消失，请问确定要作废吗？",oe.JyElMessageBox.show=!0),"流程终止"===t.name&&(w.show=!0,w.title="流程终止",w.formJson=x),"复核"===t.name&&(w.show=!0,w.title="复核",w.formJson=E),"解除用印限制"===t.name&&(oe.JyElMessageBox.header.data="提示？",oe.JyElMessageBox.content.data="若单据满足【远程盖章】、【实时视频盖章】、【二维码水印校验】、【限时用印】、【印章外带】、【盖前文件内容核验】条件，此操作会取消所有相关校验并将盖章模式转为普通智能用印，以支持用印人跳过限制直接用印，确定要继续吗？",oe.JyElMessageBox.show=!0),"去送审"===t.name&&h.push({name:"InnerPageApplication"})}const ie=()=>{"t-zgj-Revocation"===oe.JyElMessageBox.type?q.withdraw({instanceId:oe.JyElMessageBox.column.gunsSysId}).then((()=>{f("撤销成功"),te.value.reloadData()})).finally((()=>{oe.JyElMessageBox.show=!1})):"t-zgj-Void"===oe.JyElMessageBox.type&&R.invalid({sealUseApplyIds:[oe.JyElMessageBox.column.useSealApplyId]}).then((()=>{te.value.reloadData(),f("作废成功")})).finally((()=>{oe.JyElMessageBox.show=!1}))};function pe(){oe.componentsDocumentsDetails.show=!1}function re(e){oe.componentsTable.header=ae.value[e],ee.value=e,"listApproving"===e||"listUseDone"===e||"listUsing"===e?oe.componentsBatch.data=[{name:"批量作废"}]:"listFileVerification"!==e&&"listNoResult"!==e&&"listNotUse"!==e&&"listNoUse"!==e&&"listResultDone"!==e||(oe.componentsBatch.data=[{name:"批量作废"},{name:"批量流程终止"}]),"listApproving"===e||"listFileVerification"===e||"listNoResult"===e||"listNotUse"===e||"listNoUse"===e||"listResultDone"===e||"listUseDone"===e?oe.componentsTitle.more.data=[{name:"查看已作废的单据"},{name:"导出台账"}]:"listUsing"===e&&(oe.componentsTitle.more.data=[{name:"查看已作废的单据"}]),"listApproving"===e||"listFileVerification"===e||"listNoResult"===e||"listUsing"===e?oe.componentsSearchForm.data=JSON.parse(JSON.stringify(F)):"listNotUse"===e?oe.componentsSearchForm.data=JSON.parse(JSON.stringify(P)):"listNoUse"!==e&&"listResultDone"!==e&&"listUseDone"!==e||(oe.componentsSearchForm.data=JSON.parse(JSON.stringify(O))),g((()=>{te.value.reloadData()}))}function de(e,a){oe.componentsBatch.selectionData=a,S.value={header:{data:"批量作废"},content:{data:"作废后当前记录将从当前表格中消失，请问确定要作废么？"}},oe.showToastDialog.show=!0}const ue=()=>{const e=oe.componentsBatch.selectionData,a=[];e.forEach((e=>{a.push(e.useSealApplyId)})),R.invalid({sealUseApplyIds:a}).then((e=>{te.value.reloadData(),f("作废成功"),oe.showToastDialog.show=!1}))};return o((()=>{})),s((()=>{})),(e,a)=>{const t=n("el-button"),l=n("el-dropdown-item"),o=n("el-dropdown-menu"),s=n("el-dropdown"),f=n("v-form-render"),g=v;return i(),p("div",z,[r(A,{url:`/sealApply/${ee.value}`,ref_key:"jyTable",ref:te,hasTabs:"",componentsSearchForm:m(oe).componentsSearchForm,componentsTableHeader:m(oe).componentsTable.header,componentsBatch:m(oe).componentsBatch,computedData:"listApproving"===ee.value?m(oe).computedData:[],tableClick:"useSealFileName",onCellClick:se,onCustomClick:ne,onClickBatchButton:de},{title:d((()=>[u("div",$,[L,u("div",H,[W,m(oe).componentsTitle.more.data.length>0?(i(),p("div",K,[r(s,null,{dropdown:d((()=>[r(o,null,{default:d((()=>[r(l,{onClick:a[0]||(a[0]=e=>m(h).push({name:"VoidApply"}))},{default:d((()=>[G])),_:1})])),_:1})])),default:d((()=>[r(t,null,{default:d((()=>[Q,Z])),_:1})])),_:1})])):c("",!0)])])])),tabs:d((()=>[u("div",null,[r(T,{activeName:ee.value,data:m(oe).componentsTabs.data,onTabChange:re},null,8,["activeName","data"])])])),_:1},8,["url","componentsSearchForm","componentsTableHeader","componentsBatch","computedData"]),u("div",X,[r(M,{show:m(oe).componentsDocumentsDetails.show,visible:m(oe).componentsDocumentsDetails.visible,onClickClose:pe},null,8,["show","visible"])]),r(g,{"onUpdate:show":a[1]||(a[1]=e=>m(w).show=e),show:m(w).show,title:m(w).title,oneBtn:!1,centerBtn:"",confirmText:e.$t("t-zgj-operation.submit"),concelText:e.$t("t-zgj-operation.cancel"),onClose:le},{default:d((()=>[(i(),y(f,{"form-json":m(w).formJson,"form-data":m(w).formJson,"option-data":m(w).optionData,ref_key:"vFormLibraryRef",ref:V,key:m(w).title},null,8,["form-json","form-data","option-data"]))])),_:1},8,["show","title","confirmText","concelText"]),D.value?(i(),y(m(b),{key:0,show:D.value,"onUpdate:show":a[2]||(a[2]=e=>D.value=e)},null,8,["show"])):c("",!0),r(C,{modelValue:m(oe).JyElMessageBox.show,"onUpdate:modelValue":[a[3]||(a[3]=e=>m(oe).JyElMessageBox.show=e),m(oe).JyElMessageBox.show],JyElMessageBox:m(oe).JyElMessageBox,onSubmitElMessageBox:ie},null,8,["modelValue","JyElMessageBox","onUpdate:modelValue"]),r(m(Y),{"onUpdate:modelValue":a[4]||(a[4]=e=>m(oe).showToastDialog.show=!1),show:m(oe).showToastDialog.show,selectionData:m(oe).componentsBatch.selectionData,showToastDialogContent:S.value,label:"useSealFileName",onSureAction:ue},null,8,["show","selectionData","showToastDialogContent"])])}}},[["__scopeId","data-v-b30ef6f9"]]);export{ee as default};
