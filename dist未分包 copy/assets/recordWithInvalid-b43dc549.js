import{_ as e,I as a,v as l,h as t,j as s,k as o,r as n,o as i,c as r,a as p,w as m,u,m as c,f as d,b3 as y,l as h,M as g,y as b,z as f}from"./main-5d732c2e.js";import{J as v}from"./JyTable-96032540.js";import{c as w}from"./documentsDetails-5d74be5e.js";import{d as S,l as B,a as x,b as J,c as D,e as j,f as M,g as _,h as E}from"./listUsing-651ca84e.js";import{R as A}from"./RecordSealToReview-dca792f4.js";import{a as k}from"./sealApplyIntellect-af0b3a6e.js";import{a as I}from"./actionOneDialog-7ef0bd64.js";import{A as T}from"./ApproverApi-307336dc.js";import"./sangedian-b1ee72e5.js";import"./Layout-db7f64fa.js";import"./searchForm-a97b647c.js";import"./ketanchude-65de0c89.js";import"./KDocumentTypeDialog-1f624042.js";import"./pagination-569fa38f.js";import"./batch-e7262433.js";import"./index-b9b96043.js";import"./cha-kong-1ced20bc.js";import"./JyTabs-6af6e902.js";/* empty css                                                               */import"./table-12670e99.js";/* empty css                                                                         */import"./portion-92af8719.js";/* empty css                                                                */import"./yuan-hui-e1a80bc6.js";import"./request-util-ecea08f4.js";const N={class:"PrintControlManagement-recordWithSeal"},U=(e=>(b("data-v-812c6b64"),e=e(),f(),e))((()=>c("div",{class:"title"},[c("div",null,"已作废单据")],-1))),C={class:"ap-box"},F=e({setup(e){const b=a(),f=l(!1),F=t({show:!1,title:"流程终止",formJson:S}),R=l(null);l({listApproving:B,listFileVerification:x,listNoResult:J,listNotUse:D,listNoUse:j,listResultDone:M,listUseDone:_,listUsing:E});const V=l(null),P=e=>{e?R.value.getFormData().then((e=>{alert(JSON.stringify(e))})):R.value.resetForm()},z=t({componentsSearchForm:{data:[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"文件名称/申请人/用印编码"}},{id:"applyTime",label:"申请时间",type:"picker",requestType:"array",startRequest:"applyStartTime",endRequest:"applyEndTime",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":e=>e.getTime()>Date.now(),"default-value":[new Date((new Date).setMonth((new Date).getMonth()-1)),new Date]},style:{}}],butData:[{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:B},componentsDocumentsDetails:{show:!1,visible:[{label:"用印详情",name:"Details-of-Printing"},{label:"审批流程",name:"approval-process"},{label:"领用记录",name:"Record-of-requisition"},{label:"操作记录",name:"operating-record"}]},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量作废"}]},JyElMessageBox:{type:"",row:"",flag:"",show:!1,header:{data:""},content:{data:""}}});function q(e,a,l,t){"useSealFileName"===a.property&&k.sealBaseInfo({useSealApplyId:e.useSealApplyId}).then((e=>{const a=e.data,l=[{label:"文件名称",value:a.useSealFileName},{label:"单据编码",value:a.useSealApplyNo},{label:"文件类型",value:a.fileTypeName},{label:"文件份数",value:(a.useSealFileNum||0)+"份"},{label:"金额",value:a.totalMoney||"-"},{label:"申请事由",value:a.useSealInfo},{label:"盖章码",value:a.sealCode||"-"},{label:"申请人员",value:a.applyUserName},{label:"申请时间",value:a.applyDatetime},{label:"所属部门",value:a.applyOrganName},{label:"单据状态",value:"APPROVAL"===a.useSealStateId?"用印审批中":"USING"===a.useSealStateId?"智能用印中":"",iconPath:"yuanLv",iconStyle:{},valStyle:{color:"var(--jy-success-6)"}}];a.listSeal.length&&(1===a.listSeal.length?l.splice(l.length-5,0,{label:"印章名称",value:a.listSeal[0].useSealApplySealInfoDto.sealName},{label:"常规盖章",value:a.listSeal[0].useSealApplySealNumDto.applySealNum+"次"}):a.listSeal.forEach(((e,a)=>{l.splice(l.length-5,0,{label:`印章${a+1}名称`,value:e.useSealApplySealInfoDto.sealName},{label:"常规盖章",value:e.useSealApplySealNumDto.applySealNum+"次"})}))),z.componentsDocumentsDetails.visible[0].basicInformation={show:!0,data:l},z.componentsDocumentsDetails.show=!0}))}function O(e,a,l,t){z.JyElMessageBox.type=l.name,z.JyElMessageBox.row=e,"t-zgj-Revocation"===l.name&&(z.JyElMessageBox.header.data="提示？",z.JyElMessageBox.content.data="撤销后本次申请送审将被取消，请问确定要撤销吗？",z.JyElMessageBox.show=!0),"t-zgj-Void"===l.name&&(z.JyElMessageBox.header.data="提示？",z.JyElMessageBox.content.data="作废后当前记录将从当前表格中消失，请问确定要作废吗？",z.JyElMessageBox.show=!0),"流程终止"===l.name&&(F.show=!0,F.title="流程终止",F.formJson=S),"复核"===l.name&&(F.show=!0,F.title="复核",F.formJson=A),"解除用印限制"===l.name&&(z.JyElMessageBox.header.data="提示？",z.JyElMessageBox.content.data="若单据满足【远程盖章】、【实时视频盖章】、【二维码水印校验】、【限时用印】、【印章外带】、【盖前文件内容核验】条件，此操作会取消所有相关校验并将盖章模式转为普通智能用印，以支持用印人跳过限制直接用印，确定要继续吗？",z.JyElMessageBox.show=!0),"去送审"===l.name&&b.push({name:"InnerPageApplication"})}const L=()=>{"t-zgj-Revocation"===z.JyElMessageBox.type?T.withdraw({taskId:z.JyElMessageBox.row.taskId}).then((()=>{k.cancel({sealUseApplyIds:z.JyElMessageBox.row.useSealApplyId}).then((()=>{V.value.reloadData()})).finally((()=>{z.JyElMessageBox.show=!1}))})).finally((()=>{z.JyElMessageBox.show=!1})):"t-zgj-Void"===z.JyElMessageBox.type&&T.withdraw({taskId:z.JyElMessageBox.row.taskId}).then((()=>{k.invalid({sealUseApplyIds:z.JyElMessageBox.row.useSealApplyId}).then((()=>{V.value.reloadData()})).finally((()=>{z.JyElMessageBox.show=!1}))})).finally((()=>{z.JyElMessageBox.show=!1}))};function Y(){z.componentsDocumentsDetails.show=!1}return s((()=>{})),o((()=>{})),(e,a)=>{const l=n("v-form-render"),t=g;return i(),r("div",N,[p(v,{url:"/sealApply/listInvalid",ref_key:"jyTable",ref:V,method:"POST",componentsSearchForm:u(z).componentsSearchForm,componentsTableHeader:u(z).componentsTable.header,componentsBatch:u(z).componentsBatch,tableClick:"useSealFileName",onCellClick:q,onCustomClick:O,onClickBatchButton:e.clickBatchButton},{title:m((()=>[U])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch","onClickBatchButton"]),c("div",C,[p(w,{show:u(z).componentsDocumentsDetails.show,visible:u(z).componentsDocumentsDetails.visible,onClickClose:Y},null,8,["show","visible"])]),p(t,{"onUpdate:show":a[0]||(a[0]=e=>u(F).show=e),show:u(F).show,title:u(F).title,oneBtn:!1,confirmText:e.$t("t-zgj-operation.submit"),concelText:e.$t("t-zgj-operation.cancel"),onClose:P},{default:m((()=>[(i(),d(l,{"form-json":u(F).formJson,"form-data":u(F).formJson,"option-data":u(F).optionData,ref_key:"vFormLibraryRef",ref:R,key:u(F).title},null,8,["form-json","form-data","option-data"]))])),_:1},8,["show","title","confirmText","concelText"]),f.value?(i(),d(u(y),{key:0,show:f.value,"onUpdate:show":a[1]||(a[1]=e=>f.value=e)},null,8,["show"])):h("",!0),p(I,{modelValue:u(z).JyElMessageBox.show,"onUpdate:modelValue":[a[2]||(a[2]=e=>u(z).JyElMessageBox.show=e),u(z).JyElMessageBox.show],JyElMessageBox:u(z).JyElMessageBox,onSubmitElMessageBox:L},null,8,["modelValue","JyElMessageBox","onUpdate:modelValue"])])}}},[["__scopeId","data-v-812c6b64"]]);export{F as default};
