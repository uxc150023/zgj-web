System.register(["./JyTabs-legacy-3f34f463.js","./documentsDetails-legacy-b3398eb5.js","./RecordSealToReview-legacy-8ad20d94.js","./main-legacy-80c027be.js","./index-legacy-a536e825.js","./ketanchude-legacy-3429c6dd.js","./index-legacy-9192b6ea.js","./ModelApi-legacy-9981517d.js","./request-util-legacy-b61562cd.js","./ApproverApi-legacy-8f2f2261.js","./JyTable-legacy-cb6848b2.js","./JyTabs.vue_vue_type_style_index_0_scoped_5e06bfe2_lang-legacy-bb1152fe.js","./cha-kong-legacy-f9de9560.js","./table-legacy-3557b439.js","./sangedian-legacy-5b82475d.js","./documentsDetails.vue_vue_type_style_index_0_scoped_204b6fa9_lang-legacy-fafff2de.js","./portion-legacy-b0849eee.js","./portion.vue_vue_type_style_index_0_scoped_3abd16ad_lang-legacy-2c813e37.js","./yuan-hui-legacy-3805e29d.js","./index-legacy-1964794f.js","./home-back-legacy-a6f9f130.js","./logo-legacy-f592312c.js","./Layout-legacy-b2631a91.js","./searchForm-legacy-661aae1d.js","./KDocumentTypeDialog-legacy-9730cc30.js","./pagination-legacy-abc2a695.js","./batch-legacy-5a4e36c5.js"],(function(e,a){"use strict";var t,o,l,n,i,s,r,d,c,p,m,u,f,b,g,v,h,y,x,I,S,D,w,k,_,C,T,j,A,z,B,R,V,q,F,M,L,N,P,O,U,J,W,E,$,K,G=document.createElement("style");return G.textContent=".el-scrollbar-nomal[data-v-4f77a3f6]{height:calc(100% - 200px);padding:10px 24px 68px 0}.el-scrollbar-add[data-v-4f77a3f6]{height:calc(100% - 260px)}.el-form-item__content[data-v-4f77a3f6]{margin-bottom:12px}[data-v-4f77a3f6] .content-custom{padding:0}.top-container[data-v-4f77a3f6]{height:100%}.approval-footer[data-v-4f77a3f6]{border-radius:4px;position:absolute;bottom:0px;width:100%;min-height:220px;left:0;box-sizing:border-box;padding:20px 24px 12px;background:#ffffff;box-shadow:0 -9px 22px rgba(0,0,0,.03);overflow:auto;z-index:8}.approval-footer .footer-approver[data-v-4f77a3f6]{font:size 14px;color:rgba(0,0,0,.45);margin-right:16px}.approval-footer .footer-btns[data-v-4f77a3f6]{text-align:center;padding-top:6px}.hidePoper{display:none}.approval-footer .el-divider{margin:8px 0 16px}.approval-footer .hasContent .el-input__wrapper,.approval-footer .hasContent .el-input__inner{-webkit-text-fill-color:#000}.approval-footer .contentBoxes{display:flex;justify-content:space-between;width:100%}.approval-footer .contentBoxes .xian{color:rgba(0,0,0,.45);font-size:12px}.approval-footer .ap-box-contBox{width:100%;position:relative;display:flex;align-items:center}.approval-footer .ap-box-contBox .el-input__suffix{display:none}.approval-footer .ap-box-contBox .el-select .el-input.is-disabled .el-input__wrapper,.approval-footer .ap-box-contBox .el-select .el-input.is-disabled .el-input__inner{cursor:pointer}.approval-footer .ap-box-contBox .el-input.is-disabled .el-input__wrapper{background-color:#fff}.approval-footer .ap-box-contBox .ap-box-contBox-icon{position:absolute;right:.8rem;cursor:pointer;height:14px;display:flex;align-items:center}.approval-footer .ap-box-contBox .ap-box-contBox-icon .ap-box-contBox-icon-img{height:100%}.approval-footer .ap-box-contBox :deep .el-input__inner{padding-right:1.5rem;box-sizing:border-box}.el-range-editor.is-disabled input{background-color:transparent}.approvalFlow-approvalFlow[data-v-8d5de101]{margin:0%}.approvalFlow-approvalFlow .title[data-v-8d5de101]{display:flex;align-items:center;justify-content:space-between}.approvalFlow-approvalFlow .batch[data-v-8d5de101]{display:flex;align-items:center}.approvalFlow-approvalFlow .batch .batch-desc[data-v-8d5de101]{margin-right:.8571428571rem}.select-person[data-v-8d5de101]{display:flex;align-items:center}.select-person>span[data-v-8d5de101]{font-size:14px;font-weight:700;margin-right:20px}.select-person>div[data-v-8d5de101]{cursor:pointer}.components-documentsDetails[data-v-8d5de101]{margin:0%}.components-documentsDetails .ap-cont[data-v-8d5de101]{height:100%}.components-documentsDetails .ap-title[data-v-8d5de101]{width:100%;display:flex;align-items:center;justify-content:space-between}.components-documentsDetails .ap-title .title-name-span[data-v-8d5de101]{font-size:var(--jy-font-size-title-2)}.components-documentsDetails .ap-title .title-cion-img[data-v-8d5de101]{width:1rem;margin-right:1rem;cursor:pointer}.components-documentsDetails .ap-title .quanping[data-v-8d5de101]{width:1.2rem}.components-documentsDetails .ap-Tabs[data-v-8d5de101]{display:flex}.components-documentsDetails .ap-Tabs .ap-Tabs-cont[data-v-8d5de101]{flex-grow:1}.components-documentsDetails .ap-Tabs .ap-Tabs-sub[data-v-8d5de101]{width:5rem;margin-bottom:14px;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-end;border-bottom:1px solid var(--jy-color-border-2)}.components-documentsDetails .ap-Tabs .ap-Tabs-sub .ap-Tabs-sub-icon[data-v-8d5de101]{margin-right:.5rem}.components-documentsDetails .ap-Tabs .ap-Tabs-sub .ap-Tabs-sub-text[data-v-8d5de101]{cursor:pointer;color:var(-color-text-2)}.components-documentsDetails .ap-cont-tabsCont[data-v-8d5de101]{width:calc(100% + 18px);height:calc(100% - 80px)}.components-documentsDetails .ap-cont-tabsCont .arco-scrollbar[data-v-8d5de101]{height:100%}.components-documentsDetails .ap-cont-tabsCont .scrollbar-div[data-v-8d5de101]{padding-right:18px;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .ap-cont-box-title[data-v-8d5de101]{border-bottom:1px solid var(--jy-color-border-2);padding:0rem 0 0rem .8rem;box-sizing:border-box;background:url(../../assets/svg/shuxian-after.svg) no-repeat left center;display:flex;justify-content:space-between;align-items:center;height:2.3rem}.components-documentsDetails .ap-cont-tabsCont .ap-cont-box-title .ap-cont-box-title-label[data-v-8d5de101]{font-size:var(--jy-font-size-title-1);font-weight:var(--jy-font-weight-400)}.components-documentsDetails .ap-cont-tabsCont .ap-cont-box-title .ap-cont-box-title-xiazai[data-v-8d5de101]{display:flex;align-items:center}.components-documentsDetails .ap-cont-tabsCont .ap-cont-box-title .ap-cont-box-title-xiazai .ap-cont-box-title-xiazai-icon[data-v-8d5de101]{margin-right:.5rem}.components-documentsDetails .ap-cont-tabsCont .ap-cont-box-title .ap-cont-box-title-xiazai .ap-cont-box-title-xiazai-text[data-v-8d5de101]{color:var(--jy-color-text-2)}.components-documentsDetails .ap-cont-tabsCont .ap-cont-box-title .ap-cont-box-title-but .ap-cont-box-title-but-box[data-v-8d5de101]{display:flex;align-items:center}.components-documentsDetails .ap-cont-tabsCont .ap-cont-box-title .ap-cont-box-title-but .ap-cont-box-title-but-icon[data-v-8d5de101]{width:.8rem;margin-right:.2rem}.components-documentsDetails .ap-cont-tabsCont .ap-cont-box-details[data-v-8d5de101]{padding:.5rem 0;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .Details-of-Printing .sealDetails-basic-information .sealDetails-basic-information-details[data-v-8d5de101]{display:flex;flex-flow:wrap;padding:.5rem 0;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .Details-of-Printing .sealDetails-basic-information .sealDetails-basic-information-details .sealDetails-basic-information-list[data-v-8d5de101]{display:flex;align-items:center;width:50%;padding:.5rem 0;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .Details-of-Printing .sealDetails-basic-information .sealDetails-basic-information-details .sealDetails-basic-information-list .sealDetails-basic-information-list-label[data-v-8d5de101]{width:4.5rem;display:flex;justify-content:flex-end;color:var(--jy-color-text-3)}.components-documentsDetails .ap-cont-tabsCont .Details-of-Printing .sealDetails-basic-information .sealDetails-basic-information-details .sealDetails-basic-information-list .sealDetails-basic-information-list-value[data-v-8d5de101]{padding:0rem 0 0rem .5rem;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .Particulars-of-Seal .sealDetails-basic-information .sealDetails-basic-information-details[data-v-8d5de101]{display:flex;flex-flow:wrap;padding:.5rem 0;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .Particulars-of-Seal .sealDetails-basic-information .sealDetails-basic-information-details .sealDetails-basic-information-list[data-v-8d5de101]{display:flex;align-items:center;width:50%;padding:.5rem 0;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .Particulars-of-Seal .sealDetails-basic-information .sealDetails-basic-information-details .sealDetails-basic-information-list .sealDetails-basic-information-list-label[data-v-8d5de101]{width:7rem;display:flex;justify-content:flex-end;color:var(--jy-color-text-3)}.components-documentsDetails .ap-cont-tabsCont .Particulars-of-Seal .sealDetails-basic-information .sealDetails-basic-information-details .sealDetails-basic-information-list .sealDetails-basic-information-list-value[data-v-8d5de101]{padding:0rem 0 0rem .5rem;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .Details-of-Document .sealDetails-basic-information .sealDetails-basic-information-details[data-v-8d5de101]{display:flex;flex-flow:wrap;padding:.5rem 0;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .Details-of-Document .sealDetails-basic-information .sealDetails-basic-information-details .sealDetails-basic-information-list[data-v-8d5de101]{display:flex;align-items:center;width:50%;padding:.5rem 0;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .Details-of-Document .sealDetails-basic-information .sealDetails-basic-information-details .sealDetails-basic-information-list .sealDetails-basic-information-list-label[data-v-8d5de101]{width:7rem;display:flex;justify-content:flex-end;color:var(--jy-color-text-3)}.components-documentsDetails .ap-cont-tabsCont .Details-of-Document .sealDetails-basic-information .sealDetails-basic-information-details .sealDetails-basic-information-list .sealDetails-basic-information-list-value[data-v-8d5de101]{padding:0rem 0 0rem .5rem;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .ap-cont-ma[data-v-8d5de101]{height:3rem;display:flex;align-items:center}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .ap-cont-ma .ap-cont-ma-text[data-v-8d5de101]{color:var(--jy-color-text-3)}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .ap-cont-ma .ap-cont-ma-value[data-v-8d5de101]{color:var(--jy-primary-6);font-size:var(--jy-font-size-title-2)}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-list[data-v-8d5de101]{display:flex;align-items:center;justify-content:space-between;height:2.5rem}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-list .SealInformation-details-list-cont[data-v-8d5de101]{display:flex;align-items:center}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-list .SealInformation-details-list-cont .SealInformation-details-list-cont-icon[data-v-8d5de101]{display:flex;align-items:center;margin-right:.5rem}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-list .SealInformation-details-list-cont .SealInformation-details-list-cont-val[data-v-8d5de101]{display:flex;align-items:center}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-list .SealInformation-details-list-cont .SealInformation-details-list-cont-val .iconPathValue[data-v-8d5de101]{margin-right:.5rem}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-title[data-v-8d5de101]{display:flex;align-items:center;height:2.5rem}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-title .SealInformation-details-image-title-icon[data-v-8d5de101]{display:flex;align-items:center;margin-right:.5rem}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-cont[data-v-8d5de101]{display:flex;flex-flow:wrap}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-cont .SealInformation-details-image-cont-list[data-v-8d5de101]{width:50%;display:flex;min-width:25rem;padding:.5rem 0;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-cont .SealInformation-details-image-cont-list .SealInformation-details-image-cont-list-img[data-v-8d5de101]{position:relative;width:auto}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-cont .SealInformation-details-image-cont-list .SealInformation-details-image-cont-list-img .SealInformation-details-image-cont-list-img-icon[data-v-8d5de101]{position:absolute;right:0%;top:0%;width:40%}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-cont .SealInformation-details-image-cont-list .SealInformation-details-image-cont-list-img .SealInformation-details-image-cont-list-img-time[data-v-8d5de101]{position:absolute;bottom:0%;text-align:center;width:100%;background-color:var(--jy-color-fill-65);color:var(--jy-in-common-use-1);height:2rem;display:flex;align-items:center;justify-content:center}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-cont .SealInformation-details-image-cont-list .SealInformation-details-image-cont-list-cont[data-v-8d5de101]{flex-grow:1;padding:0 .5rem;box-sizing:border-box;display:flex;align-content:space-between;flex-flow:wrap}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-cont .SealInformation-details-image-cont-list .SealInformation-details-image-cont-list-cont .SealInformation-details-image-cont-list-cont-list[data-v-8d5de101]{width:100%;display:flex}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-cont .SealInformation-details-image-cont-list .SealInformation-details-image-cont-list-cont .SealInformation-details-image-cont-list-cont-list .SealInformation-details-image-cont-list-cont-list-label[data-v-8d5de101]{width:4.5rem;display:flex;justify-content:flex-end;color:var(--jy-color-text-3)}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-cont .SealInformation-details-image-cont-list .SealInformation-details-image-cont-list-cont .SealInformation-details-image-cont-list-cont-list .SealInformation-details-image-cont-list-cont-list-subValue[data-v-8d5de101]{display:flex;align-items:center;padding-left:.5rem;box-sizing:border-box}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-cont .SealInformation-details-image-cont-list .SealInformation-details-image-cont-list-cont .SealInformation-details-image-cont-list-cont-list .SealInformation-details-image-cont-list-cont-list-subValue .SealInformation-details-image-cont-list-cont-list-subValue-icon[data-v-8d5de101]{margin-right:.2rem}.components-documentsDetails .ap-cont-tabsCont .Record-of-requisition .SealInformation .SealInformation-details-image .SealInformation-details-image-cont .SealInformation-details-image-cont-list .SealInformation-details-image-cont-list-cont .SealInformation-details-image-cont-list-cont-list .SealInformation-details-image-cont-list-cont-list-subValue .SealInformation-details-image-cont-list-cont-list-subValue-text[data-v-8d5de101]{color:var(--jy-danger-6)}\n",document.head.appendChild(G),{setters:[e=>{t=e.c},e=>{o=e.c},e=>{l=e.R},e=>{n=e._,i=e.v,s=e.h,r=e.s,d=e.i,c=e.j,p=e.r,m=e.o,u=e.c,f=e.a,b=e.w,g=e.V,v=e.P,h=e.Q,y=e.p,x=e.u,I=e.m,S=e.f,D=e.q,w=e.l,k=e.F,_=e.e,C=e.g,T=e.t,j=e.b3,A=e.b4,z=e.Y,B=e.M,R=e.y,V=e.z,q=e.aW,F=e.b1,M=e.k},e=>{L=e.default},e=>{N=e._},e=>{P=e.b,O=e.l,U=e._,J=e.a},e=>{W=e.M},e=>{E=e.R},e=>{$=e.A},e=>{K=e.J},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){class a{static findPage(e){return E.getAndLoadData("/ruTask/page",e)}static findList(e){return E.getAndLoadData("/ruTask/list",e)}static add(e){return E.post("/ruTask/add",e)}static edit(e){return E.post("/ruTask/edit",e)}static delete(e){return E.post("/ruTask/delete",e)}static detail(e){return E.getAndLoadData("/ruTask/detail",e)}static preList(e){return E.getAndLoadData("/ruTask/pre",e)}}class G{static detailByTaskId(e){return E.getAndLoadData("/nodeAttr/detailByTaskId",e)}}const Q=e=>(R("data-v-4f77a3f6"),e=e(),V(),e),H={class:"top-container"},Y={key:0,class:"top-container"},X={class:"approval-footer"},Z=C("同意"),ee=C("不同意"),ae=C("转交"),te={class:"contentBoxes"},oe={class:"ap-box-contBox"},le=[Q((()=>I("img",{class:"ap-box-contBox-icon-img",src:N,alt:""},null,-1)))],ne={class:"select-box-contBox"},ie={key:0,class:"contentBoxes"},se={class:"ap-box-contBox"},re=[Q((()=>I("img",{class:"ap-box-contBox-icon-img",src:N,alt:""},null,-1)))],de={class:"footer-btns"},ce={props:{show:{type:Boolean,default:!1},title:{type:String,default:""},params:{type:Object,default:()=>({})}},emits:["update:show","on-confirm","on-cancel"],setup(e,{emit:t}){const o=e,{toUgroup:l}=P(),{backApprovalTypeDatas:n}=O(),R=i(!1),V=i("first"),F=i([{name:"用印详情",value:"first"},{name:"审批流程",value:"second"},{name:"操作记录",value:"third"}]),M=i(null),N=i(!1);i(0);const J=i(null),E=i(null),K=i([]),Q=i([]),ce=i({height:"calc(100% - 270px)",overflow:"hidden"}),pe=i(""),me=s({searchSelected:[],carbonSelected:[],approverSelected:[],nextApproverSelected:[],form:{remark:"同意",carbon:!1,suggest:"1",nextApprover:"",nextApproverIds:[],addSignMode:[2,3].includes(o.params.approvalMode)?3:4===o.params.approvalMode?4:3,destTaskId:"",backType:"",adminId:"",approver:""},rules:{suggest:[{required:!0,message:"请选择审批选项",trigger:"blur"}],nextApprover:[{required:!0,message:"请选择下一步审批人"}]}}),ue=e=>{t("on-cancel",!1)},fe=r({get:()=>o.show,set(e){t("update:show",e)}}),be=()=>{E.value.disableWidgets(o.params.disableWidgets),E.value.hideWidgets(o.params.hideWidgets),E.value.setFormData(o.params.formData)},ge=()=>{M.value.validate((e=>{if(e){N.value=!0;const e=q;let a={},t={};const l=o.params.formData,n=i(null);E.value.getFormData().then((async i=>{n.value=i;for(const o in n.value)e.indexOf(o)>-1?a={...a,[o]:i[o]?i[o]:l[o]}:t={...t,[o]:l[o]};const s=await A.formQuery({formMessageId:l.formMessageId}),r=await A.queryIdByGunsId({gunsSysId:o.params.instanceId});await A.editForm({formMessageId:l.formMessageId,formVersionId:l.formVersionId,flowVersionId:l.flowVersionId,flowMessageId:l.flowMessageId,applyTypeId:s.data.applyTypeId,sealUseTypeId:s.data.sealUseTypeId,gunsSysId:o.params.instanceId,sealUseApplyId:r.data,customApplyField:"{}"===JSON.stringify(t)?null:t,...a}),"1"===me.form.suggest?he({...a,formMessageId:l.formMessageId,formVersionId:l.formVersionId,flowVersionId:l.flowVersionId,flowMessageId:l.flowMessageId}):"2"===me.form.suggest?ve():"3"===me.form.suggest?xe():"4"===me.form.suggest?ye():"5"===me.form.suggest?Ie():me.form.suggest}))}}))},ve=e=>{const a={instanceId:o.params.instanceId,modelId:o.params.modelId,formData:o.params.formData,definitionId:o.params.definitionId,remark:me.form.remark,suggest:2};$.reject(a).then((e=>{"00000"===e.code&&(z.success("提交成功"),t("on-confirm")),N.value=!1})).catch((()=>{N.value=!1}))},he=e=>{const a={instanceId:o.params.instanceId,modelId:o.params.modelId,formData:e,definitionId:o.params.definitionId,remark:me.form.remark,suggest:1};$.agree(a).then((e=>{"00000"===e.code&&(z.success("提交成功！"),t("on-confirm",e)),N.value=!1})).catch((()=>{N.value=!1}))},ye=()=>{const e=[];me.approverSelected.forEach((a=>{e.push(a.value)}));const a={taskId:o.params.taskId,assigneeList:e,addSignMode:me.form.addSignMode,whisper:me.form.remark};$.addSign(a).then((e=>{"00000"===e.code&&(z.success("加签成功！"),t("on-confirm",e)),N.value=!1})).catch((()=>{N.value=!1}))},xe=()=>{const e=[];me.approverSelected.forEach((a=>{e.push(a.value)}));const a={taskId:o.params.taskId,assigneeList:e,whisper:me.form.remark};$.turn(a).then((e=>{"00000"===e.code&&(z.success("转交成功！"),t("on-confirm",e)),N.value=!1})).catch((()=>{N.value=!1}))},Ie=async()=>{try{const e={instanceId:o.params.instanceId,modelId:o.params.modelId,definitionId:o.params.definitionId,taskId:o.params.taskId,suggest:1,remark:me.form.remark};$.consultSubmit(e).then((e=>{N.value=!1,we()})).catch((()=>{N.value=!1}))}catch(e){N.value=!1}},Se=async()=>{try{const e={taskId:o.params.taskId,instanceId:o.params.instanceId},t=await G.detailByTaskId(e),i=t.allowBackType,s=t.backApprovalType;if(s){const e=l(s);n.forEach((a=>{e.includes(a.value)&&K.value.push(a)}))}if(2===i){const t=await a.preList(e);t&&t.length>0&&(Q.value=[],t.forEach((e=>{Q.value.push({label:e.approverWrapper,value:e.taskId,popovers:[{title:e.nodeName,content:`任务类型:${e.taskTypeWrapper}`},{content:`接收时间:${e.createTime}`},{content:`审批时间:${e.updateTime}`}]})})))}}finally{}},De=e=>{pe.value=e,"carbon"===e?me.searchSelected=me.carbonSelected.map((e=>({id:e.value,name:e.label,type:"user"}))):"approver"===e?me.searchSelected=me.approverSelected.map((e=>({id:e.value,name:e.label,type:"user"}))):"nextApprover"===e&&(me.searchSelected=me.nextApproverSelected.map((e=>({id:e.value,name:e.label,type:"user"})))),R.value=!0},we=e=>{t("on-cancel",e),fe.value=!1},ke=e=>{"1"===e?(me.form.remark="同意",me.rules={suggest:[{required:!0,message:"请选择审批选项",trigger:"change"}],nextApprover:[{required:!0,message:"请选择下一步审批人"}]}):"2"===e?(me.form.remark="不同意",me.rules={suggest:[{required:!0,message:"请选择审批选项",trigger:"change"}]}):me.form.remark="请审批","3"!==e&&"4"!==e&&"5"!==e||(me.rules={suggest:[{required:!0,message:"请选择审批选项",trigger:"change"}],approver:[{required:!0,message:"请选择审批人",trigger:"change"}]}),"6"===e&&Se()},_e=e=>{if("approver"===pe.value)me.approverSelected=e.map((e=>({label:e.name,value:e.id}))),me.form.approver=e;else if("carbon"===pe.value)me.carbonSelected=e.map((e=>({label:e.name,value:e.id})));else if("nextApprover"===pe.value){me.nextApproverSelected=e.map((e=>({label:e.name,value:e.id})));const a=[];e.forEach((e=>{a.push(e.name),me.form.nextApproverIds.push(e.id)})),me.form.nextApprover=a.join(",")}},Ce=e=>{me.searchSelected=Te(me.searchSelected,e)},Te=(e,a)=>Array.isArray(e)&&0!==e.length?e.filter((e=>e.id!==a)):e,je=i(null);return d((()=>o.show),(()=>{o.show&&(W.predictionDesign({formData:o.params.formData,instanceId:o.params.instanceId,definitionId:o.params.definitionId}).then((e=>{je.value=e.data})),(async()=>{await a.findList({instanceId:o.params.instanceId})})())})),c((()=>{})),(e,a)=>{const t=L,l=p("el-scrollbar"),n=p("el-radio"),i=p("el-radio-group"),s=p("el-form-item"),r=p("el-option"),d=p("el-select"),c=p("el-checkbox"),A=p("el-input"),z=p("el-form"),q=p("el-button"),P=B;return m(),u(k,null,[f(P,{"onUpdate:show":a[12]||(a[12]=e=>fe.value=e),show:x(fe),"destroy-on-close":"",title:e.$t(o.title),oneBtn:!1,confirmText:e.$t("t-zgj-operation.submit"),concelText:e.$t("t-zgj-operation.cancel"),height:650,width:930,footer:!1,onClose:ue,noScroll:!1},{noScroll:b((()=>[f(g,{label:F.value,active:V.value,"onUpdate:active":a[0]||(a[0]=e=>V.value=e),border:!1},null,8,["label","active"]),v(f(l,{class:y(["el-scrollbar-nomal",{"el-scrollbar-add":"3"===x(me).form.suggest||"4"===x(me).form.suggest||"5"===x(me).form.suggest}]),always:""},{default:b((()=>[f(t,{mode:"render",formJson:o.params.formJson,formData:o.params.formData,ref_key:"formInformation",ref:E,onOnLoaded:be},null,8,["formJson","formData"])])),_:1},8,["class"]),[[h,"first"===V.value]]),v(I("div",H,[je.value?(m(),S(U,D({key:0,ref_key:"flowDesign",ref:J},{readable:!0,mapable:!1,scroll:!0,top:"20"},{node:je.value,wrapStyle:ce.value}),null,16,["node","wrapStyle"])):w("",!0)],512),[[h,"second"===V.value]]),"third"===V.value?(m(),u("div",Y)):w("",!0),I("div",X,[f(z,{model:x(me).form,rules:x(me).rules,ref_key:"vFormRef",ref:M,"label-width":"110px"},{default:b((()=>[f(s,{label:"审批选项",prop:"suggest"},{default:b((()=>[f(i,{onChange:ke,modelValue:x(me).form.suggest,"onUpdate:modelValue":a[1]||(a[1]=e=>x(me).form.suggest=e)},{default:b((()=>[f(n,{label:"1"},{default:b((()=>[Z])),_:1}),f(n,{label:"2"},{default:b((()=>[ee])),_:1}),f(n,{label:"3"},{default:b((()=>[ae])),_:1}),(m(!0),u(k,null,_(o.params.buttons.filter((e=>["agree","reject"].includes(e.buttonCode))),(e=>(m(),S(n,{label:e.buttonCode,key:e.buttonCode},{default:b((()=>[C(T(e.buttonName),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),"5"===x(me).form.suggest||"4"===x(me).form.suggest||"3"===x(me).form.suggest?(m(),S(s,{key:0,label:"审批人",prop:"approver"},{default:b((()=>[I("div",te,[I("div",oe,[f(d,{modelValue:x(me).approverSelected,"onUpdate:modelValue":a[2]||(a[2]=e=>x(me).approverSelected=e),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":6,placeholder:"+请选择审批人",style:{width:"100%"},"popper-class":"hidePoper",class:y({hasContent:x(me).approverSelected.length}),onClick:a[3]||(a[3]=e=>De("approver"))},{default:b((()=>[(m(!0),u(k,null,_(x(me).approverSelected,(e=>(m(),S(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","class"]),I("div",{class:"ap-box-contBox-icon",onClick:a[4]||(a[4]=e=>De("approver"))},le)])])])),_:1})):w("",!0),Q.value.length>0?(m(),S(s,{key:1,label:"被退回人",name:"destTaskId",rules:[{required:!0,message:"请选择人员!"}]},{default:b((()=>[f(i,{value:x(me).form.destTaskId,"onUpdate:value":a[5]||(a[5]=e=>x(me).form.destTaskId=e),class:"w-fill",size:e.size},{default:b((()=>[(m(!0),u(k,null,_(Q.value,((e,a)=>(m(),S(n,{key:a,value:e.value},{default:b((()=>[I("span",null,T(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","size"])])),_:1})):w("",!0),"6"===x(me).form.suggest?(m(),S(s,{key:2,label:"退回后发起审批",prop:"approver"},{default:b((()=>[f(d,{style:{width:"264px"},modelValue:e.sate.form.adminId,"onUpdate:modelValue":a[6]||(a[6]=a=>e.sate.form.adminId=a),filterable:"",onChange:e.changeAdmin},{default:b((()=>[(m(!0),u(k,null,_(K.value,((a,t)=>(m(),S(r,{key:t,label:a[e.labelName],value:a[e.valueName]},{default:b((()=>[C(T(a[e.labelName]),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})):w("",!0),f(s,{label:"添加抄送",prop:"carbon"},{default:b((()=>[I("div",ne,[f(c,{modelValue:x(me).form.carbon,"onUpdate:modelValue":a[7]||(a[7]=e=>x(me).form.carbon=e),style:{"margin-right":"12px"},size:"mini"},null,8,["modelValue"]),x(me).form.carbon?(m(),u("div",ie,[I("div",se,[f(d,{modelValue:x(me).carbonSelected,"onUpdate:modelValue":a[8]||(a[8]=e=>x(me).carbonSelected=e),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":6,placeholder:"+请选择抄送人",style:{width:"100%"},"popper-class":"hidePoper",class:y({hasContent:x(me).carbonSelected.length}),onClick:a[9]||(a[9]=e=>De("carbon")),onRemoveTag:Ce},{default:b((()=>[(m(!0),u(k,null,_(x(me).carbonSelected,(e=>(m(),S(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","class"]),I("div",{class:"ap-box-contBox-icon",onClick:a[10]||(a[10]=e=>De("carbon"))},re)])])):w("",!0)])])),_:1}),f(s,{label:"审批意见",prop:"remark"},{default:b((()=>[f(A,{modelValue:x(me).form.remark,"onUpdate:modelValue":a[11]||(a[11]=e=>x(me).form.remark=e),maxlength:"100","show-word-limit":"",type:"textarea",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),I("div",de,[f(q,{type:"primary",loading:N.value,onClick:ge},{default:b((()=>[C(T(e.$t("t-zgj-operation.submit")),1)])),_:1},8,["loading"]),f(q,{onClick:we},{default:b((()=>[C(T(e.$t("t-zgj-operation.cancel")),1)])),_:1})])])])),_:1},8,["show","title","confirmText","concelText"]),R.value?(m(),S(x(j),{key:0,show:R.value,"onUpdate:show":a[13]||(a[13]=e=>R.value=e),tabsShow:["user"],"onUpdate:searchSelected":_e,searchSelected:x(me).searchSelected},null,8,["show","searchSelected"])):w("",!0)],64)}}},pe=n(ce,[["__scopeId","data-v-4f77a3f6"]]),me=[{prop:"instanceTitle",label:"流程名称",sortable:!0,"min-width":190},{prop:"subTypeName",label:"流程类型",sortable:!0,"min-width":150},{prop:"applicantWrapper",label:"申请人",sortable:!0,"min-width":150},{prop:"orgName",label:"申请部门",sortable:!0,"min-width":150},{prop:"createTime",label:"申请时间",sortable:!0,"min-width":180},{prop:"caozuo",label:"操作",fixed:"right","min-width":80,rankDisplayData:[{name:"t-zgj-Approval",label:"审批"}]}],ue=[{prop:"instanceTitle",label:"流程名称",sortable:!0,"min-width":190},{prop:"subTypeName",label:"流程类型",sortable:!0,"min-width":150},{prop:"applicantWrapper",label:"申请人",sortable:!0,"min-width":150},{prop:"orgName",label:"申请部门",sortable:!0,"min-width":150},{prop:"createTime",label:"申请时间",sortable:!0,"min-width":180},{prop:"updateTime",label:"审批时间",sortable:!0,"min-width":180},{prop:"taskStatusWrapper",label:"审批状态",sortable:!0,"min-width":150},{prop:"caozuo",label:"操作",fixed:"right","min-width":80,rankDisplayData:[{name:"t-zgj-F_WORKFLOW_RE_APPROVAL",label:"重批"}]}];class fe{static findPage(e){return E.getAndLoadData("/nodeButton/page",e)}static findList(e){return E.getAndLoadData("/nodeButton/list",e)}static add(e){return E.post("/nodeButton/add",e)}static edit(e){return E.post("/nodeButton/edit",e)}static delete(e){return E.post("/nodeButton/delete",e)}static detail(e){return E.getAndLoadData("/nodeButton/detail",e)}}class be{static findPage(e){return E.getAndLoadData("/ruInstance/page",e)}static add(e){return E.post("/ruInstance/add",e)}static edit(e){return E.post("/ruInstance/edit",e)}static delete(e){return E.post("/ruInstance/delete",e)}static detail(e){return E.getAndLoadData("/ruInstance/detail",e)}}const ge={class:"approvalFlow-approvalFlow"},ve={class:"title"},he={class:"title-more"},ye={class:"title-more-add"},xe={class:"ap-box"};e("default",n({setup(e){const a=F(),n=i({show:!1,title:"t-zgj-Approval",formJson:l}),r=i(null),d=i(""),c=s({searchSelected:[],approvalModes:{1:"审批中",2:"会签中",3:"会签中",4:"或签中"},params:{formJson:null,formData:{},taskId:"",instanceId:"",approvalMode:"",modelName:"",modelId:"",nodeId:"",definitionId:"",buttons:[],detailData:[],basicInformation:{title:"基本信息",show:!0,data:[{label:"单据名称",value:"上海建筑材料清单合同明细"},{label:"文件类型：",value:"1份"},{label:"金额：",value:"110,88,00"},{label:"申请事由：",value:"20次"},{label:"印章名称：",value:"销售合同"},{label:"常规盖章：",value:"20次"},{label:"盖章码：",value:"554778"},{label:"申请人员：",value:"20次"},{label:"申请时间：",value:"2022-11-12 19:00:12"},{label:"所属部门：",value:"20次"}],labelStyle:{width:"8rem"}}},componentsTabs:{data:[{label:"待审批",name:"todo"},{label:"已审批",name:"done"}],activeName:"todo"},componentsDocumentsDetails:{show:!1,visible:[{label:"用印详情",name:"approval-process"},{label:"保管记录",name:"Record-of-custody"},{label:"操作记录",name:"operating-record"}]},componentsSearchForm:{style:{lineStyle:{width:"calc(100% / 3)"},labelStyle:{width:"100px"}},data:[],butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"t-zgj-query",label:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"t-zgj-reset",label:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:me,data:[],defaultAttribute:{stripe:!0,"header-cell-style":{background:"var(--jy-color-fill--3)"},"cell-style":({row:e,column:a,rowIndex:t,columnIndex:o})=>{if("instanceTitle"===a.property)return{color:"var(--jy-info-6)",cursor:"pointer"}}},loading:!1},componentsPagination:{data:{amount:0,index:1,pageNumber:10},defaultAttribute:{layout:"prev, pager, next, jumper",total:0,"page-sizes":[10,50,400],background:!0}},componentsBreadcrumb:{data:[{name:"ceshi"},{name:"ceshi"}],defaultAttribute:{separator:"/"}},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[]}}),g=i(null),v=e=>{n.value.show=!1},h=e=>{n.value.show=!1,g.value.reloadData()},y=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"单据名称"}},{id:"picker",label:"申请时间",type:"picker",pickerType:"date",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间"},style:{}},{id:"applyOrganId",label:"申请部门",type:"derivable",defaultAttribute:{placeholder:"+选择部门"}},{id:"applyTypeId",label:"流程类型",type:"select",options:[{label:"用印申请",value:"1"},{label:"刻章申请",value:"2"},{label:"销毁申请",value:"3"},{label:"停用申请",value:"4"},{label:"变更申请",value:"5"},{label:"启用申请",value:"6"}],defaultAttribute:{multiple:!1}},{id:"relatedCompanyId",label:"往来单位",type:"dialog",defaultAttribute:{type:"JyRelatedCompany",placeholder:"+往来单位"},options:[],values:[]},{id:"sealIds",label:"印章名称",type:"dialog",defaultAttribute:{type:"JySelectSeal",multiple:!1,placeholder:"+选择印章"},options:[],values:[]}],S=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"单据名称"}},{id:"picker",label:"申请时间",type:"picker",pickerType:"date",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间"},style:{}},{id:"approvalStatus",label:"审批状态",type:"select",options:[{label:"未审批",value:"1"},{label:"已审批",value:"2"}],defaultAttribute:{multiple:!1}},{id:"applyOrganId",label:"申请部门",type:"derivable",defaultAttribute:{type:"organ",placeholder:"+选择部门"},options:[],values:[]},{id:"applyTypeId",label:"流程类型",type:"select",options:[{label:"用印申请",value:"1"},{label:"刻章申请",value:"2"},{label:"销毁申请",value:"3"},{label:"停用申请",value:"4"},{label:"变更申请",value:"5"},{label:"启用申请",value:"6"}],defaultAttribute:{multiple:!1}},{id:"relatedCompanyId",label:"往来单位",type:"dialog",defaultAttribute:{type:"JyRelatedCompany",placeholder:"+往来单位"},options:[],values:[]},{id:"sealIds",label:"印章名称",type:"dialog",defaultAttribute:{type:"JySelectSeal",multiple:!1,placeholder:"+选择印章"},options:[],values:[]}];function D(e){c.componentsTabs.activeName=e,"todo"===e?(c.componentsTable.header=me,c.componentsTable.data=[]):"done"===e&&(c.componentsTable.header=ue,c.componentsTable.data=[]),"todo"===e?c.componentsSearchForm.data=y:"done"===e&&(c.componentsSearchForm.data=S),g.value.reloadData()}function w(){c.componentsDocumentsDetails.show=!1}function k(e,a,t,o){n.value.title=t.name,"t-zgj-Approval"===t.name&&(c.params.instanceId=a.instanceId,c.params.taskId=a.taskId,c.params.approvalMode=a.approvalMode,c.params.instanceStatus=a.instanceStatus,c.params.approvalMode=a.approvalMode,_(a,"t-zgj-Approval")),"t-zgj-F_WORKFLOW_RE_APPROVAL"===t.name&&(c.params.instanceId=a.instanceId,c.params.taskId=a.taskId,c.params.approvalMode=a.approvalMode,c.params.instanceStatus=a.instanceStatus,c.params.approvalMode=a.approvalMode,_(a,"t-zgj-F_WORKFLOW_RE_APPROVAL"))}c.componentsSearchForm.data=y;const _=(e,a)=>{const t={instanceId:e.instanceId};be.detail(t).then((t=>{c.params.formData=JSON.parse(t.formJson),c.params.modelName=t.modelName,c.params.modelId=t.modelId,c.params.nodeId=t.nodeId,c.params.definitionId=t.definitionId,d.value=c.params.formData.formVersionId,1===c.params.instanceStatus&&A(),j(e,a),z(t.privileges)})).catch((()=>{}))},j=(e,a)=>{const t={modelId:e.modelId,definitionId:e.definitionId};J.queryByGunsId(t).then((e=>{c.params.formJson=JSON.parse(e.data),n.value.show=!0,n.value.title=a}))},A=async()=>{const e={modelId:c.params.modelId,definitionId:c.params.definitionId,nodeId:c.params.nodeId},a=await fe.findList(e);a&&(c.params.buttons=a.filter((e=>e.checked)))},z=e=>{const a=[];e.forEach((e=>{e.readable&&a.push(e.fieldKey)}));const t=[];e.forEach((e=>{e.displayable&&t.push(e.fieldKey)})),c.params.disableWidgets=a,c.params.hideWidgets=t},B=(e,a,t,o)=>{"instanceTitle"===a.property&&(c.componentsDocumentsDetails.show=!0)};return M((()=>{a.getMoneyType()})),(e,a)=>{const l=p("el-button");return m(),u("div",ge,[f(K,{url:`/queryTask/${x(c).componentsTabs.activeName}`,ref_key:"table",ref:g,hasTabs:"",componentsSearchForm:x(c).componentsSearchForm,componentsTableHeader:x(c).componentsTable.header,componentsBatch:x(c).componentsBatch,tableClick:"instanceTitle",onCellClick:B,onCustomClick:k,handleApprovalStatus:!0},{title:b((()=>[I("div",ve,[I("div",null,T(e.$t("t-zgj-workflow.ApprovalProcess")),1),I("div",he,[I("div",ye,[f(l,{type:"primary"},{default:b((()=>[C(T(e.$t("t-zgj-F_SEAL_INFO_EXPORT_STANDING_BOOK")),1)])),_:1})])])])])),tabs:b((()=>[I("div",null,[f(t,{activeName:x(c).componentsTabs.activeName,data:x(c).componentsTabs.data,onTabChange:D},null,8,["activeName","data"])])])),_:1},8,["url","componentsSearchForm","componentsTableHeader","componentsBatch"]),I("div",xe,[f(o,{show:x(c).componentsDocumentsDetails.show,visible:x(c).componentsDocumentsDetails.visible,onClickClose:w},null,8,["show","visible"])]),f(pe,{ref_key:"drawer",ref:r,show:n.value.show,"onUpdate:show":a[0]||(a[0]=a=>e.show=a),params:x(c).params,title:n.value.title,onOnCancel:v,onOnConfirm:h},null,8,["show","params","title"])])}}},[["__scopeId","data-v-8d5de101"]]))}}}));
