import{_ as e,h as t,v as a,j as o,k as l,o as n,c as i,a as s,w as d,m as r,u,n as c,f as p,b3 as m,l as h,Y as b,a3 as g,cI as y,cH as f,M as v,y as C,z as x}from"./main-5d732c2e.js";import w from"./index-bf861a3a.js";import{c as D}from"./table-12670e99.js";import{_ as k}from"./searchForm-a97b647c.js";import{c as I}from"./pagination-569fa38f.js";import{c as A}from"./JyTabs-6af6e902.js";import{c as P}from"./Layout-db7f64fa.js";import{c as L}from"./batch-e7262433.js";import{c as T}from"./documentsDetails-5d74be5e.js";import"./index-b9b96043.js";import"./sangedian-b1ee72e5.js";import"./ketanchude-65de0c89.js";import"./KDocumentTypeDialog-1f624042.js";/* empty css                                                               */import"./cha-kong-1ced20bc.js";/* empty css                                                                         */import"./portion-92af8719.js";/* empty css                                                                */import"./yuan-hui-e1a80bc6.js";const F={widgetList:[{key:60504,type:"grid",alias:"",category:"container",icon:"grid",cols:[{type:"grid-col",category:"container",icon:"grid-col",internal:!0,widgetList:[{key:41481,type:"input",alias:"",icon:"text-field",formItemFlag:!0,options:{name:"input39399",label:"印章编码",labelAlign:"",type:"text",defaultValue:"202212202136545",placeholder:"",columnWidth:"200px",size:"",labelWidth:null,labelHidden:!1,readonly:!1,disabled:!0,hidden:!1,clearable:!0,showPassword:!1,required:!1,requiredHint:"",validation:"",validationHint:"",customClass:[],labelIconClass:null,labelIconPosition:"rear",labelTooltip:null,minLength:null,maxLength:null,showWordLimit:!1,prefixIcon:"",suffixIcon:"",appendButton:!1,appendButtonDisabled:!1,buttonIcon:"custom-search",onCreated:"",onMounted:"",onInput:"",onChange:"",onFocus:"",onBlur:"",onValidate:"",onAppendButtonClick:""},id:"input39399"}],options:{name:"gridCol105584",hidden:!1,span:12,offset:0,push:0,pull:0,responsive:!1,md:12,sm:12,xs:12,customClass:""},id:"grid-col-105584"},{type:"grid-col",category:"container",icon:"grid-col",internal:!0,widgetList:[],options:{name:"gridCol94191",hidden:!1,span:12,offset:0,push:0,pull:0,responsive:!1,md:12,sm:12,xs:12,customClass:""},id:"grid-col-94191"}],options:{name:"grid95645",hidden:!1,gutter:12,colHeight:null,customClass:[]},id:"grid95645"},{key:60504,type:"grid",alias:"",category:"container",icon:"grid",cols:[{type:"grid-col",category:"container",icon:"grid-col",internal:!0,widgetList:[{key:41481,type:"input",alias:"",icon:"text-field",formItemFlag:!0,options:{name:"input31036",label:"印章全程",labelAlign:"",type:"text",defaultValue:"243测试章",placeholder:"",columnWidth:"200px",size:"",labelWidth:null,labelHidden:!1,readonly:!1,disabled:!0,hidden:!1,clearable:!0,showPassword:!1,required:!1,requiredHint:"",validation:"",validationHint:"",customClass:"",labelIconClass:null,labelIconPosition:"rear",labelTooltip:null,minLength:null,maxLength:null,showWordLimit:!1,prefixIcon:"",suffixIcon:"",appendButton:!1,appendButtonDisabled:!1,buttonIcon:"custom-search",onCreated:"",onMounted:"",onInput:"",onChange:"",onFocus:"",onBlur:"",onValidate:"",onAppendButtonClick:""},id:"input31036"}],options:{name:"gridCol100025",hidden:!1,span:12,offset:0,push:0,pull:0,responsive:!1,md:12,sm:12,xs:12,customClass:""},id:"grid-col-100025"},{type:"grid-col",category:"container",icon:"grid-col",internal:!0,widgetList:[{key:41481,type:"input",alias:"",icon:"text-field",formItemFlag:!0,options:{name:"input52020",label:"印章简称",labelAlign:"",type:"text",defaultValue:"243测试章",placeholder:"",columnWidth:"200px",size:"",labelWidth:null,labelHidden:!1,readonly:!1,disabled:!0,hidden:!1,clearable:!0,showPassword:!1,required:!1,requiredHint:"",validation:"",validationHint:"",customClass:"",labelIconClass:null,labelIconPosition:"rear",labelTooltip:null,minLength:null,maxLength:null,showWordLimit:!1,prefixIcon:"",suffixIcon:"",appendButton:!1,appendButtonDisabled:!1,buttonIcon:"custom-search",onCreated:"",onMounted:"",onInput:"",onChange:"",onFocus:"",onBlur:"",onValidate:"",onAppendButtonClick:""},id:"input52020"}],options:{name:"gridCol77680",hidden:!1,span:12,offset:0,push:0,pull:0,responsive:!1,md:12,sm:12,xs:12,customClass:""},id:"grid-col-77680"}],options:{name:"grid108592",hidden:!1,gutter:12,colHeight:null,customClass:[]},id:"grid108592"},{key:60504,type:"grid",alias:"",category:"container",icon:"grid",cols:[{type:"grid-col",category:"container",icon:"grid-col",internal:!0,widgetList:[{key:41481,type:"input",alias:"",icon:"text-field",formItemFlag:!0,options:{name:"input109651",label:"归还人",labelAlign:"",type:"text",defaultValue:"",placeholder:"请输入",columnWidth:"200px",size:"",labelWidth:null,labelHidden:!1,readonly:!1,disabled:!1,hidden:!1,clearable:!0,showPassword:!1,required:!0,requiredHint:"请输填写归还人",validation:"",validationHint:"",customClass:[],labelIconClass:null,labelIconPosition:"rear",labelTooltip:null,minLength:null,maxLength:null,showWordLimit:!1,prefixIcon:"",suffixIcon:"",appendButton:!1,appendButtonDisabled:!1,buttonIcon:"custom-search",onCreated:"",onMounted:"",onInput:"",onChange:"",onFocus:"",onBlur:"",onValidate:"",onAppendButtonClick:""},id:"input109651"}],options:{name:"gridCol100871",hidden:!1,span:15,offset:0,push:0,pull:0,responsive:!1,md:12,sm:12,xs:12,customClass:[]},id:"grid-col-100871"}],options:{name:"grid46655",hidden:!1,gutter:12,colHeight:null,customClass:[]},id:"grid46655"},{key:60504,type:"grid",alias:"",category:"container",icon:"grid",cols:[{type:"grid-col",category:"container",icon:"grid-col",internal:!0,widgetList:[{key:94338,type:"date",icon:"date-field",formItemFlag:!0,options:{name:"date57911",label:"归还时间",labelAlign:"",type:"date",defaultValue:null,placeholder:"请选择时间",columnWidth:"200px",size:"",autoFullWidth:!0,labelWidth:null,labelHidden:!1,readonly:!1,disabled:!1,hidden:!1,clearable:!0,editable:!1,format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",required:!0,requiredHint:"请选择归还时间",validation:"",validationHint:"",customClass:[],labelIconClass:null,labelIconPosition:"rear",labelTooltip:null,onCreated:"",onMounted:"",onChange:"",onFocus:"",onBlur:"",onValidate:""},id:"date57911"}],options:{name:"gridCol116478",hidden:!1,span:8,offset:0,push:0,pull:0,responsive:!1,md:12,sm:12,xs:12,customClass:[]},id:"grid-col-116478"}],options:{name:"grid65351",hidden:!1,gutter:12,colHeight:null,customClass:[]},id:"grid65351"},{key:60504,type:"grid",alias:"",category:"container",icon:"grid",cols:[{type:"grid-col",category:"container",icon:"grid-col",internal:!0,widgetList:[{key:97948,type:"textarea",icon:"textarea-field",formItemFlag:!0,options:{name:"textarea66606",label:"备注",labelAlign:"",rows:3,defaultValue:"",placeholder:"请输入",columnWidth:"200px",size:"",labelWidth:null,labelHidden:!1,readonly:!1,disabled:!1,hidden:!1,required:!1,requiredHint:"",validation:"",validationHint:"",customClass:[],labelIconClass:null,labelIconPosition:"rear",labelTooltip:null,minLength:null,maxLength:null,showWordLimit:!1,onCreated:"",onMounted:"",onInput:"",onChange:"",onFocus:"",onBlur:"",onValidate:""},id:"textarea66606"}],options:{name:"gridCol19004",hidden:!1,span:15,offset:0,push:0,pull:0,responsive:!1,md:12,sm:12,xs:12,customClass:""},id:"grid-col-19004"}],options:{name:"grid89354",hidden:!1,gutter:12,colHeight:null,customClass:""},id:"grid89354"}],formConfig:{modelName:"formData",refName:"vForm",rulesName:"rules",labelWidth:110,labelPosition:"left",size:"",labelAlign:"label-right-align",cssCode:"",customClass:[],functions:"",layoutType:"PC",jsonVersion:3,dataSources:[],onFormCreated:"",onFormMounted:"",onFormDataChange:""}},_={class:"PrintControlManagement-SealloanInformation"},j=(e=>(C("data-v-cd38bf72"),e=e(),x(),e))((()=>r("div",{class:"title"}," 印章外借信息 ",-1))),H={class:"batch"},N={class:"ap-box"},B=e({setup(e){const C=t({title:"",formJson:F,optionData:null,vFormLibraryRef:"vFormLibraryRef",showDialog:!1}),x=t({title:"历史记录",showDialog:!1}),B=a(null),S=a(!1),W=a(!1),z=a(!1),M=a(null),V=a(null),Y=a(null),q=a(1),U=e=>{e?B.value.getFormData().then((e=>{alert(JSON.stringify(e)),C.showDialog=!1})).catch((e=>{b.error(e)})):B.value.resetForm()},J=t({componentsTabs:{data:[{label:"待归还的印章",name:1},{label:"已归还的印章",name:2}]},componentsSearchForm:{style:{lineStyle:{width:"calc(100% / 3)"},labelStyle:{width:"100px"}},data:[{id:"searchKey",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"印章名称"}},{id:"outDate",label:"外带时间",type:"picker",pickerType:"date",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间"},style:{}},{id:"sealTypeIds",label:"印章类型",type:"select",options:[],optionLabel:"sealTypeName",optionValue:"sealTypeId",defaultAttribute:{placeholder:"请选择印章类型",multiple:!0}},{id:"custodianId",label:"保管人",type:"derivable",defaultAttribute:{placeholder:"+保管人"}},{id:"custodianDeptId",label:"保管部门",type:"derivable",defaultAttribute:{placeholder:"+保管部门"}},{id:"outUserId",label:"外借人",type:"derivable",defaultAttribute:{placeholder:"+外借人"}},{id:"outUserDeptId",label:"外借部门",type:"derivable",defaultAttribute:{placeholder:"+外借部门"}}],butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:[{prop:"sealName",label:"印章名称",sortable:"custom","min-width":150},{prop:"sealTypeName",label:"印章类型",sortable:"custom","min-width":150},{prop:"custodianName",label:"保管人",sortable:"custom","min-width":150},{prop:"custodianDeptName",label:"保管部门",sortable:"custom","min-width":150},{prop:"outUserName",label:"外借人",sortable:"custom","min-width":150},{prop:"outUserDeptName",label:"外借部门",sortable:"custom","min-width":150},{prop:"outDatetime",label:"外借时间",sortable:"custom","min-width":200},{prop:"outLocation",label:"外借地点",sortable:"custom","min-width":200},{prop:"caozuo",label:"操作",fixed:"right","min-width":150,width:180,rankDisplayData:[{id:"guihuan",name:"归还"},{id:"history",name:"查看历史记录"}]}],data:[],defaultAttribute:{stripe:!0,"header-cell-style":{background:"var(--jy-color-fill--3)"},"cell-style":({row:e,column:t,rowIndex:a,columnIndex:o})=>{if("sealName"===t.property)return{color:"var(--jy-info-6)",cursor:"pointer"}}}},componentsPagination:{data:{amount:0,index:1,pageNumber:10},defaultAttribute:{layout:"prev, pager, next, jumper",total:0,"page-sizes":[10,100,200,300,400],background:!0}},historyTable:{header:[{prop:"outUserName",label:"外借人"},{prop:"takeUserName",label:"取章人"},{prop:"outDatetime",label:"外带时间"},{prop:"outLocation",label:"外带地址"},{prop:"returnUserName",label:"归还人"},{prop:"returnDatetime",label:"归还时间"}],data:[],defaultAttribute:{stripe:!0,"header-cell-style":{background:"var(--jy-color-fill--3)"}}},historyPagination:{data:{amount:0,index:1,pageNumber:10},defaultAttribute:{layout:"prev, pager, next, jumper",total:0,"page-sizes":[10,100,200,300,400],background:!0}},componentsDocumentsDetails:{show:!1,visible:[{label:"印章详情",name:"Particulars-of-Seal"},{label:"保管记录",name:"Record-of-custody"},{label:"操作记录",name:"operating-record"}]}});function E(e,t,a,o){"sealName"===t.property&&(J.componentsDocumentsDetails.show=!0)}function R(){J.componentsDocumentsDetails.show=!1}function O(e,t,a,o){"guihuan"===a.id?(C.title=a.name,C.showDialog=!0,C.formJson=F):"history"===a.id&&(x.showDialog=!0,Y.value=t.sealId,ae())}function K(e,t){"derivable"===e.type&&(S.value=!0)}const $=e=>{q.value=e,Z()},Q=e=>{"reset"===e.id&&(V.value.clearSorts(),J.componentsSearchForm.data.forEach((e=>{"checkButton"===e.type?e.data.forEach((e=>{delete e.checked})):"checkbox"===e.type?e.checkbox.forEach((e=>{e.value=!1})):delete e.value}))),Z()},Z=()=>{J.componentsTable.data=[],J.componentsPagination.data.index=1,X()};function G(e){M.value=e,Z()}const X=()=>{W.value=!0;const e={};J.componentsSearchForm.data.forEach((t=>{"checkButton"===t.type?e[t.id]=t.data.filter((e=>e.checked)).map((e=>e.id)).join(","):"checkbox"===t.type?e[t.id]=t.checkbox[0].value?t.checkbox[0].value:"":"picker"===t.type?"date"===t.pickerType&&(e[t.id]=t.value?t.value.map((e=>g(e).format("YYYY-MM-DD HH:mm:ss"))).join(","):""):"select"===t.type?e[t.id]=t.value?t.value.join(","):"":e[t.id]=t.value})),y.page({current:J.componentsPagination.data.index,size:J.componentsPagination.data.pageNumber,sorts:M.value?M.value.prop+" "+("ascending"===M.value.order?"asc":"desc"):"",...e}).then((e=>{J.componentsTable.data=e.data.records,J.componentsPagination.data.amount=e.data.total,J.componentsPagination.defaultAttribute.total=e.data.total,W.value=!1}))},ee=e=>{J.componentsPagination.data.index=e,X()},te=e=>{J.componentsPagination.data.pageNumber=e,X()},ae=()=>{z.value=!0,y.history({id:Y.value,current:J.historyPagination.data.index,size:J.historyPagination.data.pageNumber}).then((e=>{J.historyTable.data=e.data.records,J.historyPagination.data.amount=e.data.total,J.historyPagination.defaultAttribute.total=e.data.total,z.value=!1}),(()=>{z.value=!1}))},oe=e=>{J.historyPagination.data.index=e,ae()},le=e=>{J.historyPagination.data.pageNumber=e,ae()};return o((()=>{X(),f.list({searchKey:""}).then((e=>{J.componentsSearchForm.data[2].options=e.data}))})),l((()=>{})),(e,t)=>{const a=w,o=v;return n(),i("div",_,[s(u(P),{Layout:"title,tabs,searchForm,table,pagination,batch"},{title:d((()=>[j])),tabs:d((()=>[r("div",null,[s(A,{activeName:q.value,data:u(J).componentsTabs.data,onTabChange:$},null,8,["activeName","data"])])])),searchForm:d((()=>[r("div",null,[s(u(k),{data:u(J).componentsSearchForm.data,butData:u(J).componentsSearchForm.butData,style:c(u(J).componentsSearchForm.style),onClickElement:K,onClickSubmit:Q},null,8,["data","butData","style"])])])),batch:d((()=>[r("div",H,[s(u(L))])])),table:d((()=>[r("div",null,[s(u(D),{defaultAttribute:u(J).componentsTable.defaultAttribute,refs:"tables",ref_key:"table",ref:V,data:u(J).componentsTable.data,header:u(J).componentsTable.header,paginationData:u(J).componentsPagination.data,loading:W.value,isSelection:!1,onCellClick:E,onCustomClick:O,onSortChange:G},null,8,["defaultAttribute","data","header","paginationData","loading"])])])),pagination:d((()=>[s(u(I),{data:u(J).componentsPagination.data,defaultAttribute:u(J).componentsPagination.defaultAttribute,onCurrentChange:ee,onSizeChange:te},null,8,["data","defaultAttribute"])])),_:1}),r("div",N,[s(u(T),{show:u(J).componentsDocumentsDetails.show,visible:u(J).componentsDocumentsDetails.visible,onClickClose:R},null,8,["show","visible"])]),(n(),p(o,{"onUpdate:show":t[0]||(t[0]=e=>u(C).showDialog=e),show:u(C).showDialog,title:u(C).title,centerBtn:!0,confirmText:e.$t("t-zgj-operation.submit"),concelText:e.$t("t-zgj-operation.cancel"),width:1e3,height:600,onClose:U,key:u(C).title},{default:d((()=>[s(a,{formJson:u(C).formJson,formData:u(C).formJson,optionData:u(C).optionData,ref:u(C).vFormLibraryRef,mode:"render",onButtonClick:e.clickSelect,onOnLoaded:e.onLoaded},null,8,["formJson","formData","optionData","onButtonClick","onOnLoaded"])])),_:1},8,["show","title","confirmText","concelText"])),S.value?(n(),p(u(m),{key:0,show:S.value,"onUpdate:show":t[1]||(t[1]=e=>S.value=e)},null,8,["show"])):h("",!0),(n(),p(o,{"onUpdate:show":t[2]||(t[2]=e=>u(x).showDialog=e),show:u(x).showDialog,title:u(x).title,footer:!1,width:1e3,height:600,key:u(x).title},{default:d((()=>[s(u(D),{defaultAttribute:u(J).historyTable.defaultAttribute,data:u(J).historyTable.data,header:u(J).historyTable.header,paginationData:u(J).historyPagination.data,loading:z.value,isSelection:!1},null,8,["defaultAttribute","data","header","paginationData","loading"]),s(u(I),{data:u(J).historyPagination.data,defaultAttribute:u(J).historyPagination.defaultAttribute,onCurrentChange:oe,onSizeChange:le,style:{"margin-top":"15px"}},null,8,["data","defaultAttribute"])])),_:1},8,["show","title"]))])}}},[["__scopeId","data-v-cd38bf72"]]);export{B as default};
