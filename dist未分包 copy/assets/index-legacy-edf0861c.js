System.register(["./main-legacy-80c027be.js","./gengduo-caozuo-legacy-a661e316.js","./ketanchude-legacy-3429c6dd.js","./JyTable-legacy-cb6848b2.js","./department-legacy-8d640d7c.js","./actionMoreDialog-legacy-30fae47d.js","./index-legacy-9626848d.js","./sangedian-legacy-5b82475d.js","./Layout-legacy-b2631a91.js","./searchForm-legacy-661aae1d.js","./KDocumentTypeDialog-legacy-9730cc30.js","./pagination-legacy-abc2a695.js","./batch-legacy-5a4e36c5.js","./index-legacy-1964794f.js","./index-legacy-c06ecc2a.js","./cha-kong-legacy-f9de9560.js","./index-legacy-4d440234.js","./yuan-hui-legacy-3805e29d.js","./index-legacy-9192b6ea.js","./home-back-legacy-a6f9f130.js","./logo-legacy-f592312c.js","./request-util-legacy-b61562cd.js"],(function(e,a){"use strict";var t,n,o,l,r,d,i,c,u,s,g,m,p,h,v,b,f,y,x,w,N,I,_,j,D,k,z,P,C,L,T,B=document.createElement("style");return B.textContent='.title[data-v-36305306]{display:flex;align-items:center;justify-content:space-between}.title .title-more[data-v-36305306]{display:flex}.title .title-more .title-more-down[data-v-36305306]{margin-left:5px}.title .title-more .title-more-down img[data-v-36305306]{margin-right:5px}.components-Layout .ap-box-tree[data-v-36305306]{position:relative}.box-card[data-v-36305306]{width:110px;position:absolute;z-index:1000}.box-card div[data-v-36305306]{height:35px;line-height:35px;border-bottom:1px solid var(--el-color-primary);text-align:center;cursor:pointer}.box-card div[data-v-36305306]:nth-last-of-type(1){border-bottom:none}.components-tree[data-v-36305306]{width:max-content;min-width:100%;margin:0%}.components-tree .custom-tree-node[data-v-36305306]{display:flex;align-items:center}.components-tree .custom-tree-node .custom-tree-node-icon[data-v-36305306]{margin-right:.4rem}.components-tree[data-v-36305306]{margin-bottom:0%}.components-tree[data-v-36305306] .el-tree-node__children .el-tree-node__content{height:2.2857142857rem;padding-right:10px}.components-tree[data-v-36305306] .el-tree .el-icon svg{display:none!important;height:0;width:0}.components-tree[data-v-36305306] .el-tree-node__expand-icon{font-size:16px}.components-tree[data-v-36305306] .el-tree .el-tree-node__expand-icon.expanded{-webkit-transform:rotate(0deg);transform:rotate(0)}.components-tree[data-v-36305306] .el-tree .el-tree-node__expand-icon:before{background:url(/assets/tree-fangxiang-zuo-449ab744.svg) no-repeat 0;content:"";display:block;width:18px;height:18px}.components-tree[data-v-36305306] .el-tree .el-tree-node__expand-icon.expanded:before{background:url(/assets/tree-fangxiang-xia-767e704d.svg) no-repeat 0 0;content:"";display:block;width:18px;height:18px;margin-top:4px}.components-tree[data-v-36305306] .el-tree .is-leaf.el-tree-node__expand-icon:before{display:block;background:none!important;content:"";width:18px;height:18px}.components-tree[data-v-36305306] .el-tree-node__expand-icon.is-leaf{width:16px;display:block}\n',document.head.appendChild(B),{setters:[e=>{t=e._,n=e.v,o=e.h,l=e.j,r=e.r,d=e.o,i=e.c,c=e.a,u=e.w,s=e.m,g=e.g,m=e.t,p=e.f,h=e.q,v=e.u,b=e.l,f=e.P,y=e.Q,x=e.b3,w=e.aa,N=e.H,I=e.M,_=e.y,j=e.z,D=e.ct},e=>{k=e._},e=>{z=e._},e=>{P=e.J},e=>{C=e.a},e=>{L=e.a},e=>{T=e._},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const a=[{prop:"organName",label:"部门名称","min-width":150,fixed:"left",show:!0},{prop:"organNo",label:"部门编码","min-width":150,show:!0},{prop:"organTypeName",label:"组织类型","min-width":150,show:!0},{prop:"organUserNum",label:"部门人数",sortable:"custom",align:"center",width:150,show:!0},{prop:"organLeaderName",label:"部门主管","min-width":150,show:!0},{prop:"organPName",label:"上级组织","min-width":150,show:!0},{prop:"flag",label:"状态",show:!0},{prop:"caozuo",label:"操作","min-width":250,fixed:"right",align:"center",show:!0,rankDisplayData:[{name:"t-zgj-Edit"},{name:"status"},{name:"t-zgj-Delete"}]}],B=e=>(_("data-v-36305306"),e=e(),j(),e),A={class:"title"},V=B((()=>s("div",null,"单位与部门管理",-1))),O={class:"title-more"},E={class:"title-more-add"},U={class:"title-more-down"},S=B((()=>s("img",{class:"button-icon",src:k,alt:"",srcset:""},null,-1))),F=g("导入"),$={class:"components-tree"},q=g("部门"),J=g("单位"),R={class:"select-box-contBox"},H=B((()=>s("div",{class:"ap-box-contBox-icon"},[s("img",{class:"ap-box-contBox-icon-img",src:z,alt:""})],-1))),M={class:"select-box-contBox"},W=B((()=>s("div",{class:"ap-box-contBox-icon"},[s("img",{class:"ap-box-contBox-icon-img",src:z})],-1))),Y={class:"header-div"},K=B((()=>s("img",{src:D},null,-1))),Q={class:"content-div"};e("default",t({setup(e){const t=n(!1),_=n([]),j=n(!1),D=n(!1),k=n(!1),z=n(null),B=n([]),X=n(["organ"]),Z=n(null),G=n("-1"),ee=n(null),ae=n(!1),te=n(!1),ne=n(null),oe=n(null),le=n(!1),re=n(null),de=n(null),ie=n(null),ce=n(null),ue=n(null),se=n([]),ge=n(null),me=o({organId:"",organNo:"",organName:"",organTypeId:"department",organPid:"",organPName:"",organLeaderId:"",organLeaderName:"",readme:""}),pe=o({organName:[{required:!0,message:"请输入部门名称",trigger:"change"}],organPName:[{required:!0,message:"请选择上级部门",trigger:"change"}]}),he=o({showOneAction:{show:!1,header:{data:""},content:{data:""}},componentsSearchForm:{data:[{id:"keyWord",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"部门名称/部门编码"}},{id:"flag",label:"状态",type:"select",inCommonUse:!0,options:[{label:"启用",value:1},{label:"停用",value:0}],defaultAttribute:{placeholder:"请选择"}}],butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:a},componentsTree:{data:[],defaultAttribute:{"check-on-click-node":!0,"show-checkbox":!1,"expand-on-click-node":!1,"check-strictly":!0,"highlight-current":!0,"node-key":"organId","current-node-key":"-1",accordion:!0},defaultProps:{label:"organName",children:"children",isLeaf:"haveChildren"},value:""},componentsBatch:{selectionData:[],data:[{name:"t-zgj-dept.BatchDeactivation"},{name:"t-zgj-dept.BatchEnable"},{name:"t-zgj-seal.BatchDelete"}]}});function ve(e,a,n,o){G.value=e.organId,t.value=!0,_.value=[{value:"detail",params:e.organId},{value:"organizer",params:e.organId}]}function be(e,a,t,n){"t-zgj-Edit"===t.name?(j.value=!0,me.organId=a.organId,w((()=>{z.value.resetFields(),C.detail(a.organId).then((e=>{const a=e.data;me.organId=a.organId,me.organNo=a.organNo,me.organName=a.organName,me.organTypeId=a.organTypeId,me.organPid=a.organPid,me.organPName=a.organPName||N("accountInfo")&&N("accountInfo").userDepartName,me.organLeaderId=a.organLeaderId,me.organLeaderName=a.organLeaderName,me.readme=a.readme}))}))):"t-zgj-F_SEAL_INFO_UP"===t.name||"t-zgj-F_SEAL_INFO_DOWN"===t.name||("status"===t.name?(ce.value="启用"===a.flag?"t-zgj-Disable":"t-zgj-Enable",ie.value=a.organId,he.showOneAction.show=!0,he.showOneAction.header.data="提示","启用"===a.flag?he.showOneAction.content.data="是否停用该部门？":he.showOneAction.content.data="是否启用该部门？"):"t-zgj-Delete"===t.name&&(ce.value="t-zgj-Delete",ie.value=a.organId,he.showOneAction.show=!0,he.showOneAction.header.data="提示",he.showOneAction.content.data="是否删除该部门？"))}function fe(){"t-zgj-Enable"===ce.value?C.batchEnable([ie.value]).then((e=>{ee.value.reloadData()})).finally((()=>{he.showOneAction.show=!1})):"t-zgj-Disable"===ce.value?C.batchDisable([ie.value]).then((e=>{ee.value.reloadData()})).finally((()=>{he.showOneAction.show=!1})):"t-zgj-Delete"===ce.value&&C.batchDelete([ie.value]).then((e=>{ee.value.reloadData(),ue.value.loaded=!1,ue.value.expand()})).finally((()=>{le.value=!1,he.showOneAction.show=!1}))}function ye(e,a){re.value=e.name,"t-zgj-dept.BatchDeactivation"===e.name?de.value={header:{data:"批量停用"},content:{data:"是否批量停用这些部门？"}}:"t-zgj-dept.BatchEnable"===e.name?de.value={header:{data:"批量启用"},content:{data:"是否批量启用这些部门？"}}:"t-zgj-seal.BatchDelete"===e.name&&(de.value={header:{data:"批量删除"},content:{data:"是否批量删除这些部门？"}}),he.componentsBatch.selectionData=a,le.value=!0}const xe=e=>{k.value=!0,Z.value=e,"organP"===e?(X.value=["organ"],B.value=me.organPid?[{id:me.organPid,name:me.organPName,type:"organ"}]:[]):(X.value=["user"],B.value=me.organLeaderId?[{id:me.organLeaderId,name:me.organLeaderName,type:"user"}]:[]),setTimeout((()=>{D.value=!0}),200)},we=()=>{D.value=!1,setTimeout((()=>{k.value=!1}),200)},Ne=()=>{j.value=!0,w((()=>{me.organPid="",me.organId="",me.organPName="",me.organLeaderName="",z.value.resetFields()}))},Ie=n(!0),_e=()=>{z.value.validate((e=>{e&&(me.organId?(Ie.value=!1,C.edit(me).then((()=>{j.value=!1,ue.value.loaded=!1,ue.value.expand(),ee.value.reloadData(),Ie.value=!0})).catch((()=>{Ie.value=!0}))):(ue.value=ge.value.getNode(me.organPid),Ie.value=!1,C.add(me).then((()=>{ue.value&&(he.componentsTree.defaultAttribute["current-node-key"]=me.organPid,G.value=me.organPid,j.value=!1,ue.value.loaded=!1,ue.value.expand()),ee.value.reloadData(),Ie.value=!0})).catch((()=>{Ie.value=!0}))))}))},je=e=>{"organP"===Z.value?(me.organPid=e.length?e[0].id:"",me.organPName=e.length?e[0].name:""):(me.organLeaderId=e.length?e[0].id:"",me.organLeaderName=e.length?e[0].name:"")};function De(e,a){if(0===e.level)ue.value=e,C.subOrganList(-1).then((e=>(e.data.forEach((e=>e.haveChildren=!e.haveChildren)),se.value=e.data,a([{organName:N("accountInfo")&&N("accountInfo").userDepartName,organId:"-1",haveChildren:!1,children:[]}])))).then((()=>{w((()=>{const e=ue.value.childNodes[0];e&&(e.expanded=!0),e&&e.loadData()}))}));else{if(1===e.level)return a(se.value);C.subOrganList(e.data.organId).then((e=>(e.data.forEach((e=>e.haveChildren=!e.haveChildren)),a(e.data))))}}function ke(e,a){ue.value=a,G.value=e.organId,ee.value.reloadData()}function ze(e,a,t){1===t.level?te.value=!1:te.value=!0,ae.value=!0,oe.value=a,ne.value.$el.style.right=0,ne.value.$el.style.top=e.layerY+10+"px",document.addEventListener("click",Pe)}function Pe(){ae.value=!1,document.removeEventListener("click",Pe)}function Ce(){j.value=!0,w((()=>{z.value.resetFields(),me.organPid=oe.value.organId,me.organPName=oe.value.organName}))}function Le(){j.value=!0,me.organId=oe.value.organId,w((()=>{z.value.resetFields(),C.detail(oe.value.organId).then((e=>{const a=e.data;me.organId=a.organId,me.organNo=a.organNo,me.organName=a.organName,me.organTypeId=a.organTypeId,me.organPid=a.organPid,me.organPName=a.organPName||JSON.parse(localStorage.getItem("departLists")).find((e=>e.tenantId===localStorage.getItem("tenantId"))).tenantName,me.organLeaderId=a.organLeaderId,me.organLeaderName=a.organLeaderName,me.readme=a.readme}))}))}function Te(){ie.value=oe.value.organId,ce.value="t-zgj-Delete",he.showOneAction.show=!0,he.showOneAction.header.data="提示",he.showOneAction.content.data="是否删除该部门"}const Be=()=>{"t-zgj-dept.BatchDeactivation"===re.value?C.batchDisable(he.componentsBatch.selectionData.map((e=>e.organId))).then((e=>{ee.value.reloadData()})).finally((()=>{le.value=!1})):"t-zgj-dept.BatchEnable"===re.value?C.batchEnable(he.componentsBatch.selectionData.map((e=>e.organId))).then((e=>{ee.value.reloadData()})).finally((()=>{le.value=!1})):"t-zgj-seal.BatchDelete"===re.value&&C.batchDelete(he.componentsBatch.selectionData.map((e=>e.organId))).then((e=>{ee.value.reloadData(),ue.value.loaded=!1,ue.value.expand()})).finally((()=>{le.value=!1}))};return l((()=>{})),(e,a)=>{const n=r("el-button"),o=r("el-dropdown-item"),l=r("el-dropdown-menu"),w=r("el-dropdown"),N=r("el-tree"),C=r("el-card"),Z=r("el-input"),oe=r("el-form-item"),re=r("el-radio"),ie=r("el-radio-group"),ce=r("el-form"),ue=I,se=r("JyElMessageBox");return d(),i("div",null,[c(P,{url:"/organ/page",ref_key:"table",ref:ee,componentsSearchForm:v(he).componentsSearchForm,componentsTableHeader:v(he).componentsTable.header,componentsBatch:v(he).componentsBatch,queryParams:{organId:G.value},statusColoum:"flag",openValue:"启用",hasTree:"",tableClick:"organName",onCellClick:ve,onCustomClick:be,onClickBatchButton:ye},{title:u((()=>[s("div",A,[V,s("div",O,[s("div",E,[c(n,{type:"primary",onClick:Ne},{default:u((()=>[g("+ "+m(e.$t("t-zgj-add")),1)])),_:1})]),s("div",U,[c(w,{"popper-class":"more-operation-dropdown"},{dropdown:u((()=>[c(l,null,{default:u((()=>[c(o,null,{default:u((()=>[F])),_:1})])),_:1})])),default:u((()=>[c(n,null,{default:u((()=>[S,s("span",null,m(e.$t("t-zgj-table.more.Operation")),1)])),_:1})])),_:1})])])])])),tree:u((()=>[s("div",$,[Ie.value?(d(),p(N,h({key:0,ref_key:"deptTreeRef",ref:ge,data:v(he).componentsTree.data,props:v(he).componentsTree.defaultProps},v(he).componentsTree.defaultAttribute,{lazy:"",load:De,onCurrentChange:ke,onNodeContextmenu:ze}),null,16,["data","props"])):b("",!0),f(c(C,{class:"box-card",ref_key:"card",ref:ne,"body-style":{padding:"0 10px"}},{default:u((()=>[s("div",{class:"add",onClick:Ce},"添加子部门"),f(s("div",{class:"delete",onClick:Le}," 编辑部门 ",512),[[y,te.value]]),f(s("div",{class:"edit",onClick:Te}," 删除部门 ",512),[[y,te.value]])])),_:1},512),[[y,ae.value]])])])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch","queryParams"]),c(T,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),modulesName:"unit_and_department",detailParams:_.value},null,8,["modelValue","detailParams"]),c(ue,{"onUpdate:show":a[9]||(a[9]=e=>j.value=e),show:j.value,title:v(me).organId?e.$t("t-zgj-Edit"):e.$t("t-zgj-add"),centerBtn:!0,confirmText:e.$t("t-zgj-operation.submit"),concelText:e.$t("t-zgj-operation.cancel"),width:900,height:400,onConfirm:_e},{default:u((()=>[c(ce,{model:v(me),rules:v(pe),ref_key:"vFormLibraryRef",ref:z,"label-width":"80px"},{default:u((()=>[c(oe,{label:"部门名称",prop:"organName"},{default:u((()=>[c(Z,{modelValue:v(me).organName,"onUpdate:modelValue":a[1]||(a[1]=e=>v(me).organName=e),placeholder:"请输入",clearable:"",maxlength:"128"},null,8,["modelValue"])])),_:1}),c(oe,{label:"组织类型",prop:"organTypeId"},{default:u((()=>[c(ie,{modelValue:v(me).organTypeId,"onUpdate:modelValue":a[2]||(a[2]=e=>v(me).organTypeId=e)},{default:u((()=>[c(re,{label:"department",size:"large"},{default:u((()=>[q])),_:1}),c(re,{label:"unit",size:"large"},{default:u((()=>[J])),_:1})])),_:1},8,["modelValue"])])),_:1}),c(oe,{label:"部门编码",prop:"organNo"},{default:u((()=>[c(Z,{modelValue:v(me).organNo,"onUpdate:modelValue":a[3]||(a[3]=e=>v(me).organNo=e),placeholder:"请输入",maxlength:"64"},null,8,["modelValue"])])),_:1}),c(oe,{label:"上级部门",prop:"organPName"},{default:u((()=>[s("div",R,[c(Z,{class:"ap-box-contBox-input width-100",readonly:"",modelValue:v(me).organPName,"onUpdate:modelValue":a[4]||(a[4]=e=>v(me).organPName=e),placeholder:"请选择",onClick:a[5]||(a[5]=e=>xe("organP"))},null,8,["modelValue"]),H])])),_:1}),c(oe,{label:"部门领导",prop:"organLeaderId"},{default:u((()=>[s("div",M,[c(Z,{class:"ap-box-contBox-input width-100",readonly:"",modelValue:v(me).organLeaderName,"onUpdate:modelValue":a[6]||(a[6]=e=>v(me).organLeaderName=e),placeholder:"请选择",onClick:a[7]||(a[7]=e=>xe("leaderUser"))},null,8,["modelValue"]),W])])),_:1}),c(oe,{label:"备注",prop:"readme"},{default:u((()=>[c(Z,{modelValue:v(me).readme,"onUpdate:modelValue":a[8]||(a[8]=e=>v(me).readme=e),type:"textarea",maxlength:"512"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["show","title","confirmText","concelText"]),k.value?(d(),p(v(x),{key:0,show:D.value,"onUpdate:show":we,searchSelected:B.value,"onUpdate:searchSelected":je,tabsShow:X.value,multiple:!1,hasTopRoot:!0},null,8,["show","searchSelected","tabsShow"])):b("",!0),c(v(L),{"onUpdate:modelValue":a[10]||(a[10]=e=>le.value=!1),show:le.value,selectionData:v(he).componentsBatch.selectionData,showToastDialogContent:de.value,label:"organName",onSureAction:Be},null,8,["show","selectionData","showToastDialogContent"]),c(se,{modelValue:v(he).showOneAction.show,"onUpdate:modelValue":a[11]||(a[11]=e=>v(he).showOneAction.show=e),mode:1,showClose:!1,defaultAttribute:{},onConfirmClick:fe},{header:u((()=>[s("div",Y,[K,s("span",null,m(v(he).showOneAction.header.data),1)])])),content:u((()=>[s("div",Q,m(v(he).showOneAction.content.data),1)])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-36305306"]]))}}}));
