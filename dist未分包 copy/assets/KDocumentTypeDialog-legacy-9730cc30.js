System.register(["./main-legacy-80c027be.js"],(function(e,l){"use strict";var t,i,a,d,c,n,s,r,u,o,h,p,v,f,g,m,y,b,x,S,w,C,E,P,k,L,M,N,O,V,j,T,A,F,J=document.createElement("style");return J.textContent='.select-search[data-v-3e01129c]{padding:10px 20px 10px 0}.select-crumbs[data-v-3e01129c]{padding:6px 10px 6px 0;margin-left:-12px}.select-crumbs .custom-bread[data-v-3e01129c]{display:flex;flex-wrap:wrap}.select-crumbs .custom-bread .bread-item[data-v-3e01129c]{display:flex;align-items:center;cursor:pointer}.select-crumbs .custom-bread .bread-home .item[data-v-3e01129c]{margin-right:10px;padding:1px 4px;border-radius:2px;height:24px;line-height:23px}.select-crumbs .custom-bread .bread-home .item[data-v-3e01129c]:hover{color:var(--jy-primary-6);background:rgba(208,150,62,.1)}.select-crumbs .custom-bread .item-text[data-v-3e01129c]{padding:1px 4px;border-radius:2px;height:24px;line-height:23px;margin:0 10px;max-width:103px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.select-crumbs .custom-bread .item-text[data-v-3e01129c]:hover{color:var(--jy-primary-6);background:rgba(208,150,62,.1)}.select-list[data-v-3e01129c]{padding:4px 0 0;flex:1;height:calc(100% - 70px)}svg[data-v-13e08b3e]{vertical-align:middle}.selection-content[data-v-13e08b3e]{display:flex;height:100%;position:relative}.selection-content[data-v-13e08b3e]:after{content:"";position:absolute;top:-12px;left:50%;height:calc(100% + 40px);width:1px;background:rgba(0,0,0,.05)}.selection-content .selection-left[data-v-13e08b3e]{position:relative;flex:1;display:flex;flex-direction:column;height:100%}.selection-content .null-img[data-v-13e08b3e]{height:calc(100% - 40px);display:flex;justify-content:center;align-items:center}.selection-content .null-img img[data-v-13e08b3e]{width:171px;height:122.5px}.selection-content .select-right-column[data-v-13e08b3e]{display:flex;justify-content:space-between;align-items:center}.selection-content .select-right-column .select-right-label[data-v-13e08b3e]{display:flex}.selection-content .select-right-column .select-label[data-v-13e08b3e]{font-size:14px;color:rgba(0,0,0,.85);width:280px;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.selection-content .select-right-column .select-close[data-v-13e08b3e]{cursor:pointer;height:20px;display:flex;align-items:center}.selection-content .select-right-column .clear-t[data-v-13e08b3e]{color:#d04d3e;font-size:14px;cursor:pointer}.selection-content .select-right-column .clear-n[data-v-13e08b3e]{color:rgba(0,0,0,.85)}.selection-content .p[data-v-13e08b3e]{padding:8px 24px}.selection-content .c-p[data-v-13e08b3e]{padding:6px 24px 12px}.el-scrollbar__view{height:100%}.select-right-column .el-switch{height:20px}\n',document.head.appendChild(J),{setters:[e=>{t=e.a7,i=e._,a=e.s,d=e.h,c=e.v,n=e.r,s=e.o,r=e.c,u=e.m,o=e.a,h=e.u,p=e.b9,v=e.F,f=e.e,g=e.w,m=e.t,y=e.P,b=e.Q,x=e.ba,S=e.f,w=e.bb,C=e.l,E=e.bc,P=e.bd,k=e.J,L=e.y,M=e.z,N=e.O,O=e.be,V=e.g,j=e.n,T=e.Y,A=e.M,F=e.bf}],execute:function(){const l={treeList:e=>t({method:"GET",url:"/fileType/queryList",params:e})},J={style:{height:"100%"}},_={class:"select-search"},z={class:"select-crumbs user-select"},B={class:"custom-bread"},U=["onClick"],H={class:"item-arrow"},Z={width:"6",height:"10",viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q=[(e=>(L("data-v-3e01129c"),e=e(),M(),e))((()=>u("path",{d:"M3.78132 5.00001L0.481323 1.70001L1.42399 0.757342L5.66666 5.00001L1.42399 9.24268L0.481323 8.30001L3.78132 5.00001Z",fill:"black","fill-opacity":"0.25"},null,-1)))],q={class:"select-list user-select"},$={props:{apiModule:{type:String,default:""},allSelected:{type:Array,default:()=>[]},initQueryParams:{type:Object,default:()=>({})},multiple:{type:Boolean,default:!1}},emits:["update:allSelected"],setup(e,{expose:t,emit:i}){const L=e,M=a({get:()=>JSON.parse(JSON.stringify(L.allSelected)),set(e){i("update:allSelected",e)}}),N=[{id:"-1",pid:"0",name:"文件类型",haveChildren:!0,type:"fileType",idFullPathSet:"-1"}],O=d({lists:[]}),V=d({data:[]}),j=c([]),T=e=>new Promise(((t,i)=>{l.treeList(e).then((e=>{t(e)})).catch((e=>{i(e)}))})),A=c(""),F=c(!1),$=d({data:[]}),D=k((()=>{T({keyword:A.value,...L.initQueryParams}).then((e=>{const l=JSON.parse(JSON.stringify(e.data));0!==l&&(l.forEach((e=>{e.type="fileType"})),$.data=l),F.value=!0,A.value||(F.value=!1),0!==M.value.length&&0!==$.data&&$.data.forEach((e=>{M.value.forEach((l=>{e.id===l.id&&(e.selectedStatus=2),e.idFullPathSet.includes(l.id)&&"1"===l.includeChild&&e.id!==l.id&&(e.disabled=!0)}))}))}))}),500),I=()=>{A.value?D():F.value=!1};function G(e,l,t){if(t&&"all"===t)return Y(e,l),R(e,l),void $.data.forEach((t=>{t.id===e.id&&(t.selectedStatus=l)}));L.multiple?(W(e,l),X(e,l),$.data.forEach((t=>{t.id===e.id&&(t.selectedStatus=l)}))):V.data.forEach((t=>{t.id===e.id?(t.selectedStatus=l,M.value=l?[e]:[]):t.selectedStatus=0}))}const K=(e,l)=>{G(e,l)},Y=(e,l)=>{const t=e[0].pid;!function e(i){i.forEach((i=>{if(i.id===t&&i.children.forEach((e=>{e.selectedStatus=l})),i.children&&i.children.length>0)return e(i.children)}))}(j.value)},R=(e,l)=>{if(0===l){const e=[];V.data.forEach((l=>{l.selectedStatus=0,e.push(l.id)})),M.value=M.value.filter((l=>!e.includes(l.id)))}else{V.data.forEach((e=>{e.selectedStatus=2}));const l=[];e.forEach((e=>{l.push(e.id)})),M.value=M.value.filter((e=>!l.includes(e.id))).concat(e)}},W=(e,l)=>{!function t(i){i.forEach((i=>{if(i.id===e.id&&(i.selectedStatus=l),i.children&&i.children.length>0)return t(i.children)}))}(j.value)},X=(e,l)=>{if(0===l){V.data.forEach((l=>{l.id===e.id&&(l.selectedStatus=0)})),M.value=M.value.filter((l=>l.id!==e.id));const{includeChild:t}=M.value.find((l=>l.id===e.id));function i(l){l.forEach((l=>{if(l.id===e.id&&e.haveChildren&&(l.includeChild="0"),l.id===e.id&&"1"===t){function a(e){e.forEach((e=>{if(e.selectedStatus=0,e.disabled=!1,e.children&&e.children.length>0)return a(e.children)}))}l.children&&a(l.children)}if(l.children&&l.children.length>0)return i(l.children)}))}i(j.value),F.value&&$.data.forEach((l=>{!l.idFullPathSet.includes(e.id)||"1"!==e.includeChild&&e.includeChild||l.id===e.id||(l.disabled=!1,l.selectedStatus=0)}))}else{const a=JSON.parse(JSON.stringify(M.value));F.value&&$.data.forEach((l=>{l.id===e.id&&(l.id===e.id&&e.haveChildren&&(l.includeChild="0"),a.splice(M.value.length,0,l))})),V.data.forEach((l=>{l.id===e.id&&(l.selectedStatus=2,F.value||a.splice(M.value.length,0,l))})),M.value=a}F.value&&$.data.forEach((t=>{t.id===e.id&&(t.selectedStatus=l)}))},ee=(e,l)=>{const t=[];if(!e)return[];if(0===e.length)return t.push({curmbsName:"文件类型",id:"-1"}),t;const i=function(e,l){for(let a=0;a<e.length;a++){const d=e[a];if(t.push({curmbsName:d.name,id:d.id}),d.id===l)return t;if(d.children){const e=i(d.children,l);if(e)return e}t.pop()}};return i(e,l),t},le=c([]),te=e=>{const l=c([]);if(function t(i){i.forEach((i=>{if(i.id===e.id&&(l.value=i.children),i.children&&i.children.length>0)return t(i.children)}))}(j.value),l.value&&l.value.length>0){V.data=ie(l.value,M.value);const t=ee(j.value,e.id);return void(le.value=t)}T({...L.initQueryParams,parentId:e.id}).then((l=>{const t=l.data;if(t.forEach((e=>{e.selectedStatus=0,e.includeChild="string"!=typeof e.includeChild?"0":e.includeChild,e.type="fileType",e.disabled=!!e.disabled})),V.data=ie(t,M.value),"-1"===e.id)return O.lists=t.concat(N),void(j.value=E(O.lists,"id","pid"));j.value=E(function(e,l="id"){if(Array.isArray(e))return e.reduce(((e,t)=>e.some((e=>e[l]===t[l]))?e:[...e,t]),[])}([...P(j.value),...V.data]),"id","pid")}));const t=ee(j.value,e.id);le.value=t};function ie(e,l){return e.forEach((e=>{0===l.length?e.selectedStatus=0:l.forEach((l=>{e.id===l.id&&(e.selectedStatus=2),e.idFullPathSet.includes(l.id)&&"1"===l.includeChild&&e.id!==l.id&&(e.disabled=!0)}))})),e}const ae=(e,l)=>{e.forEach((e=>{if(e.id===l.id&&(e.selectedStatus=0,e.disabled=!1,e.includeChild="0"),e.idFullPathSet.includes(l.id)&&"1"===l.includeChild&&(e.selectedStatus=0,e.disabled=!1),e.children&&e.children.length>0)return ae(e.children,l)}))},de=e=>{e.forEach((e=>{if(e.selectedStatus=0,e.disabled=!1,e.children&&e.children.length>0)return de(e.children)}))},ce=(e,l)=>{if(!l.haveChildren)return void(M.value=M.value.filter((e=>e.id!==l.id)));const t=c([]);JSON.parse(JSON.stringify(M.value)).forEach((e=>{e.idFullPathSet.includes(l.id)&&t.value.push(e.id)})),M.value=M.value.filter((e=>!t.value.includes(e.id)))},ne=(e,l)=>{Array.isArray(e)&&0!==e.length&&e.forEach((e=>{if(e.selectedStatus=l?2:0,e.disabled=l,e.children&&e.children.length>0)return ne(e.children,l)}))},se=(e,l)=>{if(!l.haveChildren)return!1;const t=c([]);JSON.parse(JSON.stringify(M.value)).forEach((e=>{e.idFullPathSet.includes(l.id)&&e.id!==l.id&&t.value.push(e.id)})),M.value=M.value.filter((e=>!t.value.includes(e.id)))};return t({concelSelected:e=>{ce(!1,e),ae(j.value,e),V.data.forEach((l=>{l.id===e.id&&(l.selectedStatus=0,l.disabled=!1),l.idFullPathSet.includes(e.id)&&"1"===e.includeChild&&(l.selectedStatus=0,l.disabled=!1)})),$.data.forEach((l=>{l.id===e.id&&(l.selectedStatus=0,l.disabled=!1),l.idFullPathSet.includes(e.id)&&"1"===e.includeChild&&(l.selectedStatus=0,l.disabled=!1)}))},clearSelected:()=>{M.value=[],de(V.data),de($.data),de(j.value)},changeSwitch:(e,l)=>{se(e,l),function l(t,i){Array.isArray(t)&&0!==t.length&&t.forEach((t=>{if(t.id===i&&ne(t.children,e),t.children&&t.children.length>0)return l(t.children,i)}))}(j.value,l.id);const t=V.data[0].pid;!function e(l,t){Array.isArray(l)&&0!==l.length&&l.forEach((l=>{if(l.id===t&&(V.data=l.children),l.children&&l.children.length>0)return e(l.children,t)}))}(j.value,t),F.value&&$.data.forEach((e=>{e.idFullPathSet.includes(l.id)&&"1"===l.includeChild&&e.id!==l.id&&(e.disabled=!0,e.selectedStatus=2),e.idFullPathSet.includes(l.id)&&"0"===l.includeChild&&e.id!==l.id&&(e.disabled=!1,e.selectedStatus=0)}))},searchSelected:K}),(e,l)=>{const t=n("el-input"),i=n("el-tooltip");return s(),r("div",J,[u("div",_,[o(t,{modelValue:A.value,"onUpdate:modelValue":l[0]||(l[0]=e=>A.value=e),placeholder:"搜索文件类型","prefix-icon":h(p),size:"large",clearable:"",onInput:I},null,8,["modelValue","prefix-icon"])]),u("div",z,[u("div",B,[(s(!0),r(v,null,f(le.value,((e,l)=>(s(),r("div",{class:"bread-item",key:l},[o(i,{content:e.curmbsName,placement:"bottom","show-after":200},{default:g((()=>[u("div",{class:"item-text",onClick:l=>(e=>{!function l(t,i){for(let a=0;a<=t.length-1;a++){if(t[a].id===e)return void(V.data=t[a].children);if(t[a].children&&t[a].children.length>0)return l(t[a].children)}}(j.value);const l=ee(j.value,e);le.value=l})(e.id)},m(e.curmbsName),9,U)])),_:2},1032,["content"]),u("div",H,[y((s(),r("svg",Z,Q,512)),[[b,l!==le.value.length-1]])])])))),128))])]),u("div",q,[y(o(x,{lists:h(V).data,"onUpdate:lists":l[1]||(l[1]=e=>h(V).data=e),onOpen:te,onEmitsDemo:G,rootNode:N,tabActive:"fileType",multiple:L.multiple},null,8,["lists","multiple"]),[[b,!F.value]]),F.value?(s(),S(w,{key:0,lists:h($).data,"onUpdate:lists":l[2]||(l[2]=e=>h($).data=e),onOpen:te,onSearchSelected:K,tabActive:"fileType"},null,8,["lists"])):C("",!0)])])}}},D=i($,[["__scopeId","data-v-3e01129c"]]),I=e=>(L("data-v-13e08b3e"),e=e(),M(),e),G={class:"selection-content"},K={class:"selection-left user-select"},Y={key:0,style:{height:"100%"}},R={style:{display:"flex","flex-direction":"column",flex:"1"}},W={class:"select-right-column c-p"},X={class:"clear-n"},ee={key:0},le={class:"null-img"},te=[I((()=>u("img",{src:F},null,-1)))],ie={class:"select-right-label"},ae=I((()=>u("div",{style:{"margin-right":"10px"}},[u("svg",{width:"12",height:"19",viewBox:"0 0 10 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1 0C0.447715 0 0 0.447715 0 1V10C0 10.5523 0.447715 11 1 11H9C9.55228 11 10 10.5523 10 10V3.38462L8.33333 1.69231L6.66667 0H1ZM4.16667 2.53846H1.66667V3.38462H4.16667V2.53846ZM1.66667 5.07692H8.33333V5.92308H1.66667V5.07692ZM8.33333 7.61539H1.66667V8.46154H8.33333V7.61539Z",fill:"black","fill-opacity":"0.25"})])],-1))),de={style:{display:"flex",height:"25px"}},ce=["onClick"],ne=[I((()=>u("svg",{width:"16",height:"16",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.4375 7C0.4375 3.4375 3.4375 0.4375 7 0.4375C10.5625 0.4375 13.5625 3.4375 13.5625 7C13.5625 10.5625 10.5625 13.5625 7 13.5625C3.4375 13.5625 0.4375 10.5625 0.4375 7ZM9.8125 9.71875C10.0938 9.53125 10.0938 9.15625 9.8125 8.875L7.9375 7L9.90625 5.03125C10.1875 4.75 10.1875 4.375 9.90625 4.09375C9.625 3.8125 9.25 3.8125 8.96875 4.09375L7 6.0625L5.125 4.1875C4.9375 3.90625 4.5625 3.90625 4.28125 4.1875C4 4.46875 4 4.84375 4.28125 5.03125L6.15625 6.90625L4.1875 8.875C3.90625 9.0625 3.90625 9.53125 4.1875 9.8125C4.46875 10.0938 4.84375 10.0938 5.125 9.8125L7.09375 7.84375L8.96875 9.71875C9.15625 10 9.53125 10 9.8125 9.71875Z",fill:"black","fill-opacity":"0.25"})],-1)))],se={props:{show:{type:Boolean,default:!1},apiModule:{type:String,default:""},queryParams:{type:Object,default:()=>({})},editDeploy:{type:Boolean,default:!1},searchSelected:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!0}},emits:["update:show","update:searchSelected"],setup(e,{emit:l}){const t=e,i=c({width:"calc(100%)",height:"calc(100% - 40px)"}),a=c("");a.value=N.global.t("t-zgj-process.SelectUseType");const d=c(t.searchSelected||[]),h=c(!1),p=(e,l)=>new Promise(((i,a)=>{O[t.apiModule][l](e).then((e=>{i(e)})).catch((e=>{a(e)}))}));if(t.editDeploy){const e=O[t.apiModule].key;p(t.queryParams[e],"selected").then((e=>{h.value=!0}))}else h.value=!0;t.searchSelected.length>0&&(d.value=t.searchSelected.filter((e=>"fileType"===e.type)));const x=c(null),w=()=>{x.value.clearSelected()},E=()=>{l("update:show",!1)},P=c([]),k=()=>{const e={...t.queryParams,organs:d.value};t.editDeploy?p(e,"save").then((e=>{T.success(e.msg||"操作成功"),l("update:show",!1)})).catch((()=>{})):(P.value=P.value.concat(d.value),l("update:searchSelected",P.value),l("update:show",!1),P.value=[])};return(l,c)=>{const p=n("el-switch"),P=n("el-scrollbar"),L=A;return s(),S(L,{"onUpdate:show":t.show,show:t.show,title:a.value,onClose:E,onConfirm:k,confirmText:l.$t("t-zgj-select.confirm"),concelText:l.$t("t-zgj-operation.cancel"),centerBtn:"",height:574,width:900,appendToBody:"",customStyle:i.value},{default:g((()=>[u("div",G,[u("div",K,[h.value?(s(),r("div",Y,[o(D,{ref_key:"kdocument",ref:x,initQueryParams:t.queryParams,apiModule:e.apiModule,allSelected:d.value,"onUpdate:allSelected":c[0]||(c[0]=e=>d.value=e),multiple:t.multiple},null,8,["initQueryParams","apiModule","allSelected","multiple"])])):C("",!0)]),u("div",R,[u("div",W,[u("div",X,[V(m(l.$t("t-zgj-selectPerson.Selected"))+"： ",1),0!==d.value.length?(s(),r("span",ee,m(d.value.length)+" "+m(l.$t("t-zgj-cg-menu-wenjian-leixing")),1)):C("",!0)]),y(u("div",{class:"select-close clear-t",onClick:w},m(l.$t("t-zgj-dialog-clear")),513),[[b,0!==d.value.length]])]),o(P,{class:"selection-right user-select",always:""},{default:g((()=>[y(u("div",le,te,512),[[b,0===d.value.length]]),(s(!0),r(v,null,f(d.value,((e,l)=>(s(),r("div",{class:"select-right-column p",key:l},[u("div",ie,[ae,u("div",{class:"select-label",style:j(e.haveChildren&&t.multiple?"":"width: 340px")},m(e.name),5)]),u("div",de,[e.haveChildren&&t.multiple?(s(),S(p,{key:0,modelValue:e.includeChild,"onUpdate:modelValue":l=>e.includeChild=l,"active-value":"1","inactive-value":"0",style:{"margin-right":"12px"},onChange:l=>{return t=l,i=e,void(x.value&&x.value.changeSwitch(t,i));var t,i}},null,8,["modelValue","onUpdate:modelValue","onChange"])):C("",!0),u("div",{class:"select-close",onClick:l=>{return t=e,void x.value.concelSelected(t);var t}},ne,8,ce)])])))),128))])),_:1})])])])),_:1},8,["onUpdate:show","show","title","confirmText","concelText","customStyle"])}}};e("K",i(se,[["__scopeId","data-v-13e08b3e"]]))}}}));
